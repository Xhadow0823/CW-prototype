(self.webpackChunkcouple_wallet=self.webpackChunkcouple_wallet||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},7368:(t,e,n)=>{"use strict";n.d(e,{deG:()=>an,tb:()=>vu,AFp:()=>fu,ip1:()=>hu,CZH:()=>du,hGG:()=>hc,z2F:()=>ec,sBO:()=>ga,Sil:()=>ku,_Vd:()=>Uo,EJc:()=>wu,SBq:()=>zo,qLn:()=>Er,vpe:()=>$a,gxx:()=>cs,tBr:()=>An,XFs:()=>N,OlP:()=>on,zs3:()=>Ts,ZZ4:()=>ca,aQg:()=>ha,soG:()=>_u,YKP:()=>xa,v3s:()=>rc,h0i:()=>Ca,PXZ:()=>Yu,R0b:()=>Du,FiY:()=>kn,Lbi:()=>yu,g9A:()=>gu,Qsj:()=>Ko,FYo:()=>$o,JOm:()=>xr,Tiy:()=>Qo,q3G:()=>gr,tp0:()=>On,EAV:()=>oc,Rgc:()=>wa,dDg:()=>ju,DyG:()=>un,q4F:()=>Wo,GfV:()=>Yo,s_b:()=>Aa,ifc:()=>M,eFA:()=>Wu,G48:()=>Zu,Gpc:()=>m,f3M:()=>Cn,X6Q:()=>Ku,_c5:()=>cc,VLi:()=>Bu,c2e:()=>bu,zSh:()=>hs,wAp:()=>xo,vHH:()=>v,EiD:()=>pr,mCW:()=>Wn,qzn:()=>Un,JVY:()=>Bn,pB0:()=>$n,eBb:()=>zn,L6k:()=>Gn,LAX:()=>Hn,cg1:()=>Eo,Tjo:()=>uc,kL8:()=>To,yhl:()=>qn,dqk:()=>B,sIi:()=>Ps,CqO:()=>Ws,QGY:()=>Qs,F4k:()=>Ys,RDi:()=>It,AaK:()=>d,z3N:()=>jn,qOj:()=>xs,TTD:()=>_t,_Bn:()=>Mo,xp6:()=>fi,uIk:()=>Ms,ekj:()=>uo,Suo:()=>ou,Xpm:()=>X,lG2:()=>ot,Yz7:()=>S,cJS:()=>E,oAB:()=>rt,Yjl:()=>at,Y36:()=>Us,_UZ:()=>Hs,BQk:()=>Ks,ynx:()=>$s,qZA:()=>zs,TgZ:()=>Gs,EpF:()=>Zs,n5z:()=>tn,Ikx:()=>bo,LFG:()=>Tn,$8M:()=>nn,NdJ:()=>Js,CRH:()=>au,kcU:()=>ve,O4$:()=>ye,oxw:()=>eo,ALo:()=>Ga,lcZ:()=>za,Hsn:()=>io,F$t:()=>ro,Q6J:()=>qs,iGM:()=>iu,MAs:()=>js,CHM:()=>Ht,LSH:()=>yr,kYT:()=>it,Udp:()=>ao,YNc:()=>Vs,_uU:()=>mo,Oqu:()=>go,hij:()=>yo,AsE:()=>vo,Gf:()=>su});var r=n(5959),i=n(7570),s=n(8318),o=n(1906),a=n(2875),u=n(1564);function c(){return new r.xQ}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function d(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(d).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function f(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function m(t){return t.__forward_ref__=m,t.toString=function(){return d(this())},t}function g(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===m}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function _(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function w(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${_(t)} found${n}`)}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function E(t){return{providers:t.providers||[],imports:t.imports||[]}}function T(t){return C(t,I)||C(t,k)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function x(t){return t&&(t.hasOwnProperty(A)||t.hasOwnProperty(O))?t[A]:null}const I=l({"\u0275prov":l}),A=l({"\u0275inj":l}),k=l({ngInjectableDef:l}),O=l({ngInjectorDef:l});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let D;function R(t){const e=D;return D=t,e}function P(t,e,n){const r=T(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void w(d(t),"Injector")}function L(t){return{toString:t}.toString()}var F=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),M=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const V="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=V||q||j||U,G={},z=[],H=l({"\u0275cmp":l}),$=l({"\u0275dir":l}),K=l({"\u0275pipe":l}),Z=l({"\u0275mod":l}),Q=l({"\u0275loc":l}),Y=l({"\u0275fac":l}),W=l({__NG_ELEMENT_ID__:l});let J=0;function X(t){return L(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||M.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=J++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[$]||null}(t)}function et(t){return function(t){return t[K]||null}(t)}const nt={};function rt(t){return L(()=>{const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(nt[t.id]=t.type),e})}function it(t,e){return L(()=>{const n=ct(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function st(t,e){if(null==t)return G;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const ot=X;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[H]||null}function ct(t,e){const n=t[Z]||null;if(!n&&!0===e)throw new Error(`Type ${d(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Et),St}function St(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===G)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Et(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:G,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new bt(u&&u.currentValue,e,o===G),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}_t.ngInherit=!0;const Ct="http://www.w3.org/2000/svg";let xt;function It(t){xt=t}function At(t){return!!t.listen}const kt={createRenderer:(t,e)=>void 0!==xt?xt:"undefined"!=typeof document?document:void 0};function Ot(t){for(;Array.isArray(t);)t=t[0];return t}function Nt(t,e){return Ot(e[t])}function Dt(t,e){return Ot(e[t.index])}function Rt(t,e){return t.data[e]}function Pt(t,e){return t[e]}function Lt(t,e){const n=e[t];return dt(n)?n:n[0]}function Ft(t){return 4==(4&t[2])}function Mt(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function jt(t){t[18]=0}function Ut(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:le(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function Gt(){return qt.lFrame.lView}function zt(){return qt.lFrame.tView}function Ht(t){return qt.lFrame.contextLView=t,t[8]}function $t(){let t=Kt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Kt(){return qt.lFrame.currentTNode}function Zt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return qt.lFrame.isParent}function Yt(){qt.lFrame.isParent=!1}function Wt(){return qt.isInCheckNoChangesMode}function Jt(t){qt.isInCheckNoChangesMode=t}function Xt(){return qt.lFrame.bindingIndex}function te(){return qt.lFrame.bindingIndex++}function ee(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ne(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,re(e)}function re(t){qt.lFrame.currentDirectiveIndex=t}function ie(){return qt.lFrame.currentQueryIndex}function se(t){qt.lFrame.currentQueryIndex=t}function oe(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ae(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=oe(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=ce();return r.currentTNode=e,r.lView=t,!0}function ue(t){const e=ce(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ce(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?le(t):e}function le(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function he(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const de=he;function fe(){const t=he();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pe(){return qt.lFrame.selectedIndex}function me(t){qt.lFrame.selectedIndex=t}function ge(){const t=qt.lFrame;return Rt(t.tView,t.selectedIndex)}function ye(){qt.lFrame.currentNamespace=Ct}function ve(){qt.lFrame.currentNamespace=null}function be(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function _e(t,e,n){Ee(t,e,3,n)}function we(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function Se(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(Te(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Te(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Ce=-1;class xe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ie(t,e,n){const r=At(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];ke(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ae(t){return 3===t||4===t||6===t}function ke(t){return 64===t.charCodeAt(0)}function Oe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ne(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ne(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function De(t){return t!==Ce}function Re(t){return 32767&t}function Pe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Le=!0;function Fe(t){const e=Le;return Le=t,e}let Me=0;function Ve(t,e){const n=Ue(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,je(r.data,t),je(e,null),je(r.blueprint,null));const i=qe(t,e),s=t.injectorIndex;if(De(i)){const t=Re(i),n=Pe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function je(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ue(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function qe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ce;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ce}function Be(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=Me++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ge(t,e,n){if(n&N.Optional)return t;w(e,"NodeInjector")}function ze(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],s=R(void 0);try{return i?i.get(e,r,n&N.Optional):P(e,r,n&N.Optional)}finally{R(s)}}return Ge(r,e,n)}function He(t,e,n,r=N.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e?e>=0?255&e:Ke:e}(n);if("function"==typeof s){if(!ae(e,t,r))return r&N.Host?Ge(i,n,r):ze(e,n,r,i);try{const t=s(r);if(null!=t||r&N.Optional)return t;w(n)}finally{de()}}else if("number"==typeof s){let i=null,o=Ue(t,e),a=Ce,u=r&N.Host?e[16][6]:null;for((-1===o||r&N.SkipSelf)&&(a=-1===o?qe(t,e):e[o+8],a!==Ce&&Je(r,!1)?(i=e[1],o=Re(a),e=Pe(a,e)):o=-1);-1!==o;){const t=e[1];if(We(s,o,t.data)){const t=Ze(o,e,n,i,r,u);if(t!==$e)return t}a=e[o+8],a!==Ce&&Je(r,e[1].data[o+8]===u)&&We(s,o,e)?(i=t,o=Re(a),e=Pe(a,e)):o=-1}}}return ze(e,n,r,i)}const $e={};function Ke(){return new Xe($t(),Gt())}function Ze(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=Qe(a,o,n,null==r?mt(a)&&Le:r!=o&&0!=(3&a.type),i&N.Host&&s===a);return null!==u?Ye(e,o,u,a):$e}function Qe(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&yt(t)&&t.type===n)return u}return null}function Ye(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof xe){const o=i;o.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(_(s[n]));const a=Fe(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?R(o.injectImpl):null;ae(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&R(u),Fe(a),o.resolving=!1,de()}}return i}function We(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Je(t,e){return!(t&N.Self||t&N.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return He(this._tNode,this._lView,t,void 0,e)}}function tn(t){return L(()=>{const e=t.prototype.constructor,n=e[Y]||en(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||en(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return y(t)?()=>{const e=en(g(t));return e&&e()}:vt(t)}function nn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ae(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}($t(),t)}const rn="__parameters__";function sn(t,e,n){return L(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(rn)?t[rn]:Object.defineProperty(t,rn,{value:[]})[rn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=S({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const an=new on("AnalyzeForEntryComponents"),un=Function;function cn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function ln(t,e){t.forEach(t=>Array.isArray(t)?ln(t,e):e(t))}function hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function pn(t,e,n){let r=gn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mn(t,e){const n=gn(t,e);if(n>=0)return t[1|n]}function gn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const yn={},vn=/\n/gm,bn="__source",_n=l({provide:String,useValue:l});let wn;function Sn(t){const e=wn;return wn=t,e}function En(t,e=N.Default){if(void 0===wn)throw new Error("inject() must be called from an injection context");return null===wn?P(t,void 0,e):wn.get(t,e&N.Optional?null:void 0,e)}function Tn(t,e=N.Default){return(D||En)(g(t),e)}const Cn=Tn;function xn(t){const e=[];for(let n=0;n<t.length;n++){const r=g(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(Tn(t,n))}else e.push(Tn(r))}return e}function In(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const An=In(sn("Inject",t=>({token:t})),-1),kn=In(sn("Optional"),8),On=In(sn("SkipSelf"),4);let Nn;function Dn(t){var e;return(null===(e=function(){if(void 0===Nn&&(Nn=null,B.trustedTypes))try{Nn=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Nn}())||void 0===e?void 0:e.createHTML(t))||t}class Rn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Pn extends Rn{getTypeName(){return"HTML"}}class Ln extends Rn{getTypeName(){return"Style"}}class Fn extends Rn{getTypeName(){return"Script"}}class Mn extends Rn{getTypeName(){return"URL"}}class Vn extends Rn{getTypeName(){return"ResourceURL"}}function jn(t){return t instanceof Rn?t.changingThisBreaksApplicationSecurity:t}function Un(t,e){const n=qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function qn(t){return t instanceof Rn&&t.getTypeName()||null}function Bn(t){return new Pn(t)}function Gn(t){return new Ln(t)}function zn(t){return new Fn(t)}function Hn(t){return new Mn(t)}function $n(t){return new Vn(t)}class Kn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Dn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Zn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Dn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Dn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wn(t){return(t=String(t)).match(Qn)||t.match(Yn)?t:"unsafe:"+t}function Jn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Xn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const tr=Jn("area,br,col,hr,img,wbr"),er=Jn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nr=Jn("rp,rt"),rr=Xn(nr,er),ir=Xn(tr,Xn(er,Jn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xn(nr,Jn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rr),sr=Jn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),or=Jn("srcset"),ar=Xn(sr,or,Jn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Jn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ur=Jn("script,style,template");class cr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ir.hasOwnProperty(e))return this.sanitizedSomething=!0,!ur.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!ar.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;sr[s]&&(o=Wn(o)),or[s]&&(r=o,o=(r=String(r)).split(",").map(t=>Wn(t.trim())).join(", ")),this.buf.push(" ",e,'="',dr(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ir.hasOwnProperty(e)&&!tr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(dr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const lr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hr=/([^\#-~ |!])/g;function dr(t){return t.replace(/&/g,"&amp;").replace(lr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(hr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fr;function pr(t,e){let n=null;try{fr=fr||function(t){const e=new Zn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Dn(""),"text/html")}catch(t){return!1}}()?new Kn(e):e}(t);let r=e?String(e):"";n=fr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=fr.getInertBodyElement(r)}while(r!==s);return Dn((new cr).sanitizeChildren(mr(n)||n))}finally{if(n){const t=mr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function mr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function yr(t){const e=function(){const t=Gt();return t&&t[12]}();return e?e.sanitize(gr.URL,t)||"":Un(t,"URL")?jn(t):Wn(b(t))}function vr(t,e){t.__ngContext__=e}function br(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function _r(t){return t.ngDebugContext}function wr(t){return t.ngOriginalError}function Sr(t,...e){t.error(...e)}class Er{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Sr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?_r(t)?_r(t):this._findContext(wr(t)):null}_findOriginalError(t){let e=wr(t);for(;e&&wr(e);)e=wr(e);return e}}const Tr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function Cr(t){return t instanceof Function?t():t}var xr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Ir(t,e){return(void 0)(t,e)}function Ar(t){const e=t[3];return ft(e)?e[3]:e}function kr(t){return Nr(t[13])}function Or(t){return Nr(t[4])}function Nr(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Dr(t,e,n,r,i){if(null!=r){let s,o=!1;ft(r)?s=r:dt(r)&&(o=!0,r=r[0]);const a=Ot(r);0===t&&null!==n?null==i?Ur(e,n,a):jr(e,n,a,i||null,!0):1===t&&null!==n?jr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Br(t,e);r&&function(t,e,n,r){At(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==Ot(n)&&Dr(e,t,r,s,i);for(let o=ht;o<n.length;o++){const i=n[o];Yr(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Rr(t,e,n){return At(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Pr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ut(i,-1)),n.splice(r,1)}function Lr(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Pr(s,r),e>0&&(t[n-1][4]=r[4]);const o=dn(t,ht+e);Yr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Fr(t,e){if(!(256&e[2])){const n=e[11];At(n)&&n.destroyNode&&Yr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Mr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Mr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Mr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Mr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof xe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):Ot(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&At(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&Pr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Vr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===M.None||e===M.Emulated)return null}return Dt(r,n)}(t,e.parent,n)}function jr(t,e,n,r,i){At(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ur(t,e,n){At(t)?t.appendChild(e,n):e.appendChild(n)}function qr(t,e,n,r,i){null!==r?jr(t,e,n,r,i):Ur(t,e,n)}function Br(t,e){return At(t)?t.parentNode(e):e.parentNode}function Gr(t,e,n){return zr(t,e,n)}let zr=function(t,e,n){return 40&t.type?Dt(t,n):null};function Hr(t,e,n,r){const i=Vr(t,r,e),s=e[11],o=Gr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)qr(s,i,n[a],o,!1);else qr(s,i,n,o,!1)}function $r(t,e){if(null!==e){const n=e.type;if(3&n)return Dt(e,t);if(4&n)return Zr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return $r(t,n);{const n=t[e.index];return ft(n)?Zr(-1,n):Ot(n)}}if(32&n)return Ir(e,t)()||Ot(t[e.index]);{const n=Kr(t,e);return null!==n?Array.isArray(n)?n[0]:$r(Ar(t[16]),n):$r(t,e.next)}}return null}function Kr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Zr(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return $r(t,r)}return e[7]}function Qr(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&vr(Ot(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Qr(t,e,n.child,r,i,s,!1),Dr(e,t,i,a,s);else if(32&u){const o=Ir(n,r);let u;for(;u=o();)Dr(e,t,i,u,s);Dr(e,t,i,a,s)}else 16&u?Wr(t,e,r,n,i,s):Dr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Yr(t,e,n,r,i,s){Qr(n,r,t.firstChild,e,i,s,!1)}function Wr(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Dr(e,t,i,a[u],s);else Qr(t,e,a,o[3],i,s,!0)}function Jr(t,e,n){At(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Xr(t,e,n){At(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ti(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ei="ng-template";function ni(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ti(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ri(t){return 4===t.type&&t.value!==ei}function ii(t,e,n){return e===(4!==t.type||n?t.value:ei)}function si(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ae(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!ii(t,u,n)||""===u&&1===e.length){if(oi(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ni(t.attrs,c,n)){if(oi(r))return!1;o=!0}continue}const l=ai(8&r?"class":u,i,ri(t),n);if(-1===l){if(oi(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ti(e,c,0)||2&r&&c!==t){if(oi(r))return!1;o=!0}}}}else{if(!o&&!oi(r)&&!oi(u))return!1;if(o&&oi(u))continue;o=!1,r=u|1&r}}return oi(r)||o}function oi(t){return 0==(1&t)}function ai(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ui(t,e,n=!1){for(let r=0;r<e.length;r++)if(si(t,e[r],n))return!0;return!1}function ci(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function li(t,e){return t?":not("+e.trim()+")":e}function hi(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||oi(o)||(e+=li(s,i),i=""),r=o,s=s||!oi(r);n++}return""!==i&&(e+=li(s,i)),e}const di={};function fi(t){pi(zt(),Gt(),pe()+t,Wt())}function pi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&_e(e,r,n)}else{const r=t.preOrderHooks;null!==r&&we(e,r,0,n)}me(n)}function mi(t,e){return t<<17|e<<2}function gi(t){return t>>17&32767}function yi(t){return 2|t}function vi(t){return(131068&t)>>2}function bi(t,e){return-131069&t|e<<2}function _i(t){return 1|t}function wi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];se(i),n.contentQueries(2,e[s],s)}}}function Si(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,jt(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function Ei(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Kt(),o=Qt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Zt(s,!0),s}function Ti(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ci(t,e,n){ue(e);try{const r=t.viewQuery;null!==r&&es(1,r,n);const i=t.template;null!==i&&Ai(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wi(t,e),t.staticViewQueries&&es(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Yi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,fe()}}function xi(t,e,n,r){const i=e[2];if(256==(256&i))return;ue(e);const s=Wt();try{jt(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ai(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&_e(e,n,null)}else{const n=t.preOrderHooks;null!==n&&we(e,n,0,null),Se(e,0)}if(function(t){for(let e=kr(t);null!==e;e=Or(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ut(r,1),n[2]|=1024}}}(e),function(t){for(let e=kr(t);null!==e;e=Or(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Mt(n)&&xi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&wi(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&_e(e,n)}else{const n=t.contentHooks;null!==n&&we(e,n,1),Se(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)me(~r);else{const i=r,s=n[++t],o=n[++t];ne(s,i),o(2,e[i])}}}finally{me(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Zi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&es(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&_e(e,n)}else{const n=t.viewHooks;null!==n&&we(e,n,2),Se(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ut(e[3],-1))}finally{fe()}}function Ii(t,e,n,r){const i=e[10],s=!Wt(),o=Ft(e);try{s&&!o&&i.begin&&i.begin(),o&&Ci(t,e,r),xi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Ai(t,e,n,r,i){const s=pe(),o=2&r;try{me(-1),o&&e.length>lt&&pi(t,e,lt,Wt()),n(r,i)}finally{me(s)}}function ki(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Oi(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Ve(n,e),vr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=yt(r);s&&zi(e,n,r);const u=Ye(e,t,a,n);vr(u,e),null!==o&&Hi(0,a-i,u,r,0,o),s&&(Lt(n.index,e)[8]=u)}}(t,e,n,Dt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=qt.lFrame.currentDirectiveIndex;try{me(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];re(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ji(r,i)}}finally{me(-1),re(o)}}(t,e,n))}function Ni(t,e,n=Dt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Di(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ri(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ri(t,e,n,r,i,s,o,a,u,c){const l=lt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:di);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Pi(t,e,n,r){const i=rs(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&is(t).push(r,i.length-1))}function Li(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Fi(t,e,n,r,i,s,o,a){const u=Dt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(os(t,n,c,r,i),mt(e)&&function(t,e){const n=Lt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,At(s)?s.setProperty(u,r,i):ke(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Mi(t,e,n,r){let i=!1;if(Bt()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ui(n,o.selectors,!1)&&(i||(i=[]),Be(Ve(n,e),t,o.type),yt(o)?(Ui(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Bi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Ti(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Oe(n.mergedAttrs,c.hostAttrs),Gi(t,n,e,u,c),qi(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ri(e)?null:$i(n,i);s.push(c),o=Li(n,u,o),a=Li(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Oe(n.mergedAttrs,n.attrs),i}function Vi(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function ji(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ui(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function qi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function Bi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Gi(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=vt(i.type)),o=new xe(s,yt(i),null);t.blueprint[r]=o,n[r]=o,Vi(t,e,0,r,Ti(t,n,i.hostVars,di),i)}function zi(t,e,n){const r=Dt(e,t),i=Di(n),s=t[10],o=Wi(t,Si(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Hi(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function $i(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ki(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Zi(t,e){const n=Lt(e,t);if(Mt(n)){const t=n[1];80&n[2]?xi(t,n,t.template,n[8]):n[5]>0&&Qi(n)}}function Qi(t){for(let n=kr(t);null!==n;n=Or(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];xi(t,e,t.template,e[8])}else e[5]>0&&Qi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Lt(e[n],t);Mt(r)&&r[5]>0&&Qi(r)}}function Yi(t,e){const n=Lt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ci(r,n,n[8])}function Wi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ji(t){for(;t;){t[2]|=64;const e=Ar(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Xi(t,e,n){const r=e[10];r.begin&&r.begin();try{xi(t,e,t.template,n)}catch(i){throw ss(e,i),i}finally{r.end&&r.end()}}function ts(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=br(n),i=r[1];Ii(i,r,i.template,n)}}(t[8])}function es(t,e,n){se(0),e(t,n)}const ns=(()=>Promise.resolve(null))();function rs(t){return t[7]||(t[7]=[])}function is(t){return t.cleanup||(t.cleanup=[])}function ss(t,e){const n=t[9],r=n?n.get(Er,null):null;r&&r.handleError(e)}function os(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function as(t,e,n){const r=Nt(e,t);!function(t,e,n){At(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function us(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=f(i,t):2==s&&(r=f(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const cs=new on("INJECTOR",-1);class ls{get(t,e=yn){if(e===yn){const e=new Error(`NullInjectorError: No provider for ${d(t)}!`);throw e.name="NullInjectorError",e}return e}}const hs=new on("Set Injector scope."),ds={},fs={};let ps;function ms(){return void 0===ps&&(ps=new ls),ps}function gs(t,e=null,n=null,r){return new ys(t,n,e||ms(),r)}class ys{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ln(e,n=>this.processProvider(n,t,e)),ln([t],t=>this.processInjectorType(t,[],i)),this.records.set(cs,_s(void 0,this));const s=this.records.get(hs);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:d(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=yn,n=N.Default){this.assertNotDestroyed();const r=Sn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof on)&&T(t);e=n&&this.injectableDefInScope(n)?_s(vs(t),ds):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?ms():this.parent).get(t,e=n&N.Optional&&e===yn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(d(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[bn]&&i.unshift(e[bn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=d(e);if(Array.isArray(e))i=e.map(d).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Sn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(d(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=g(t)))return!1;let r=x(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=x(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{ln(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ln(r,t=>this.processProvider(t,n,r||z))}}this.injectorDefTypes.add(s);const a=vt(s)||(()=>new s);this.records.set(s,_s(a,ds));const u=r.providers;if(null!=u&&!o){const e=t;ln(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Ss(t=g(t))?t:g(t&&t.provide);const i=function(t,e,n){return ws(t)?_s(void 0,t.useValue):_s(bs(t),ds)}(t);if(Ss(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=_s(void 0,ds,!0),e.factory=()=>xn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ds&&(e.value=fs,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=g(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function vs(t){const e=T(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof on)throw new Error(`Token ${d(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=fn(e,"?");throw new Error(`Can't resolve all parameters for ${d(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[k]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function bs(t,e,n){let r;if(Ss(t)){const e=g(t);return vt(e)||vs(e)}if(ws(t))r=()=>g(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...xn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Tn(g(t.useExisting));else{const e=g(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||vs(e);r=()=>new e(...xn(t.deps))}var i;return r}function _s(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ws(t){return null!==t&&"object"==typeof t&&_n in t}function Ss(t){return"function"==typeof t}const Es=function(t,e,n){return function(t,e=null,n=null,r){const i=gs(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Ts=(()=>{class t{static create(t,e){return Array.isArray(t)?Es(t,e,""):Es(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=yn,t.NULL=new ls,t.\u0275prov=S({token:t,providedIn:"any",factory:()=>Tn(cs)}),t.__NG_ELEMENT_ID__=-1,t})();function Cs(t,e){be(br(t)[1],$t())}function xs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Is(t.inputs),e.declaredInputs=Is(t.declaredInputs),e.outputs=Is(t.outputs);const n=i.hostBindings;n&&Os(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&As(t,s),o&&ks(t,o),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===xs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Oe(i.hostAttrs,n=Oe(n,i.hostAttrs))}}(r)}function Is(t){return t===G?{}:t===z?[]:t}function As(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ks(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Os(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ns=null;function Ds(){if(!Ns){const t=B.Symbol;if(t&&t.iterator)Ns=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ns=n)}}}return Ns}class Rs{constructor(t){this.wrapped=t}static wrap(t){return new Rs(t)}static unwrap(t){return Rs.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Rs}}function Ps(t){return!!Ls(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ds()in t)}function Ls(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ms(t,e,n,r){const i=Gt();return Fs(i,te(),e)&&(zt(),function(t,e,n,r,i,s){const o=Dt(t,e);!function(t,e,n,r,i,s,o){if(null==s)At(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?b(s):o(s,r||"",i);At(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(ge(),i,t,e,n,r)),Ms}function Vs(t,e,n,r,i,s,o,a){const u=Gt(),c=zt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=Ei(e,t,4,o||null,Vt(c,a));Mi(e,n,l,Vt(c,u)),be(e,l);const h=l.tViews=Ri(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Zt(h,!1);const d=u[11].createComment("");Hr(c,u,d,h),vr(d,u),Wi(u,u[l]=Ki(d,u,d,h)),gt(h)&&Oi(c,u,h),null!=o&&Ni(u,h,a)}function js(t){return Pt(qt.lFrame.contextLView,lt+t)}function Us(t,e=N.Default){const n=Gt();return null===n?Tn(t,e):He($t(),n,g(t),e)}function qs(t,e,n){const r=Gt();return Fs(r,te(),e)&&Fi(zt(),ge(),r,t,e,r[11],n,!1),qs}function Bs(t,e,n,r,i){const s=i?"class":"style";os(t,n,e.inputs[s],s,r)}function Gs(t,e,n,r){const i=Gt(),s=zt(),o=lt+t,a=i[11],u=i[o]=Rr(a,e,qt.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=Ei(e,t,2,i,Vt(a,s));return Mi(e,n,u,Vt(a,o)),null!==u.attrs&&us(u,u.attrs,!1),null!==u.mergedAttrs&&us(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Zt(c,!0);const l=c.mergedAttrs;null!==l&&Ie(a,u,l);const h=c.classes;null!==h&&Xr(a,u,h);const d=c.styles;null!==d&&Jr(a,u,d),64!=(64&c.flags)&&Hr(s,i,u,c),0===qt.lFrame.elementDepthCount&&vr(u,i),qt.lFrame.elementDepthCount++,gt(c)&&(Oi(s,i,c),ki(s,c,i)),null!==r&&Ni(i,c)}function zs(){let t=$t();Qt()?Yt():(t=t.parent,Zt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(be(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Bs(n,e,Gt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Bs(n,e,Gt(),e.stylesWithoutHost,!1)}function Hs(t,e,n,r){Gs(t,e,n,r),zs()}function $s(t,e,n){const r=Gt(),i=zt(),s=t+lt,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=Vt(s,r),a=Ei(e,t,8,"ng-container",o);return null!==o&&us(a,o,!0),Mi(e,n,a,Vt(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];Zt(o,!0);const a=r[s]=r[11].createComment("");Hr(i,r,a,o),vr(a,r),gt(o)&&(Oi(i,r,o),ki(i,o,r)),null!=n&&Ni(r,o)}function Ks(){let t=$t();const e=zt();Qt()?Yt():(t=t.parent,Zt(t,!1)),e.firstCreatePass&&(be(e,t),pt(t)&&e.queries.elementEnd(t))}function Zs(){return Gt()}function Qs(t){return!!t&&"function"==typeof t.then}function Ys(t){return!!t&&"function"==typeof t.subscribe}const Ws=Ys;function Js(t,e,n,r){const i=Gt(),s=zt(),o=$t();return function(t,e,n,r,i,s,o,a){const u=gt(r),c=t.firstCreatePass&&is(t),l=rs(e);let h=!0;if(3&r.type||a){const d=Dt(r,e),f=a?a(d):d,p=l.length,m=a?t=>a(Ot(t[r.index])):r.index;if(At(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=to(r,e,0,s,!1);const t=n.listen(f,i,s);l.push(s,t),c&&c.push(i,m,p,p+1)}}else s=to(r,e,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,m,p,o)}else s=to(r,e,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),Js}function Xs(t,e,n,r){try{return!1!==n(r)}catch(i){return ss(t,i),!1}}function to(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Lt(t.index,e):e;0==(32&e[2])&&Ji(o);let a=Xs(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=Xs(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function eo(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function no(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?ui(t,s,!0):ci(r,s))return i}else n=i}return n}function ro(t){const e=Gt()[16][6];if(!e.projection){const n=e.projection=fn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?no(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function io(t,e=0,n){const r=Gt(),i=zt(),s=Ei(i,lt+t,16,null,n||null);null===s.projection&&(s.projection=e),Yt(),64!=(64&s.flags)&&function(t,e,n){Wr(e[11],0,e,n,Vr(t,n,e),Gr(n.parent||e[6],n,e))}(i,r,s)}function so(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?gi(s):vi(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];oo(t[a],e)&&(u=!0,t[a+1]=r?_i(n):yi(n)),a=r?gi(n):vi(n)}u&&(t[n+1]=r?yi(s):_i(s))}function oo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&gn(t,e)>=0}function ao(t,e,n){return co(t,e,n,!1),ao}function uo(t,e){return co(t,e,null,!0),uo}function co(t,e,n,r){const i=Gt(),s=zt(),o=ee(2);s.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[pe()],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ho(n=lo(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=lo(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==vi(r))return t[gi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=lo(null,t,e,n[1],r),n=ho(n,e.attrs,r),function(t,e,n,r){t[gi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ho(r,t[s].hostAttrs,n);return ho(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=gi(o),u=vi(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||gn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=gi(t[a+1]);t[r+1]=mi(e,a),0!==e&&(t[e+1]=bi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=mi(a,0),0!==a&&(t[a+1]=bi(t[a+1],r)),a=r;else t[r+1]=mi(u,0),0===a?a=r:t[u+1]=bi(t[u+1],r),u=r;l&&(t[r+1]=yi(t[r+1])),so(t,c,r,!0),so(t,c,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&gn(s,e)>=0&&(n[r+1]=_i(n[r+1]))}(e,c,t,r,s),o=mi(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==di&&Fs(i,o,e)&&function(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];po(1==(1&c)?fo(u,e,n,i,vi(c),o):void 0)||(po(s)||function(t){return 2==(2&t)}(c)&&(s=fo(u,null,n,i,a,o)),function(t,e,n,r,i){const s=At(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:xr.DashCase;if(null==i)s?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),e|=xr.Important),s?t.setStyle(n,r,i,e):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Nt(pe(),n),i,s))}(s,s.data[pe()],i,i[11],t,i[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=d(jn(t)))),t}(e,n),r,o)}function lo(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=ho(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ho(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),pn(t,o,!!n||e[++s]))}return void 0===t?null:t}function fo(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===di&&(l=c?z:void 0);let h=c?mn(l,r):u===r?l:void 0;if(s&&!po(h)&&(h=mn(e,r)),po(h)&&(a=h,o))return a;const d=t[i+1];i=o?gi(d):vi(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=mn(t,r))}return a}function po(t){return void 0!==t}function mo(t,e=""){const n=Gt(),r=zt(),i=t+lt,s=r.firstCreatePass?Ei(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return At(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Hr(r,n,o,s),Zt(s,!1)}function go(t){return yo("",t,""),go}function yo(t,e,n){const r=Gt(),i=function(t,e,n,r){return Fs(t,te(),n)?e+b(n)+r:di}(r,t,e,n);return i!==di&&as(r,pe(),i),yo}function vo(t,e,n,r,i){const s=Gt(),o=function(t,e,n,r,i,s){const o=function(t,e,n,r){const i=Fs(t,e,n);return Fs(t,e+1,r)||i}(t,Xt(),n,i);return ee(2),o?e+b(n)+r+b(i)+s:di}(s,t,e,n,r,i);return o!==di&&as(s,pe(),o),vo}function bo(t,e,n){const r=Gt();return Fs(r,te(),e)&&Fi(zt(),ge(),r,t,e,r[11],n,!0),bo}const _o=void 0;var wo=["en",[["a","p"],["AM","PM"],_o],[["AM","PM"],_o,_o],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_o,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_o,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_o,"{1} 'at' {0}",_o],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let So={};function Eo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Co(e);if(n)return n;const r=e.split("-")[0];if(n=Co(r),n)return n;if("en"===r)return wo;throw new Error(`Missing locale data for the locale "${t}".`)}function To(t){return Eo(t)[xo.PluralCase]}function Co(t){return t in So||(So[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),So[t]}var xo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Io="en-US";let Ao=Io;function ko(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ao=t.toLowerCase().replace(/_/g,"-"))}function Oo(t,e,n,r,i){if(t=g(t),Array.isArray(t))for(let s=0;s<t.length;s++)Oo(t[s],e,n,r,i);else{const s=zt(),o=Gt();let a=Ss(t)?t:g(t.provide),u=bs(t);const c=$t(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Ss(t)||!t.multi){const r=new xe(u,i,Us),f=Ro(a,e,i?l:l+d,h);-1===f?(Be(Ve(c,o),s,a),No(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=Ro(a,e,l+d,h),p=Ro(a,e,l,l+d),m=f>=0&&n[f],g=p>=0&&n[p];if(i&&!g||!i&&!m){Be(Ve(c,o),s,a);const l=function(t,e,n,r,i){const s=new xe(t,n,Us);return s.multi=[],s.index=e,s.componentProviders=0,Do(s,i,r&&!n),s}(i?Lo:Po,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),No(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else No(s,t,f>-1?f:p,Do(n[i?p:f],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function No(t,e,n,r){const i=Ss(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function Do(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ro(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Po(t,e,n,r){return Fo(this.multi,[])}function Lo(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ye(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),Fo(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Fo(i,s);return s}function Fo(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Mo(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=yt(t);Oo(n,r.data,r.blueprint,i,!0),Oo(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Vo{}class jo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${d(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Uo=(()=>{class t{}return t.NULL=new jo,t})();function qo(...t){}function Bo(t,e){return new zo(Dt(t,e))}const Go=function(){return Bo($t(),Gt())};let zo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Go,t})();function Ho(t){return t instanceof zo?t.nativeElement:t}class $o{}let Ko=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Zo(),t})();const Zo=function(){const t=Gt(),e=Lt($t().index,t);return function(t){return t[11]}(dt(e)?e:t)};let Qo=(()=>{class t{}return t.\u0275prov=S({token:t,providedIn:"root",factory:()=>null}),t})();class Yo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Wo=new Yo("12.0.5");class Jo{constructor(){}supports(t){return Ps(t)}create(t){return new ta(t)}}const Xo=(t,e)=>e;class ta{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Xo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<ia(n,r,i)?e:n,o=ia(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ps(t))throw new Error(`Error trying to diff '${d(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ds()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ea(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ra),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ra),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ea{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class na{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ra{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new na,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ia(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class sa{constructor(){}supports(t){return t instanceof Map||Ls(t)}create(){return new oa}}class oa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ls(t)))throw new Error(`Error trying to diff '${d(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new aa(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class aa{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ua(){return new ca([new Jo])}let ca=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ua()),deps:[[t,new On,new kn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=S({token:t,providedIn:"root",factory:ua}),t})();function la(){return new ha([new sa])}let ha=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||la()),deps:[[t,new On,new kn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=S({token:t,providedIn:"root",factory:la}),t})();function da(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Ot(s)),ft(s))for(let t=ht;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&da(e[1],e,n,r)}const o=n.type;if(8&o)da(t,e,n.child,r);else if(32&o){const t=Ir(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Kr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Ar(e[16]);da(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class fa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return da(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Lr(t,n),dn(e,n))}this._attachedToViewContainer=!1}Fr(this._lView[1],this._lView)}onDestroy(t){Pi(this._lView[1],this._lView,null,t)}markForCheck(){Ji(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{Xi(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Yr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class pa extends fa{constructor(t){super(t),this._view=t}detectChanges(){ts(this._view)}checkNoChanges(){!function(t){Jt(!0);try{ts(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const ma=function(t){return function(t,e,n){if(mt(t)&&!n){const n=Lt(t.index,e);return new fa(n,n)}return 47&t.type?new fa(e[16],e):null}($t(),Gt(),16==(16&t))};let ga=(()=>{class t{}return t.__NG_ELEMENT_ID__=ma,t})();const ya=[new sa],va=new ca([new Jo]),ba=new ha(ya),_a=function(){return Ta($t(),Gt())};let wa=(()=>{class t{}return t.__NG_ELEMENT_ID__=_a,t})();const Sa=wa,Ea=class extends Sa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Si(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ci(e,n,t),new fa(n)}};function Ta(t,e){return 4&t.type?new Ea(e,t,Bo(t,e)):null}class Ca{}class xa{}const Ia=function(){return Ra($t(),Gt())};let Aa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ia,t})();const ka=Aa,Oa=class extends ka{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Bo(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=qe(this._hostTNode,this._hostLView);if(De(t)){const e=Pe(t,this._hostLView),n=Re(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Na(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(Ca,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Oa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=ht+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-ht?(e[4]=n[i],hn(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=Zr(i,s),a=n[11],u=Br(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,Yr(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),hn(Da(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Na(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Lr(this._lContainer,e);n&&(dn(Da(this._lContainer),e),Fr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Lr(this._lContainer,e);return n&&null!=dn(Da(this._lContainer),e)?new fa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Na(t){return t[8]}function Da(t){return t[8]||(t[8]=[])}function Ra(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=Ot(r);else{const n=e[11];i=n.createComment("");const r=Dt(t,e);jr(n,Br(n,r),i,function(t,e){return At(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ki(r,e,i,t),Wi(e,n)}return new Oa(n,t,e)}const Pa={};class La extends Uo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new Va(e,this.ngModule)}}function Fa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ma=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Tr});class Va extends Vo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(hi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Fa(this.componentDef.inputs)}get outputs(){return Fa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Pa,i);return s!==Pa||r===Pa?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get($o,kt),o=i.get(Qo,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(At(t))return t.selectRootElement(e,n===M.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Rr(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?Ct:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Tr,clean:ns,playerHandler:null,flags:0},d=Ri(0,null,null,1,0,null,null,null,null,null),f=Si(null,d,h,l,null,null,s,a,o,i);let p,m;ue(f);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=Ei(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(us(a,u,!0),null!==t&&(Ie(i,t,u),null!==a.classes&&Xr(i,t,a.classes),null!==a.styles&&Jr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Si(n,Di(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Be(Ve(a,n),o,e.type),Ui(o,a),Bi(a,n.length,1)),Wi(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)Ie(a,c,["ng-version",Wo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!oi(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ie(a,c,t),e&&e.length>0&&Xr(a,c,e.join(" "))}if(m=Rt(d,lt),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=$t();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Gi(t,r,e,Ti(t,e,1,null),n));const i=Ye(e,t,r.directiveStart,r);vr(i,e);const s=Dt(r,e);return s&&vr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=$t();e.contentQueries(1,o,t.directiveStart)}const a=$t();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(me(a.index),Vi(n[1],a,0,a.directiveStart,a.directiveEnd,e),ji(e,o)),o}(t,this.componentDef,f,h,[Cs]),Ci(d,f,null)}finally{fe()}return new ja(this.componentType,p,Bo(m,f),f,m)}}class ja extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new pa(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ua=new Map;class qa extends Ca{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new La(this);const n=ct(t),r=t[Q]||null;r&&ko(r),this._bootstrapComponents=Cr(n.bootstrap),this._r3Injector=gs(t,e,[{provide:Ca,useValue:this},{provide:Uo,useValue:this.componentFactoryResolver}],d(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ts.THROW_IF_NOT_FOUND,n=N.Default){return t===Ts||t===Ca||t===cs?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ba extends xa{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${d(e)} vs ${d(e.name)}`)}(i,Ua.get(i),n),Ua.set(i,n));const s=Cr(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new qa(this.moduleType,t)}}function Ga(t,e){const n=zt();let r;const i=t+lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new v("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=vt(r.type)),o=R(Us);try{const t=Fe(!1),e=s();return Fe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Gt(),i,e),e}finally{R(o)}}function za(t,e,n){const r=t+lt,i=Gt(),s=Pt(i,r);return function(t,e){return Rs.isWrapped(e)&&(e=Rs.unwrap(e),t[Xt()]=di),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?function(t,e,n,r,i,s){const o=e+n;return Fs(t,o,i)?function(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function(t,e){const n=t[e];return n===di?void 0:n}(t,o+1)}(i,function(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n))}function Ha(t){return e=>{setTimeout(t,void 0,e)}}const $a=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=Ha(u),a&&(a=Ha(a)),c&&(c=Ha(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Ka(){return this._results[Ds()]()}class Za{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ds(),n=Za.prototype;n[e]||(n[e]=Ka)}get changes(){return this._changes||(this._changes=new $a)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=cn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Qa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Qa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ya{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ya(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==lu(t,e).matches&&this.queries[e].setDirty()}}class Wa{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ja{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ja(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Xa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Xa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,tu(e,i)),this.matchTNodeWithReadOption(t,e,Qe(e,t,i,!1,!1))}else n===wa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Qe(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===zo||r===Aa||r===wa&&4&e.type)this.addMatch(e.index,-2);else{const n=Qe(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function tu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function eu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Bo(t,e):4&t.type?Ta(t,e):null}(e,t):-2===n?function(t,e,n){return n===zo?Bo(e,t):n===wa?Ta(e,t):n===Aa?Ra(e,t):void 0}(t,e,r):Ye(t,t[1],n,e)}function nu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:eu(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function ru(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=nu(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=ht;t<o.length;t++){const e=o[t];e[17]===e[3]&&ru(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];ru(n[1],n,i,r)}}}}}return r}function iu(t){const e=Gt(),n=zt(),r=ie();se(r+1);const i=lu(n,r);if(t.dirty&&Ft(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?ru(n,e,r,[]):nu(n,e,i,r);t.reset(s,Ho),t.notifyOnChanges()}return!0}return!1}function su(t,e,n){const r=zt();r.firstCreatePass&&(cu(r,new Wa(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),uu(r,Gt(),e)}function ou(t,e,n,r){const i=zt();if(i.firstCreatePass){const s=$t();cu(i,new Wa(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}uu(i,Gt(),n)}function au(){return t=Gt(),e=ie(),t[19].queries[e].queryList;var t,e}function uu(t,e,n){const r=new Za(4==(4&n));Pi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ya),e[19].queries.push(new Qa(r))}function cu(t,e,n){null===t.queries&&(t.queries=new Ja),t.queries.track(new Xa(e,n))}function lu(t,e){return t.queries.getByIndex(e)}const hu=new on("Application Initializer");let du=(()=>{class t{constructor(t){this.appInits=t,this.resolve=qo,this.reject=qo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Qs(e))t.push(e);else if(Ws(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Tn(hu,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const fu=new on("AppId"),pu={provide:fu,useFactory:function(){return`${mu()}${mu()}${mu()}`},deps:[]};function mu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gu=new on("Platform Initializer"),yu=new on("Platform ID"),vu=new on("appBootstrapListener");let bu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const _u=new on("LocaleId"),wu=new on("DefaultCurrencyCode");class Su{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Eu=function(t){return new Ba(t)},Tu=Eu,Cu=function(t){return Promise.resolve(Eu(t))},xu=function(t){const e=Eu(t),n=Cr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new Va(n)),t},[]);return new Su(e,n)},Iu=xu,Au=function(t){return Promise.resolve(xu(t))};let ku=(()=>{class t{constructor(){this.compileModuleSync=Tu,this.compileModuleAsync=Cu,this.compileModuleAndAllComponentsSync=Iu,this.compileModuleAndAllComponentsAsync=Au}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Ou=(()=>Promise.resolve(0))();function Nu(t){"undefined"==typeof Zone?Ou.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Du{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $a(!1),this.onMicrotaskEmpty=new $a(!1),this.onStable=new $a(!1),this.onError=new $a(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Lu(t),t.isCheckStableRunning=!0,Pu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Lu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Fu(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Mu(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Fu(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Mu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Lu(t),Pu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Du.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Du.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,Ru,qo,qo);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Ru={};function Pu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Lu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Fu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Mu(t){t._nesting--,Pu(t)}class Vu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $a,this.onMicrotaskEmpty=new $a,this.onStable=new $a,this.onError=new $a}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ju=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Du.assertNotInAngularZone(),Nu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Nu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Tn(Du))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})(),Uu=(()=>{class t{constructor(){this._applications=new Map,zu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return zu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();class qu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Bu(t){zu=t}let Gu,zu=new qu,Hu=!0,$u=!1;function Ku(){return $u=!0,Hu}function Zu(){if($u)throw new Error("Cannot enable prod mode after platform setup.");Hu=!1}const Qu=new on("AllowMultipleToken");class Yu{constructor(t,e){this.name=t,this.token=e}}function Wu(t,e,n=[]){const r=`Platform: ${e}`,i=new on(r);return(e=[])=>{let s=Ju();if(!s||s.injector.get(Qu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:hs,useValue:"platform"});!function(t){if(Gu&&!Gu.destroyed&&!Gu.injector.get(Qu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Gu=t.get(Xu);const e=t.get(gu,null);e&&e.forEach(t=>t())}(Ts.create({providers:t,name:r}))}return function(t){const e=Ju();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Ju(){return Gu&&!Gu.destroyed?Gu:null}let Xu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Vu:("zone.js"===t?void 0:t)||new Du({enableLongStackTrace:Ku(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Du,useValue:n}];return n.run(()=>{const e=Ts.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(Er,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{nc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Qs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(du);return t.runInitializers(),t.donePromise.then(()=>(ko(i.injector.get(_u,Io)||Io),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=tc({},e);return function(t,e,n){const r=new Ba(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(ec);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${d(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Tn(Ts))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function tc(t,e){return Array.isArray(e)?e.reduce(tc,t):Object.assign(Object.assign({},t),e)}let ec=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Du.assertNotInAngularZone(),Nu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Du.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(t=>{return(0,u.x)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Vo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ca),i=n.create(Ts.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(ju,null),a=o&&i.injector.get(Uu);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),nc(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;nc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(vu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Tn(Du),Tn(Ts),Tn(Er),Tn(Uo),Tn(du))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function nc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class rc{}class ic{}const sc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let oc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||sc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>ac(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>ac(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Tn(ku),Tn(ic,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function ac(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const uc=function(t){return null},cc=Wu(null,"core",[{provide:yu,useValue:"unknown"},{provide:Xu,deps:[Ts]},{provide:Uu,deps:[]},{provide:bu,deps:[]}]),lc=[{provide:ec,useClass:ec,deps:[Du,Ts,Er,Uo,du]},{provide:Ma,deps:[Du],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:du,useClass:du,deps:[[new kn,hu]]},{provide:ku,useClass:ku,deps:[]},pu,{provide:ca,useFactory:function(){return va},deps:[]},{provide:ha,useFactory:function(){return ba},deps:[]},{provide:_u,useFactory:function(t){return ko(t=t||"undefined"!=typeof $localize&&$localize.locale||Io),t},deps:[[new An(_u),new kn,new On]]},{provide:wu,useValue:"USD"}];let hc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Tn(ec))},t.\u0275mod=rt({type:t}),t.\u0275inj=E({providers:lc}),t})()},2346:(t,e,n)=>{"use strict";n.d(e,{hO:()=>x,xv:()=>b,Dh:()=>v,HU:()=>f,GT:()=>y,sI:()=>T,on:()=>w,ss:()=>p,pX:()=>g,yq:()=>S});var r=n(8489),i=n(8569),s=n(6599),o=n(2893),a=n(9098),u=n(7368),c=n(1858);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,s.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,o.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const m=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(m.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig"),_=new u.GfV("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&E("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const S=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:class{},useFactory:w,deps:[v,u.R0b,[new u.FiY,b]]};let x=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",_.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[C]}),t})()},1062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,s=n(4762),o=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=d);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.6.8",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,o.r3)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(m);return e.INTERNAL=(0,s.pi)((0,s.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.27",void 0),t.registerVersion("fire-js","")}(_);const w=_},5119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(4762),i=n(250),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(a,o),a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>d,Am:()=>f});var s=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function d(t){s.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>b,r3:()=>S,Sg:()=>u,ne:()=>E,p$:()=>s,ZB:()=>o,m9:()=>x,z$:()=>c,jU:()=>d,ru:()=>f,d:()=>m,w1:()=>g,uI:()=>l,UG:()=>h,b$:()=>p,Mn:()=>y});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function s(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function d(){return"object"==typeof self&&self.self===self}function f(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return c().indexOf("Electron/")>=0}function g(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,b.prototype.create),s}return(0,r.ZT)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?_(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new v(i,a,r);return u},t}();function _(t,e){return t.replace(w,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var w=/\{\$([^}]+)}/g;function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){var n=new T(t,e);return n.subscribe.bind(n)}var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function C(){}function x(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(1062),i="8.6.8";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),s=n(7498),o=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(1484),i=n(4294);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),s=n(7570),o=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),s=n(7570),o=n(5331),a=n(1484),u=n(4294);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),s=n(5024);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,s.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof o?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),s=n(6015);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},2875:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),s=n(7570),o=n(1564);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},653:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(8318);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),s=n(7570),o=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(8318),i=n(625),s=n(2570);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),s=n(7471),o=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(6163),i=n(9342),s=n(2570);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},7471:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(3982),i=n(3392);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},3982:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(9996),i=n(9764),s=n(6882);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9098:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),s=n(878),o=n(8318);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return t=this.error,new o.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1564:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(6673);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},2893:(t,e,n)=>{"use strict";n.d(e,{R:()=>g});var r=n(8318);let i=1;const s=(()=>Promise.resolve())(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(8277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(1098);class d extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n(2293);class m extends r.y{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!(0,p.k)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new m(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(m.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function g(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new m(e,this.delay,this.scheduler).subscribe(t)}}},6599:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(6673);function i(){}var s=n(5024);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(8318),i=n(7570);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>s});var r=n(8277);const i=new(n(1098).v)(r.o),s=i},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var s=n(1098);class o extends s.v{}const a=new o(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2293:(t,e,n)=>{"use strict";n.d(e,{k:()=>i});var r=n(8470);function i(t){return!(0,r.k)(t)&&t-parseFloat(t)+1>=0}},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),s=n(5686),o=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},8843:(t,e,n)=>{"use strict";var r=n(7368);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(o))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let g=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(o).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends g{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends g{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(g),r.LFG(a))},t.normalizeQueryParams=m,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new w((0,r.LFG)(g),(0,r.LFG)(a))}function E(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const C=r.kL8;class x{}let I=(()=>{class t extends x{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(C(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),A=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new k,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){O("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){O("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class k{constructor(){this.$implicit=null,this.ngIf=null}}function O(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}class N{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let D=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),R=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new N(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(D,9))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),P=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.aQg),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})();function L(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,r.AaK)(t)}'`)}class F{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class M{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const V=new M,j=new F;let U=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if((0,r.QGY)(e))return V;if((0,r.F4k)(e))return j;throw L(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO,16))},t.\u0275pipe=r.Yjl({name:"async",type:t,pure:!1}),t})(),q=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw L(t,e);return e.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Yjl({name:"uppercase",type:t,pure:!0}),t})(),B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:x,useClass:I}]}),t})();function G(t){return"server"===t}let z=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new H((0,r.LFG)(o),window)}),t})();class H{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=$(this.window.history)||$(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(eb){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(eb){return!1}}}function $(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class K extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new K,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Q=Q||document.querySelector("base"),Q?Q.getAttribute("href"):null);return null==e?null:function(t){Z=Z||document.createElement("a"),Z.setAttribute("href",t);const e=Z.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Q=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Z,Q=null;const Y=new r.OlP("TRANSITION_ID"),W=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Y,o,r.zs3],multi:!0}];class J{static init(){(0,r.VLi)(new J)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let X=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const tt=new r.OlP("EventManagerPlugins");let et=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(tt),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let rt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),it=(()=>{class t extends rt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(st),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(st))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function st(t){s().remove(t)}const ot={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},at=/%COMP%/g;function ut(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ut(t,i,n):(i=i.replace(at,t),n.push(i))}return n}function ct(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let lt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ht(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new dt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new ft(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=ut(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(et),r.LFG(it),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ht{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(ot[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=ot[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=ot[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ct(n)):this.eventManager.addEventListener(t,e,ct(n))}}class dt extends ht{constructor(t,e,n,r){super(t),this.component=n;const i=ut(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(at,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(at,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ft extends ht{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=ut(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let pt=(()=>{class t extends nt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const mt=["alt","control","meta","shift"],gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},vt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let bt=(()=>{class t extends nt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(mt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&yt.hasOwnProperty(e)&&(e=yt[e]))}return gt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),mt.forEach(r=>{r!=n&&(0,vt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const _t=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){K.makeCurrent(),J.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),wt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:tt,useClass:pt,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:tt,useClass:bt,multi:!0,deps:[o]},[],{provide:lt,useClass:lt,deps:[et,it,r.AFp]},{provide:r.FYo,useExisting:lt},{provide:rt,useExisting:it},{provide:it,useClass:it,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:et,useClass:et,deps:[tt,r.R0b]},{provide:class{},useClass:X,deps:[]},[]];let St=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:Y,useExisting:r.AFp},W]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:wt,imports:[B,r.hGG]}),t})();"undefined"!=typeof window&&window;var Et=n(9764),Tt=n(8318),Ct=n(8470),xt=n(9996),It=n(2056);function At(t,e){return new Tt.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=(0,Et.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let kt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),Ot=(()=>{class t extends kt{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const Nt=new r.OlP("NgValueAccessor"),Dt={provide:Nt,useExisting:(0,r.Gpc)(()=>Pt),multi:!0},Rt=new r.OlP("CompositionEventMode");let Pt=(()=>{class t extends kt{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Rt,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([Dt]),r.qOj]}),t})();const Lt=new r.OlP("NgValidators"),Ft=new r.OlP("NgAsyncValidators");function Mt(t){return null!=t}function Vt(t){const e=(0,r.QGY)(t)?(0,Et.D)(t):t;return(0,r.CqO)(e),e}function jt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ut(t,e){return e.map(e=>e(t))}function qt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Bt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Mt);return 0==e.length?null:function(t){return jt(Ut(t,e))}}(qt(t)):null}function Gt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Mt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,Ct.k)(e))return At(e,null);if((0,It.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return At(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return At(t=1===t.length&&(0,Ct.k)(t[0])?t[0]:t,null).pipe((0,xt.U)(t=>e(...t)))}return At(t,null)}(Ut(t,e).map(Vt)).pipe((0,xt.U)(jt))}}(qt(t)):null}function zt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ht(t){return t._rawValidators}function $t(t){return t._rawAsyncValidators}let Kt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Bt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Gt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),Zt=(()=>{class t extends Kt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class Qt extends Kt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Yt=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Qt,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})();function Wt(t,e){te(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ne(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ne(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Jt(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ee(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Xt(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function te(t,e){const n=Ht(t);null!==e.validator?t.setValidators(zt(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=$t(t);null!==e.asyncValidator?t.setAsyncValidators(zt(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Xt(e._rawValidators,i),Xt(e._rawAsyncValidators,i)}function ee(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=Ht(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.validator);i.length!==r.length&&(n=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const r=$t(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.asyncValidator);i.length!==r.length&&(n=!0,t.setAsyncValidators(i))}}}const r=()=>{};return Xt(e._rawValidators,r),Xt(e._rawAsyncValidators,r),n}function ne(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function re(t,e){te(t,e)}function ie(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function se(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const oe="VALID",ae="INVALID",ue="PENDING",ce="DISABLED";function le(t){return(pe(t)?t.validators:t)||null}function he(t){return Array.isArray(t)?Bt(t):t||null}function de(t,e){return(pe(e)?e.asyncValidators:t)||null}function fe(t){return Array.isArray(t)?Gt(t):t||null}function pe(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class me{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=he(this._rawValidators),this._composedAsyncValidatorFn=fe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===oe}get invalid(){return this.status===ae}get pending(){return this.status==ue}get disabled(){return this.status===ce}get enabled(){return this.status!==ce}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=he(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=fe(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ue,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ce,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=oe,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==oe&&this.status!==ue||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ce:oe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ue,this._hasOwnPendingAsyncValidator=!0;const e=Vt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof ye?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof ve&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?ce:this.errors?ae:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ue)?ue:this._anyControlsHaveStatus(ae)?ae:oe}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){pe(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ge extends me{constructor(t=null,e,n){super(le(e),de(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){se(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){se(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ye extends me{constructor(t,e,n){super(le(e),de(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof ge?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class ve extends me{constructor(t,e,n){super(le(e),de(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ge?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const be={provide:Zt,useExisting:(0,r.Gpc)(()=>we)},_e=(()=>Promise.resolve(null))();let we=(()=>{class t extends Zt{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.vpe,this.form=new ye({},Bt(t),Gt(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){_e.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Wt(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){_e.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),se(this._directives,t)})}addFormGroup(t){_e.then(()=>{const e=this._findContainer(t.path),n=new ye({});re(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){_e.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){_e.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,ie(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Lt,10),r.Y36(Ft,10))},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([be]),r.qOj]}),t})();const Se={provide:Qt,useExisting:(0,r.Gpc)(()=>Te)},Ee=(()=>Promise.resolve(null))();let Te=(()=>{class t extends Qt{constructor(t,e,n,i){super(),this.control=new ge,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Pt?n=t:Object.getPrototypeOf(t.constructor)===Ot?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Wt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Ee.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Ee.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Zt,9),r.Y36(Lt,10),r.Y36(Ft,10),r.Y36(Nt,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([Se]),r.qOj,r.TTD]}),t})();const Ce={provide:Nt,useExisting:(0,r.Gpc)(()=>xe),multi:!0};let xe=(()=>{class t extends Ot{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r._Bn([Ce]),r.qOj]}),t})(),Ie=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Ae={provide:Zt,useExisting:(0,r.Gpc)(()=>ke)};let ke=(()=>{class t extends Zt{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ee(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Wt(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Jt(t.control||null,t,!1),se(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,ie(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(Jt(e||null,t),n instanceof ge&&(Wt(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);re(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return ee(t,e)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){te(this.form,this),this._oldForm&&ee(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Lt,10),r.Y36(Ft,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([Ae]),r.qOj,r.TTD]}),t})();const Oe={provide:Nt,useExisting:(0,r.Gpc)(()=>De),multi:!0};function Ne(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let De=(()=>{class t extends Ot{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this.setProperty("selectedIndex",-1);const n=Ne(e,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Oe]),r.qOj]}),t})(),Re=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Ne(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(De,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Pe={provide:Nt,useExisting:(0,r.Gpc)(()=>Fe),multi:!0};function Le(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Fe=(()=>{class t extends Ot{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Pe]),r.qOj]}),t})(),Me=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Le(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Le(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Fe,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),Ve=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ie]]}),t})(),je=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Ve]}),t})();var Ue=n(878),qe=n(5959),Be=n(3895);class Ge extends qe.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Be.N;return this._value}next(t){super.next(this._value=t)}}var ze=n(6163),He=n(6673);class $e extends He.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Ke extends He.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ze=n(6015);function Qe(t,e,n,r,i=new Ke(t,n,r)){if(!i.closed)return e instanceof Tt.y?e.subscribe(i):(0,Ze.s)(e)(i)}var Ye=n(9342);const We={};class Je{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Xe(t,this.resultSelector))}}class Xe extends $e{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(We),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Qe(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===We?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const tn=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var en=n(7471);function nn(...t){return(0,en.J)(1)((0,Ue.of)(...t))}var rn=n(653);function sn(t){return new Tt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,Et.D)(n):(0,rn.c)()).subscribe(e)})}var on=n(2875),an=n(6882);function un(t,e){return"function"==typeof e?n=>n.pipe(un((n,r)=>(0,Et.D)(t(n,r)).pipe((0,xt.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new cn(t))}class cn{constructor(t){this.project=t}call(t,e){return e.subscribe(new ln(t,this.project))}}class ln extends an.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new an.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,an.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const hn=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function dn(t){return e=>0===t?(0,rn.c)():e.lift(new fn(t))}class fn{constructor(t){if(this.total=t,this.total<0)throw new hn}call(t,e){return e.subscribe(new pn(t,this.total))}}class pn extends He.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function mn(...t){const e=t[t.length-1];return(0,ze.K)(e)?(t.pop(),n=>nn(t,n,e)):e=>nn(t,e)}function gn(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new yn(t,e,n))}}class yn{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new vn(t,this.accumulator,this.seed,this.hasSeed))}}class vn extends He.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function bn(t,e){return function(n){return n.lift(new _n(t,e))}}class _n{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new wn(t,this.predicate,this.thisArg))}}class wn extends He.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Sn(t){return function(e){const n=new En(t),r=e.lift(n);return n.caught=r}}class En{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Tn(t,this.selector,this.caught))}}class Tn extends an.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new an.IY(this);this.add(r);const i=(0,an.ft)(n,r);i!==r&&this.add(i)}}}var Cn=n(3982);function xn(t,e){return(0,Cn.zg)(t,e,1)}function In(t){return function(e){return 0===t?(0,rn.c)():e.lift(new An(t))}}class An{constructor(t){if(this.total=t,this.total<0)throw new hn}call(t,e){return e.subscribe(new kn(t,this.total))}}class kn extends He.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function On(t=Rn){return e=>e.lift(new Nn(t))}class Nn{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Dn(t,this.errorFactory))}}class Dn extends He.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(g_){t=g_}this.destination.error(t)}}}function Rn(){return new tn}function Pn(t=null){return e=>e.lift(new Ln(t))}class Ln{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Fn(t,this.defaultValue))}}class Fn extends He.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Mn=n(3392);function Vn(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bn((e,n)=>t(e,n,r)):Mn.y,dn(1),n?Pn(e):On(()=>new tn))}var jn=n(6599),Un=n(1564),qn=n(7570);class Bn{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Gn(t,this.callback))}}class Gn extends He.L{constructor(t,e){super(t),this.add(new qn.w(e))}}class zn{constructor(t,e){this.id=t,this.url=e}}class Hn extends zn{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $n extends zn{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kn extends zn{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zn extends zn{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qn extends zn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yn extends zn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wn extends zn{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jn extends zn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn extends zn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class er{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nr{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rr{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ir{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sr{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class or{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ar="primary";class ur{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function cr(t){return new ur(t)}function lr(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function hr(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function dr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!fr(t[i],e[i]))return!1;return!0}function fr(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function pr(t){return Array.prototype.concat.apply([],t)}function mr(t){return t.length>0?t[t.length-1]:null}function gr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function yr(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,Et.D)(Promise.resolve(t)):(0,Ue.of)(t)}const vr={exact:function t(e,n,r){if(!Ir(e.segments,n.segments))return!1;if(!Er(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:wr},br={exact:function(t,e){return dr(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>fr(t[n],e[n]))},ignored:()=>!0};function _r(t,e,n){return vr[n.paths](t.root,e.root,n.matrixParams)&&br[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function wr(t,e,n){return Sr(t,e,e.segments,n)}function Sr(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!Ir(i,n)&&!e.hasChildren()&&!!Er(i,n,r)}if(t.segments.length===n.length){if(!Ir(t.segments,n))return!1;if(!Er(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!wr(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!Ir(t.segments,i)&&!!Er(t.segments,i,r)&&!!t.children.primary&&Sr(t.children.primary,e,s,r)}}function Er(t,e,n){return e.every((e,r)=>br[n](t[r].parameters,e.parameters))}class Tr{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return Or.serialize(this)}}class Cr{constructor(t,e){this.segments=t,this.children=e,this.parent=null,gr(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nr(this)}}class xr{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=cr(this.parameters)),this._parameterMap}toString(){return Vr(this)}}function Ir(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Ar{}class kr{parse(t){const e=new Gr(t);return new Tr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Dr(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Pr(e)}=${Pr(t)}`).join("&"):`${Pr(e)}=${Pr(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Or=new kr;function Nr(t){return t.segments.map(t=>Vr(t)).join("/")}function Dr(t,e){if(!t.hasChildren())return Nr(t);if(e){const e=t.children.primary?Dr(t.children.primary,!1):"",n=[];return gr(t.children,(t,e)=>{e!==ar&&n.push(`${e}:${Dr(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return gr(t.children,(t,r)=>{r===ar&&(n=n.concat(e(t,r)))}),gr(t.children,(t,r)=>{r!==ar&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===ar?[Dr(t.children.primary,!1)]:[`${n}:${Dr(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Nr(t)}/${e[0]}`:`${Nr(t)}/(${e.join("//")})`}}function Rr(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pr(t){return Rr(t).replace(/%3B/gi,";")}function Lr(t){return Rr(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fr(t){return decodeURIComponent(t)}function Mr(t){return Fr(t.replace(/\+/g,"%20"))}function Vr(t){return`${Lr(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Lr(t)}=${Lr(e[t])}`).join("")}`;var e}const jr=/^[^\/()?;=#]+/;function Ur(t){const e=t.match(jr);return e?e[0]:""}const qr=/^[^=?&#]+/,Br=/^[^?&#]+/;class Gr{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cr([],{}):new Cr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Cr(t,e)),n}parseSegment(){const t=Ur(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new xr(Fr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ur(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Ur(this.remaining);t&&(n=t,this.capture(n))}t[Fr(e)]=Fr(n)}parseQueryParam(t){const e=function(t){const e=t.match(qr);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Br);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Mr(e),i=Mr(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ur(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ar);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Cr([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class zr{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Hr(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Hr(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=$r(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return $r(t,this._root).map(t=>t.value)}}function Hr(t,e){if(t===e.value)return e;for(const n of e.children){const e=Hr(t,n);if(e)return e}return null}function $r(t,e){if(t===e.value)return[e];for(const n of e.children){const r=$r(t,n);if(r.length)return r.unshift(e),r}return[]}class Kr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Zr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Qr extends zr{constructor(t,e){super(t),this.snapshot=e,ei(this,t)}toString(){return this.snapshot.toString()}}function Yr(t,e){const n=function(t,e){const n=new Xr([],{},{},"",{},ar,e,null,t.root,-1,{});return new ti("",new Kr(n,[]))}(t,e),r=new Ge([new xr("",{})]),i=new Ge({}),s=new Ge({}),o=new Ge({}),a=new Ge(""),u=new Wr(r,i,o,a,s,ar,e,n.root);return u.snapshot=n.root,new Qr(new Kr(u,[]),n)}class Wr{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(t=>cr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(t=>cr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Jr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Xr{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ti extends zr{constructor(t,e){super(e),this.url=t,ei(this,e)}toString(){return ni(this._root)}}function ei(t,e){e.value._routerState=t,e.children.forEach(e=>ei(t,e))}function ni(t){const e=t.children.length>0?` { ${t.children.map(ni).join(", ")} } `:"";return`${t.value}${e}`}function ri(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),dr(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),dr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ii(t,e){return dr(t.params,e.params)&&function(t,e){return Ir(t,e)&&t.every((t,n)=>dr(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||ii(t.parent,e.parent))}function si(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return si(t,e,r);return si(t,e)})}(t,e,n);return new Kr(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return oi(e,t),t}}const n=new Wr(new Ge((r=e.value).url),new Ge(r.params),new Ge(r.queryParams),new Ge(r.fragment),new Ge(r.data),r.outlet,r.component,r),i=e.children.map(e=>si(t,e));return new Kr(n,i)}var r}function oi(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)oi(t.children[n],e.children[n])}function ai(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ui(t){return"object"==typeof t&&null!=t&&t.outlets}function ci(t,e,n,r,i){let s={};return r&&gr(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Tr(n.root===t?e:li(n.root,t,e),s,i)}function li(t,e,n){const r={};return gr(t.children,(t,i)=>{r[i]=t===e?n:li(t,e,n)}),new Cr(t.segments,r)}class hi{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ai(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(ui);if(r&&r!==mr(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class di{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function fi(t,e,n){if(t||(t=new Cr([],{})),0===t.segments.length&&t.hasChildren())return pi(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(ui(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!vi(a,u,e))return s;r+=2}else{if(!vi(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Cr(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Cr(t.segments.slice(r.pathIndex),t.children),pi(e,0,i)}return r.match&&0===i.length?new Cr(t.segments,{}):r.match&&!t.hasChildren()?mi(t,e,n):r.match?pi(t,0,i):mi(t,e,n)}function pi(t,e,n){if(0===n.length)return new Cr(t.segments,{});{const r=function(t){return ui(t[0])?t[0].outlets:{[ar]:t}}(n),i={};return gr(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=fi(t.children[r],e,n))}),gr(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Cr(t.segments,i)}}function mi(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(ui(s)){const t=gi(s.outlets);return new Cr(r,t)}if(0===i&&ai(n[0])){r.push(new xr(t.segments[e].path,yi(n[0]))),i++;continue}const o=ui(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ai(a)?(r.push(new xr(o,yi(a))),i+=2):(r.push(new xr(o,{})),i++)}return new Cr(r,{})}function gi(t){const e={};return gr(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=mi(new Cr([],{}),0,t))}),e}function yi(t){const e={};return gr(t,(t,n)=>e[n]=`${t}`),e}function vi(t,e,n){return t==n.path&&dr(e,n.parameters)}class bi{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ri(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Zr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),gr(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Zr(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Zr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new sr(t.value.snapshot))}),t.children.length&&this.forwardEvent(new rr(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(ri(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),_i(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function _i(t){ri(t.value),t.children.forEach(_i)}class wi{constructor(t,e){this.routes=t,this.module=e}}function Si(t){return"function"==typeof t}function Ei(t){return t instanceof Tr}const Ti=Symbol("INITIAL_VALUE");function Ci(){return un(t=>function(...t){let e,n;return(0,ze.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Ct.k)(t[0])&&(t=t[0]),(0,Ye.n)(t,n).lift(new Je(e))}(t.map(t=>t.pipe(dn(1),mn(Ti)))).pipe(gn((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Ti)return t;if(r===Ti&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Ei(r))return r}return t},t)},Ti),bn(t=>t!==Ti),(0,xt.U)(t=>Ei(t)?t:!0===t),dn(1)))}let xi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[_s]},encapsulation:2}),t})();function Ii(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Ai(r,ki(e,r))}}function Ai(t,e){t.children&&Ii(t.children,e)}function ki(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Oi(t){const e=t.children&&t.children.map(Oi),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ar&&(n.component=xi),n}function Ni(t){return t.outlet||ar}function Di(t,e){const n=t.filter(t=>Ni(t)===e);return n.push(...t.filter(t=>Ni(t)!==e)),n}const Ri={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Pi(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Ri):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||hr)(n,t,e);if(!i)return Object.assign({},Ri);const s={};gr(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Li(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Fi(t,e,n)&&Ni(n)!==ar)}(t,n,r)){const i=new Cr(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Ni(s)!==ar){const n=new Cr([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ni(s)]=n}return i}(t,e,r,new Cr(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Fi(t,e,n))}(t,n,r)){const s=new Cr(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(Fi(t,n,a)&&!i[Ni(a)]){const n=new Cr([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[Ni(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Cr(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Fi(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Mi(t,e,n,r){return!!(Ni(t)===r||r!==ar&&Fi(e,n,t))&&("**"===t.path||Pi(e,t,n).matched)}function Vi(t,e,n){return 0===e.length&&!t.children[n]}class ji{constructor(t){this.segmentGroup=t||null}}class Ui{constructor(t){this.urlTree=t}}function qi(t){return new Tt.y(e=>e.error(new ji(t)))}function Bi(t){return new Tt.y(e=>e.error(new Ui(t)))}function Gi(t){return new Tt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class zi{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=Li(this.urlTree.root,[],[],this.config).segmentGroup,e=new Cr(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,ar).pipe((0,xt.U)(t=>this.createUrlTree(Hi(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sn(t=>{if(t instanceof Ui)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof ji)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,ar).pipe((0,xt.U)(e=>this.createUrlTree(Hi(e),t.queryParams,t.fragment))).pipe(Sn(t=>{if(t instanceof ji)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Cr([],{[ar]:t}):t;return new Tr(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,xt.U)(t=>new Cr([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Et.D)(r).pipe(xn(r=>{const i=n.children[r],s=Di(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,xt.U)(t=>({segment:t,outlet:r})))}),gn((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bn((e,n)=>t(e,n,r)):Mn.y,In(1),n?Pn(e):On(()=>new tn))}())}expandSegment(t,e,n,r,i,s){return(0,Et.D)(n).pipe(xn(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(Sn(t=>{if(t instanceof ji)return(0,Ue.of)(null);throw t}))),Vn(t=>!!t),Sn((t,n)=>{if(t instanceof tn||"EmptyError"===t.name){if(Vi(e,r,i))return(0,Ue.of)(new Cr([],{}));throw new ji(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return Mi(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):qi(e):qi(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Bi(i):this.lineralizeSegments(n,i).pipe((0,Cn.zg)(n=>{const i=new Cr(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Pi(e,r,i);if(!o)return qi(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Bi(l):this.lineralizeSegments(r,l).pipe((0,Cn.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Ue.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,xt.U)(t=>(n._loadedConfig=t,new Cr(r,{})))):(0,Ue.of)(new Cr(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=Pi(e,n,r);if(!s)return qi(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,Cn.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=Li(e,o,u,s),l=new Cr(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,xt.U)(t=>new Cr(o,t)));if(0===s.length&&0===c.length)return(0,Ue.of)(new Cr(o,{}));const h=Ni(n)===i;return this.expandSegment(r,l,s,c,h?ar:i,!0).pipe((0,xt.U)(t=>new Cr(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,Ue.of)(new wi(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Ue.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,Cn.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,xt.U)(t=>(e._loadedConfig=t,t))):function(t){return new Tt.y(e=>e.error(lr(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,Ue.of)(new wi([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,Ue.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&Si(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!Si(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return yr(s)});return(0,Ue.of)(i).pipe(Ci(),(0,jn.b)(t=>{if(!Ei(t))return;const e=lr(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,xt.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Ue.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Gi(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Tr(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return gr(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return gr(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Cr(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Hi(t){const e={};for(const n of Object.keys(t.children)){const r=Hi(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Cr(t.segments.concat(e.segments),e.children)}return t}(new Cr(t.segments,e))}class $i{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ki{constructor(t,e){this.component=t,this.route=e}}function Zi(t,e,n){const r=t._root;return Yi(r,e?e._root:null,n,[r.value])}function Qi(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Yi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Zr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ir(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ir(t.url,e.url)||!dr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ii(t,e)||!dr(t.queryParams,e.queryParams);case"paramsChange":default:return!ii(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new $i(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Yi(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ki(a.outlet.component,o))}else o&&Wi(e,a,i),i.canActivateChecks.push(new $i(r)),Yi(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),gr(s,(t,e)=>Wi(t,n.getContext(e),i)),i}function Wi(t,e,n){const r=Zr(t),i=t.value;gr(r,(t,r)=>{Wi(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Ki(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ji{}function Xi(t){return new Tt.y(e=>e.error(t))}class ts{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=Li(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ar);if(null===e)return null;const n=new Xr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ar,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Kr(n,e),i=new ti(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Jr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=Di(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=ns(n);return r.sort((t,e)=>t.value.outlet===ar?-1:e.value.outlet===ar?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Vi(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Mi(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?mr(n).parameters:{};i=new Xr(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ss(t),Ni(t),t.component,t,rs(e),is(e)+n.length,os(t))}else{const r=Pi(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new Xr(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ss(t),Ni(t),t.component,t,rs(e),is(e)+s.length,os(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Li(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Kr(i,t)]}if(0===a.length&&0===c.length)return[new Kr(i,[])];const l=Ni(t)===r,h=this.processSegment(a,u,c,l?ar:r);return null===h?null:[new Kr(i,h)]}}function es(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ns(t){const e=[],n=new Set;for(const r of t){if(!es(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=ns(r.children);e.push(new Kr(r.value,t))}return e.filter(t=>!n.has(t))}function rs(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function is(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ss(t){return t.data||{}}function os(t){return t.resolve||{}}function as(t){return un(e=>{const n=t(e);return n?(0,Et.D)(n).pipe((0,xt.U)(()=>e)):(0,Ue.of)(e)})}class us extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const cs=new r.OlP("ROUTES");class ls{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,xt.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new wi(pr(i.injector.get(cs,void 0,r.XFs.Self|r.XFs.Optional)).map(Oi),i)}),Sn(t=>{throw e._loader$=void 0,t}));return e._loader$=new on.c(n,()=>new qe.xQ).pipe((0,Un.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Et.D)(this.loader.load(t)):yr(t()).pipe((0,Cn.zg)(t=>t instanceof r.YKP?(0,Ue.of)(t):(0,Et.D)(this.compiler.compileModuleAsync(t))))}}class hs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ds,this.attachRef=null}}class ds{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new hs,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class fs{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function ps(t){throw t}function ms(t,e,n){return e.parse("/")}function gs(t,e){return(0,Ue.of)(null)}const ys={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bs=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new qe.xQ,this.errorHandler=ps,this.malformedUriErrorHandler=ms,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:gs,afterPreactivation:gs},this.urlHandlingStrategy=new fs,this.routeReuseStrategy=new us,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Tr(new Cr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ls(o,a,t=>this.triggerEvent(new tr(t)),t=>this.triggerEvent(new er(t))),this.routerState=Yr(this.currentUrlTree,this.rootComponentType),this.transitions=new Ge({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(bn(t=>0!==t.id),(0,xt.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),un(t=>{let n=!1,r=!1;return(0,Ue.of)(t).pipe((0,jn.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),un(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,Ue.of)(t).pipe(un(t=>{const n=this.transitions.getValue();return e.next(new Hn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?rn.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,un(t=>function(t,e,n,r,i){return new zi(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,xt.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,jn.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,Cn.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new ts(t,e,n,r,i,s).recognize();return null===o?Xi(new Ji):(0,Ue.of)(o)}catch(g_){return Xi(g_)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,xt.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jn.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Qn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new Hn(n,this.serializeUrl(r),i,s);e.next(a);const u=Yr(r,this.rootComponentType).snapshot;return(0,Ue.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),rn.E}),as(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,jn.b)(t=>{const e=new Yn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,xt.U)(t=>Object.assign(Object.assign({},t),{guards:Zi(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,Cn.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,Ue.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Et.D)(t).pipe((0,Cn.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Ue.of)(!0);const o=s.map(s=>{const o=Qi(s,e,i);let a;if(function(t){return t&&Si(t.canDeactivate)}(o))a=yr(o.canDeactivate(t,e,n,r));else{if(!Si(o))throw new Error("Invalid CanDeactivate guard");a=yr(o(t,e,n,r))}return a.pipe(Vn())});return(0,Ue.of)(o).pipe(Ci())}(t.component,t.route,n,e,r)),Vn(t=>!0!==t,!0))}(o,r,i,t).pipe((0,Cn.zg)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return(0,Et.D)(e).pipe(xn(e=>nn(function(t,e){return null!==t&&e&&e(new nr(t)),(0,Ue.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new ir(t)),(0,Ue.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>sn(()=>{const i=e.guards.map(i=>{const s=Qi(i,e.node,n);let o;if(function(t){return t&&Si(t.canActivateChild)}(s))o=yr(s.canActivateChild(r,t));else{if(!Si(s))throw new Error("Invalid CanActivateChild guard");o=yr(s(r,t))}return o.pipe(Vn())});return(0,Ue.of)(i).pipe(Ci())}));return(0,Ue.of)(i).pipe(Ci())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ue.of)(!0);const i=r.map(r=>sn(()=>{const i=Qi(r,e,n);let s;if(function(t){return t&&Si(t.canActivate)}(i))s=yr(i.canActivate(e,t));else{if(!Si(i))throw new Error("Invalid CanActivate guard");s=yr(i(e,t))}return s.pipe(Vn())}));return(0,Ue.of)(i).pipe(Ci())}(t,e.route,n))),Vn(t=>!0!==t,!0))}(r,s,t,e):(0,Ue.of)(n)),(0,xt.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,jn.b)(t=>{if(Ei(t.guardsResult)){const e=lr(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Wn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),bn(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),as(t=>{if(t.guards.canActivateChecks.length)return(0,Ue.of)(t).pipe((0,jn.b)(t=>{const e=new Jn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),un(t=>{let e=!1;return(0,Ue.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,Cn.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Ue.of)(t);let s=0;return(0,Et.D)(i).pipe(xn(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,Ue.of)({});const s={};return(0,Et.D)(i).pipe((0,Cn.zg)(i=>function(t,e,n,r){const i=Qi(t,e,r);return yr(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,jn.b)(t=>{s[i]=t}))),In(1),(0,Cn.zg)(()=>Object.keys(s).length===i.length?(0,Ue.of)(s):rn.E))}(t._resolve,t,e,r).pipe((0,xt.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Jr(t,n).resolve),null)))}(t.route,e,n,r)),(0,jn.b)(()=>s++),In(1),(0,Cn.zg)(e=>s===i.length?(0,Ue.of)(t):rn.E))})),(0,jn.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,jn.b)(t=>{const e=new Xn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),as(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,xt.U)(t=>{const e=function(t,e,n){const r=si(t,e._root,n?n._root:void 0);return new Qr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,jn.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,xt.U)(t=>(new bi(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),(0,jn.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},t=>t.lift(new Bn(i))),Sn(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Ei(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Kn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Zn(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Uh){t.reject(Uh)}}var i;return rn.E}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ii(t),this.config=t.map(Oi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return ci(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new hi(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return gr(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new hi(n,e,r)}(n);if(s.toRoot())return ci(e.root,new Cr([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new di(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new di(t,t===e.root,0)}const r=ai(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new di(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?pi(o.segmentGroup,o.index,s.commands):fi(o.segmentGroup,o.index,s.commands);return ci(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Ei(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(g_){e=this.malformedUriErrorHandler(g_,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},ys):!1===e?Object.assign({},vs):e,Ei(t))return _r(this.currentUrlTree,t,n);const r=this.parseUrl(t);return _r(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $n(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let d;return d="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:d,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Kn(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(Ar),r.LFG(ds),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_s=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||ar,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ws(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ds),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ws{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Wr?this.route:t===ds?this.childContexts:this.parent.get(t,e)}}class Ss{}class Es{preload(t,e){return(0,Ue.of)(null)}}let Ts=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ls(e,n,e=>t.triggerEvent(new tr(e)),e=>t.triggerEvent(new er(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(bn(t=>t instanceof $n),xn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,Et.D)(n).pipe((0,en.J)(),(0,xt.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,Ue.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,Cn.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(bs),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(Ss))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Cs=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $n&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof or&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new or(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(bs),r.LFG(z),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const xs=new r.OlP("ROUTER_CONFIGURATION"),Is=new r.OlP("ROUTER_FORROOT_GUARD"),As=[w,{provide:Ar,useClass:kr},{provide:bs,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new bs(null,t,e,n,r,i,s,pr(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Ar,ds,w,r.zs3,r.v3s,r.Sil,cs,xs,[class{},new r.FiY],[class{},new r.FiY]]},ds,{provide:Wr,useFactory:function(t){return t.routerState.root},deps:[bs]},{provide:r.v3s,useClass:r.EAV},Ts,Es,class{preload(t,e){return e().pipe(Sn(()=>(0,Ue.of)(null)))}},{provide:xs,useValue:{enableTracing:!1}}];function ks(){return new r.PXZ("Router",bs)}let Os=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[As,Ps(e),{provide:Is,useFactory:Rs,deps:[[bs,new r.FiY,new r.tp0]]},{provide:xs,useValue:n||{}},{provide:g,useFactory:Ds,deps:[a,[new r.tBr(v),new r.FiY],xs]},{provide:Cs,useFactory:Ns,deps:[bs,z,xs]},{provide:Ss,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Es},{provide:r.PXZ,multi:!0,useFactory:ks},[Ls,{provide:r.ip1,multi:!0,useFactory:Fs,deps:[Ls]},{provide:Vs,useFactory:Ms,deps:[Ls]},{provide:r.tb,multi:!0,useExisting:Vs}]]}}static forChild(e){return{ngModule:t,providers:[Ps(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Is,8),r.LFG(bs,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function Ns(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Cs(t,e,n)}function Ds(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function Rs(t){return"guarded"}function Ps(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:cs,multi:!0,useValue:t}]}let Ls=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new qe.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(bs),r=this.injector.get(xs);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Ue.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(xs),n=this.injector.get(Ts),i=this.injector.get(Cs),s=this.injector.get(bs),o=this.injector.get(r.z2F);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Fs(t){return t.appInitializer.bind(t)}function Ms(t){return t.bootstrapListener.bind(t)}const Vs=new r.OlP("Router Initializer");function js(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}var Us=n(8569);function qs(){return t=>t.lift(new Bs)}class Bs{call(t,e){return e.subscribe(new Gs(t))}}class Gs extends He.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function zs(t,e){return n=>n.lift(new Hs(t,e))}class Hs{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new $s(t,this.compare,this.keySelector))}}class $s extends He.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Ks=n(9098),Zs=n(2346),Qs=n(1858),Ys=n(1062),Ws=n(250),Js=n(308),Xs=function(t,e){return(Xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function to(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var eo,no="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ro=ro||{},io=no||self;function so(){}function oo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ao(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var uo="closure_uid_"+(1e9*Math.random()>>>0),co=0;function lo(t,e,n){return t.call.apply(t.bind,arguments)}function ho(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function fo(t,e,n){return(fo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lo:ho).apply(null,arguments)}function po(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function mo(){return Date.now()}function go(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function yo(){this.j=this.j,this.i=this.i}yo.prototype.j=!1,yo.prototype.ka=function(){!this.j&&(this.j=!0,this.H(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,uo)&&t[uo]||(t[uo]=++co)}(this)},yo.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var vo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},bo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function _o(t){return Array.prototype.concat.apply([],arguments)}function wo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function So(t){return/^[\s\xa0]*$/.test(t)}var Eo,To=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Co(t,e){return-1!=t.indexOf(e)}function xo(t,e){return t<e?-1:t>e?1:0}t:{var Io=io.navigator;if(Io){var Ao=Io.userAgent;if(Ao){Eo=Ao;break t}}Eo=""}function ko(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Oo(t){var e={};for(var n in t)e[n]=t[n];return e}var No="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Do(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<No.length;s++)n=No[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ro(t){return Ro[" "](t),t}Ro[" "]=so;var Po,Lo,Fo=Co(Eo,"Opera"),Mo=Co(Eo,"Trident")||Co(Eo,"MSIE"),Vo=Co(Eo,"Edge"),jo=Vo||Mo,Uo=Co(Eo,"Gecko")&&!(Co(Eo.toLowerCase(),"webkit")&&!Co(Eo,"Edge"))&&!(Co(Eo,"Trident")||Co(Eo,"MSIE"))&&!Co(Eo,"Edge"),qo=Co(Eo.toLowerCase(),"webkit")&&!Co(Eo,"Edge");function Bo(){var t=io.document;return t?t.documentMode:void 0}t:{var Go="",zo=(Lo=Eo,Uo?/rv:([^\);]+)(\)|;)/.exec(Lo):Vo?/Edge\/([\d\.]+)/.exec(Lo):Mo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Lo):qo?/WebKit\/(\S+)/.exec(Lo):Fo?/(?:Version)[ \/]?(\S+)/.exec(Lo):void 0);if(zo&&(Go=zo?zo[1]:""),Mo){var Ho=Bo();if(null!=Ho&&Ho>parseFloat(Go)){Po=String(Ho);break t}}Po=Go}var $o={};function Ko(t){return function(t,e){var n=$o;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=To(String(Po)).split("."),r=To(String(t)).split("."),i=Math.max(n.length,r.length),s=0;0==e&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=xo(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||xo(0==o[2].length,0==a[2].length)||xo(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e})}var Zo=io.document&&Mo&&(Bo()||parseInt(Po,10))||void 0,Qo=!Mo||9<=Number(Zo),Yo=Mo&&!Ko("9"),Wo=function(){if(!io.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{io.addEventListener("test",so,e),io.removeEventListener("test",so,e)}catch(n){}return t}();function Jo(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Xo(t,e){if(Jo.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Uo){t:{try{Ro(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ta[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Jo.prototype.b=function(){this.defaultPrevented=!0},go(Xo,Jo);var ta={2:"touch",3:"pen",4:"mouse"};Xo.prototype.b=function(){Xo.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Yo)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ea="closure_listenable_"+(1e6*Math.random()|0),na=0;function ra(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++na,this.Y=this.Z=!1}function ia(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function sa(t){this.src=t,this.a={},this.b=0}function oa(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],s=vo(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ia(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function aa(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.da==r)return i}return-1}sa.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.b++);var o=aa(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):((e=new ra(e,this.src,s,!!r,i)).Z=n,t.push(e)),e};var ua="closure_lm_"+(1e6*Math.random()|0),ca={};function la(t,e,n,r,i){if(r&&r.once)return da(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)la(t,e[s],n,r,i);return null}return n=_a(n),t&&t[ea]?t.wa(e,n,ao(r)?!!r.capture:!!r,i):ha(t,e,n,!1,r,i)}function ha(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ao(i)?!!i.capture:!!i;if(o&&!Qo)return null;var a=va(t);if(a||(t[ua]=a=new sa(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=ya,e=Qo?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Wo||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ma(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function da(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)da(t,e[s],n,r,i);return null}return n=_a(n),t&&t[ea]?t.xa(e,n,ao(r)?!!r.capture:!!r,i):ha(t,e,n,!0,r,i)}function fa(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)fa(t,e[s],n,r,i);else r=ao(r)?!!r.capture:!!r,n=_a(n),t&&t[ea]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=aa(s=t.a[e],n,r,i))&&(ia(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.a[e],t.b--))):t&&(t=va(t))&&(e=t.a[e.toString()],t=-1,e&&(t=aa(e,n,r,i)),(n=-1<t?e[t]:null)&&pa(n))}function pa(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ea])oa(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ma(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=va(e))?(oa(n,t),0==n.b&&(n.src=null,e[ua]=null)):ia(t)}}}function ma(t){return t in ca?ca[t]:ca[t]="on"+t}function ga(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&pa(t),n.call(r,e)}function ya(t,e){if(t.Y)return!0;if(!Qo){if(!e)t:{e=["window","event"];for(var n=io,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ga(t,e=new Xo(e,this))}return ga(t,new Xo(e,this))}function va(t){return(t=t[ua])instanceof sa?t:null}var ba="__closure_events_fn_"+(1e9*Math.random()>>>0);function _a(t){return"function"==typeof t?t:(t[ba]||(t[ba]=function(e){return t.handleEvent(e)}),t[ba])}function wa(){yo.call(this),this.c=new sa(this),this.J=this,this.D=null}function Sa(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Jo(e,t);else if(e instanceof Jo)e.target=e.target||t;else{var i=e;Do(e=new Jo(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=Ea(o,r,!0,e)&&i}if(i=Ea(o=e.a=t,r,!0,e)&&i,i=Ea(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Ea(o=e.a=n[s],r,!1,e)&&i}function Ea(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,u=o.da||o.src;o.Z&&oa(t.c,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}go(wa,yo),wa.prototype[ea]=!0,(eo=wa.prototype).addEventListener=function(t,e,n,r){la(this,t,e,n,r)},eo.removeEventListener=function(t,e,n,r){fa(this,t,e,n,r)},eo.H=function(){if(wa.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ia(n[r]);delete e.a[t],e.b--}}this.D=null},eo.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},eo.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ta=io.JSON.stringify;function Ca(){this.b=this.a=null}var xa,Ia=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ka},function(t){t.reset()});function Aa(){var t=Ra,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ka(){this.next=this.b=this.a=null}function Oa(t){io.setTimeout(function(){throw t},0)}function Na(t,e){xa||function(){var t=io.Promise.resolve(void 0);xa=function(){t.then(Pa)}}(),Da||(xa(),Da=!0),Ra.add(t,e)}Ca.prototype.add=function(t,e){var n=Ia.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ka.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ka.prototype.reset=function(){this.next=this.b=this.a=null};var Da=!1,Ra=new Ca;function Pa(){for(var t;t=Aa();){try{t.a.call(t.b)}catch(n){Oa(n)}var e=Ia;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Da=!1}function La(t,e){wa.call(this),this.b=t||1,this.a=e||io,this.f=fo(this.eb,this),this.g=mo()}function Fa(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ma(t,e,n){if("function"==typeof t)n&&(t=fo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=fo(t.handleEvent,t)}return 2147483647<Number(e)?-1:io.setTimeout(t,e||0)}function Va(t){t.a=Ma(function(){t.a=null,t.c&&(t.c=!1,Va(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}go(La,wa),(eo=La.prototype).aa=!1,eo.M=null,eo.eb=function(){if(this.aa){var t=mo()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Sa(this,"tick"),this.aa&&(Fa(this),this.start()))}},eo.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=mo())},eo.H=function(){La.X.H.call(this),Fa(this),delete this.a};var ja=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Xs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Va(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(io.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(yo);function Ua(t){yo.call(this),this.b=t,this.a={}}go(Ua,yo);var qa=[];function Ba(t,e,n,r){Array.isArray(n)||(n&&(qa[0]=n.toString()),n=qa);for(var i=0;i<n.length;i++){var s=la(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Ga(t){ko(t.a,function(t,e){this.a.hasOwnProperty(e)&&pa(t)},t),t.a={}}function za(){this.a=!0}function Ha(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ta(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Ua.prototype.H=function(){Ua.X.H.call(this),Ga(this)},Ua.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},za.prototype.info=function(){};var $a={},Ka=null;function Za(){return Ka=Ka||new wa}function Qa(t){Jo.call(this,$a.Ga,t)}function Ya(t){var e=Za();Sa(e,new Qa(e,t))}function Wa(t,e){Jo.call(this,$a.STAT_EVENT,t),this.stat=e}function Ja(t){var e=Za();Sa(e,new Wa(e,t))}function Xa(t){Jo.call(this,$a.Ha,t)}function tu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return io.setTimeout(function(){t()},e)}$a.Ga="serverreachability",go(Qa,Jo),$a.STAT_EVENT="statevent",go(Wa,Jo),$a.Ha="timingevent",go(Xa,Jo);var eu={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},nu={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function ru(){}function iu(){}ru.prototype.b=null;var su,ou={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function au(){Jo.call(this,"d")}function uu(){Jo.call(this,"c")}function cu(){}function lu(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ua(this),this.P=hu,this.R=new La(t=jo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}go(au,Jo),go(uu,Jo),go(cu,ru),cu.prototype.a=function(){return new XMLHttpRequest},cu.prototype.c=function(){return{}},su=new cu;var hu=45e3,du={},fu={};function pu(t,e,n){t.G=1,t.i=Fu(Ou(e)),t.j=n,t.I=!0,mu(t,null)}function mu(t,e){t.u=mo(),vu(t),t.l=Ou(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Qu(n.b,"t",r),t.D=0,t.a=Gc(t.g,t.g.C?e:null),0<t.O&&(t.F=new ja(fo(t.Da,t,t.a),t.O)),Ba(t.J,t.a,"readystatechange",t.bb),e=t.B?Oo(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ya(1),function(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.c,t.m,t.l,t.f,t.S,t.j)}function gu(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=yu(t,n);if(i==fu){4==e&&(t.h=4,Ja(14),r=!1),Ha(t.c,t.f,null,"[Incomplete Response]");break}if(i==du){t.h=4,Ja(15),Ha(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ha(t.c,t.f,i,null),Eu(t,i)}4==e&&0==n.length&&(t.h=1,Ja(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lc(e),e.F=!0,Ja(11))):(Ha(t.c,t.f,n,"[Invalid Chunked Response]"),Su(t),wu(t))}function yu(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?fu:(n=Number(e.substring(n,r)),isNaN(n)?du:(r+=1)+n>e.length?fu:(e=e.substr(r,n),t.D=r+n,e))}function vu(t){t.T=mo()+t.P,bu(t,t.P)}function bu(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=tu(fo(t.$a,t),e)}function _u(t){t.o&&(io.clearTimeout(t.o),t.o=null)}function wu(t){0==t.g.v||t.A||Vc(t.g,t)}function Su(t){_u(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,Fa(t.R),Ga(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function Eu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||nc(n.b,t)))if(n.I=t.N,!t.C&&nc(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch($b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Mc(n),xc(n)}Pc(n),Ja(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=tu(fo(n.Xa,n),6e3));if(1>=ec(n.b)&&n.fa){try{n.fa()}catch($b){}n.fa=void 0}}else Uc(n,11)}else if((t.C||n.a==t)&&Mc(n),!So(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var s=i[3];null!=s&&(n.ia=s,n.c.info("VER="+n.ia));var o=i[4];null!=o&&(n.qa=o,n.c.info("SVER="+n.qa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Co(l,"spdy")||Co(l,"quic")||Co(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(rc(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.oa=d,Lu(u.B,u.A,d))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=mo()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).ma=Bc(u,u.C?u.ha:null,u.ga),f.C){ic(u.b,f);var p=f,m=u.D;m&&p.setTimeout(m),p.o&&(_u(p),vu(p)),u.a=f}else Rc(u);0<n.g.length&&kc(n)}else"stop"!=i[0]&&"close"!=i[0]||Uc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Uc(n,7):Cc(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);Ya(4)}catch($b){}}function Tu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(oo(t)||"string"==typeof t)bo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(oo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(oo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Cu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Iu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Iu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Iu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(eo=lu.prototype).setTimeout=function(t){this.P=t},eo.bb=function(t){t=t.target;var e=this.F;e&&3==wc(t)?e.f():this.Da(t)},eo.Da=function(t){try{if(t==this.a)t:{var e=wc(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!jo&&!this.a.$())){this.A||4!=e||7==n||Ya(8==n||0>=r?3:2),_u(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!So(o)){var u=o;break e}}u=null}if(!u){this.b=!1,this.h=3,Ja(12),Su(this),wu(this);break t}Ha(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Eu(this,u)}this.I?(gu(this,e,s),jo&&this.b&&3==e&&(Ba(this.J,this.R,"tick",this.ab),this.R.start())):(Ha(this.c,this.f,s,null),Eu(this,s)),4==e&&Su(this),this.b&&!this.A&&(4==e?Vc(this.g,this):(this.b=!1,vu(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.h=3,Ja(12)):(this.h=0,Ja(13)),Su(this),wu(this)}}}catch(c){}},eo.ab=function(){if(this.a){var t=wc(this.a),e=this.a.$();this.D<e.length&&(_u(this),gu(this,t,e),this.b&&4!=t&&vu(this))}},eo.cancel=function(){this.A=!0,Su(this)},eo.$a=function(){this.o=null;var t=mo();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.G&&(Ya(3),Ja(17)),Su(this),this.h=2,wu(this)):bu(this,this.T-t)},(eo=Cu.prototype).K=function(){xu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},eo.L=function(){return xu(this),this.a.concat()},eo.get=function(t,e){return Iu(this.b,t)?this.b[t]:e},eo.set=function(t,e){Iu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},eo.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Au=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ku(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ku){this.a=void 0!==e?e:t.a,Nu(this,t.f),this.j=t.j,Du(this,t.c),Ru(this,t.h),this.g=t.g,e=t.b;var n=new Hu;n.c=e.c,e.a&&(n.a=new Cu(e.a),n.b=e.b),Pu(this,n),this.i=t.i}else t&&(n=String(t).match(Au))?(this.a=!!e,Nu(this,n[1]||"",!0),this.j=Mu(n[2]||""),Du(this,n[3]||"",!0),Ru(this,n[4]),this.g=Mu(n[5]||"",!0),Pu(this,n[6]||"",!0),this.i=Mu(n[7]||"")):(this.a=!!e,this.b=new Hu(null,this.a))}function Ou(t){return new ku(t)}function Nu(t,e,n){t.f=n?Mu(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Du(t,e,n){t.c=n?Mu(e,!0):e}function Ru(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Pu(t,e,n){e instanceof Hu?(t.b=e,function(t,e){e&&!t.f&&($u(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ku(this,e),Qu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Vu(e,Gu)),t.b=new Hu(e,t.a))}function Lu(t,e,n){t.b.set(e,n)}function Fu(t){return Lu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^mo()).toString(36)),t}function Mu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ju),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ju(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ku.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Vu(e,Uu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Vu(e,Uu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vu(n,"/"==n.charAt(0)?Bu:qu,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Vu(n,zu)),t.join("")};var Uu=/[#\/\?@]/g,qu=/[#\?:]/g,Bu=/[#\?]/g,Gu=/[#\?@]/g,zu=/#/g;function Hu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $u(t){t.a||(t.a=new Cu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ku(t,e){$u(t),e=Yu(t,e),Iu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Iu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xu(t)))}function Zu(t,e){return $u(t),e=Yu(t,e),Iu(t.a.b,e)}function Qu(t,e,n){Ku(t,e),0<n.length&&(t.c=null,t.a.set(Yu(t,e),wo(n)),t.b+=n.length)}function Yu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(eo=Hu.prototype).add=function(t,e){$u(this),this.c=null,t=Yu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},eo.forEach=function(t,e){$u(this),this.a.forEach(function(n,r){bo(n,function(n){t.call(e,n,r,this)},this)},this)},eo.L=function(){$u(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},eo.K=function(t){$u(this);var e=[];if("string"==typeof t)Zu(this,t)&&(e=_o(e,this.a.get(Yu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=_o(e,t[n])}return e},eo.set=function(t,e){return $u(this),this.c=null,Zu(this,t=Yu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},eo.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},eo.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};var Wu=function(){return function(t,e){this.b=t,this.a=e}}();function Ju(t){this.g=t||Xu,t=io.PerformanceNavigationTiming?0<(t=io.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(io.ja&&io.ja.za&&io.ja.za()&&io.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Xu=10;function tc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ec(t){return t.b?1:t.a?t.a.size:0}function nc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function rc(t,e){t.a?t.a.add(e):t.b=e}function ic(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function sc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=to(t.a.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.s)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return wo(t.c)}function oc(){}function ac(){this.a=new oc}function uc(t,e,n){var r=n||"";try{Tu(t,function(t,n){var i=t;ao(t)&&(i=Ta(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(g_){throw e.push(r+"type="+encodeURIComponent("_badmap")),g_}}function cc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}Ju.prototype.cancel=function(){var t,e;if(this.c=sc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=to(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},oc.prototype.stringify=function(t){return io.JSON.stringify(t,void 0)},oc.prototype.parse=function(t){return io.JSON.parse(t,void 0)};var lc=io.JSON.parse;function hc(t){wa.call(this),this.headers=new Cu,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=dc,this.F=this.G=!1}go(hc,wa);var dc="",fc=/^https?$/i,pc=["POST","PUT"];function mc(t){return"content-type"==t.toLowerCase()}function gc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,yc(t),bc(t)}function yc(t){t.A||(t.A=!0,Sa(t,"complete"),Sa(t,"error"))}function vc(t){if(t.b&&void 0!==ro&&(!t.u[1]||4!=wc(t)||2!=t.W()))if(t.m&&4==wc(t))Ma(t.Aa,0,t);else if(Sa(t,"readystatechange"),4==wc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.C).match(Au)[1]||null;if(!s&&io.self&&io.self.location){var o=io.self.location.protocol;s=o.substr(0,o.length-1)}i=!fc.test(s?s.toLowerCase():"")}e=i}if(e)Sa(t,"complete"),Sa(t,"success");else{t.h=6;try{var a=2<wc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",yc(t)}}finally{bc(t)}}}function bc(t,e){if(t.a){_c(t);var n=t.a,r=t.u[0]?so:null;t.a=null,t.u=null,e||Sa(t,"ready");try{n.onreadystatechange=r}catch(g_){}}}function _c(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(io.clearTimeout(t.o),t.o=null)}function wc(t){return t.a?t.a.readyState:0}function Sc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ko(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Lu(t,e,n))}function Ec(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Tc(t){this.qa=0,this.g=[],this.c=new za,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=Ec("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=Ec("baseRetryDelayMs",5e3,t),this.Sa=Ec("retryDelaySeedMs",1e4,t),this.Na=Ec("forwardChannelMaxRetries",2,t),this.na=Ec("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ju(t&&t.concurrentRequestLimit),this.la=new ac,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Cc(t){if(Ic(t),3==t.v){var e=t.R++,n=Ou(t.B);Lu(n,"SID",t.J),Lu(n,"RID",e),Lu(n,"TYPE","terminate"),Nc(t,n),(e=new lu(t,t.c,e,void 0)).G=2,e.i=Fu(Ou(n)),n=!1,io.navigator&&io.navigator.sendBeacon&&(n=io.navigator.sendBeacon(e.i.toString(),"")),!n&&io.Image&&((new Image).src=e.i,n=!0),n||(e.a=Gc(e.g,null),e.a.ba(e.i)),e.u=mo(),vu(e)}qc(t)}function xc(t){t.a&&(Lc(t),t.a.cancel(),t.a=null)}function Ic(t){xc(t),t.j&&(io.clearTimeout(t.j),t.j=null),Mc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&io.clearTimeout(t.h),t.h=null)}function Ac(t,e){t.g.push(new Wu(t.Pa++,e)),3==t.v&&kc(t)}function kc(t){tc(t.b)||t.h||(t.h=!0,Na(t.Ca,t),t.u=0)}function Oc(t,e){var n;n=e?e.f:t.R++;var r=Ou(t.B);Lu(r,"SID",t.J),Lu(r,"RID",n),Lu(r,"AID",t.P),Nc(t,r),t.i&&t.l&&Sc(r,t.i,t.l),n=new lu(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Dc(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),rc(t.b,n),pu(n,r,e)}function Nc(t,e){t.f&&Tu({},function(t,n){Lu(e,n,t)})}function Dc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?fo(t.f.Ka,t.f,t):null;t:for(var i=t.g,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].b)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=s))s=Math.max(0,i[u].b-100),a=!1;else try{uc(l,o,"req"+c+"_")}catch(xl){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Rc(t){t.a||t.j||(t.T=1,Na(t.Ba,t),t.o=0)}function Pc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=tu(fo(t.Ba,t),jc(t,t.o)),t.o++,0))}function Lc(t){null!=t.s&&(io.clearTimeout(t.s),t.s=null)}function Fc(t){t.a=new lu(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ou(t.ma);Lu(e,"RID","rpc"),Lu(e,"SID",t.J),Lu(e,"CI",t.G?"0":"1"),Lu(e,"AID",t.P),Nc(t,e),Lu(e,"TYPE","xmlhttp"),t.i&&t.l&&Sc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=Fu(Ou(e)),n.j=null,n.I=!0,mu(n,t)}function Mc(t){null!=t.m&&(io.clearTimeout(t.m),t.m=null)}function Vc(t,e){var n=null;if(t.a==e){Mc(t),Lc(t),t.a=null;var r=2}else{if(!nc(t.b,e))return;n=e.s,ic(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=mo()-e.u;var i=t.u;Sa(r=Za(),new Xa(r,n,e,i)),kc(t)}else Rc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ec(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=tu(fo(t.Ca,t,e),jc(t,t.u)),t.u++,0)))}(t,e)||2==r&&Pc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Uc(t,5);break;case 4:Uc(t,10);break;case 3:Uc(t,6);break;default:Uc(t,2)}}function jc(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function Uc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=fo(t.cb,t);n||(n=new ku("//www.google.com/images/cleardot.gif"),io.location&&"http"==io.location.protocol||Nu(n,"https"),Fu(n)),function(t,e){var n=new za;if(io.Image){var r=new Image;r.onload=po(cc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=po(cc,n,r,"TestLoadImage: error",!1,e),r.onabort=po(cc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=po(cc,n,r,"TestLoadImage: timeout",!1,e),io.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ja(2);t.v=0,t.f&&t.f.sa(e),qc(t),Ic(t)}function qc(t){t.v=0,t.I=-1,t.f&&(0==sc(t.b).length&&0==t.g.length||(t.b.c.length=0,wo(t.g),t.g.length=0),t.f.ra())}function Bc(t,e,n){var r=function(t){return t instanceof ku?Ou(t):new ku(t,void 0)}(n);if(""!=r.c)e&&Du(r,e+"."+r.c),Ru(r,r.h);else{var i=io.location;r=function(t,e,n,r){var i=new ku(null,void 0);return t&&Nu(i,t),e&&Du(i,e),n&&Ru(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ko(t.V,function(t,e){Lu(r,e,t)}),n=t.oa,(e=t.A)&&n&&Lu(r,e,n),Lu(r,"VER",t.ia),Nc(t,r),r}function Gc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hc(t.Oa)).G=t.C,e}function zc(){}function Hc(){if(Mo&&!(10<=Number(Zo)))throw Error("Environmental error: no available transport.")}function $c(t,e){wa.call(this),this.a=new Tc(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!So(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!So(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Qc(this)}function Kc(t){au.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Zc(){uu.call(this),this.status=1}function Qc(t){this.a=t}function Yc(t){this.f=t}function Wc(t){wa.call(this),this.u=t,this.h=void 0,this.readyState=Jc,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(eo=hc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():su.a(),this.u=function(t){return t.b||(t.b=t.c())}(this.l?this.l:su),this.a.onreadystatechange=fo(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(s){return void gc(this,s)}t=n||"";var i=new Cu(this.headers);r&&Tu(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=mc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=io.FormData&&t instanceof io.FormData,!(0<=vo(pc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{_c(this),0<this.s&&((this.F=function(t){return Mo&&Ko(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=fo(this.ya,this)):this.o=Ma(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(s){gc(this,s)}},eo.ya=function(){void 0!==ro&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,Sa(this,"timeout"),this.abort(8))},eo.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Sa(this,"complete"),Sa(this,"abort"),bc(this))},eo.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),bc(this,!0)),hc.X.H.call(this)},eo.Aa=function(){this.j||(this.B||this.m||this.g?vc(this):this.Za())},eo.Za=function(){vc(this)},eo.W=function(){try{return 2<wc(this)?this.a.status:-1}catch(Lo){return-1}},eo.$=function(){try{return this.a?this.a.responseText:""}catch(Lo){return""}},eo.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),lc(e)}},eo.va=function(){return this.h},eo.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(eo=Tc.prototype).ia=8,eo.v=1,eo.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new lu(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Do(r=Oo(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var s=this.g[i];if(void 0===(s="__data__"in s.a&&"string"==typeof(s=s.a.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Dc(this,n,e),Lu(i=Ou(this.B),"RID",t),Lu(i,"CVER",22),this.A&&Lu(i,"X-HTTP-Session-Id",this.A),Nc(this,i),this.i&&r&&Sc(i,this.i,r),rc(this.b,n),this.Ja&&Lu(i,"TYPE","init"),this.ea?(Lu(i,"$req",e),Lu(i,"SID","null"),n.U=!0,pu(n,i,null)):pu(n,i,e),this.v=2}}else 3==this.v&&(t?Oc(this,t):0==this.g.length||tc(this.b)||Oc(this))},eo.Ba=function(){if(this.j=null,Fc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=tu(fo(this.Ya,this),t)}},eo.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,Ja(10),xc(this),Fc(this))},eo.Xa=function(){null!=this.m&&(this.m=null,xc(this),Pc(this),Ja(19))},eo.cb=function(t){t?(this.c.info("Successfully pinged google.com"),Ja(2)):(this.c.info("Failed to ping google.com"),Ja(1))},(eo=zc.prototype).ua=function(){},eo.ta=function(){},eo.sa=function(){},eo.ra=function(){},eo.Ka=function(){},Hc.prototype.a=function(t,e){return new $c(t,e)},go($c,wa),$c.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;Ja(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=Bc(t,null,t.ga),kc(t)},$c.prototype.close=function(){Cc(this.a)},$c.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,Ac(this.a,e)}else this.m?((e={}).__data__=Ta(t),Ac(this.a,e)):Ac(this.a,t)},$c.prototype.H=function(){this.a.f=null,delete this.f,Cc(this.a),delete this.a,$c.X.H.call(this)},go(Kc,au),go(Zc,uu),go(Qc,zc),Qc.prototype.ua=function(){Sa(this.a,"a")},Qc.prototype.ta=function(t){Sa(this.a,new Kc(t))},Qc.prototype.sa=function(t){Sa(this.a,new Zc(t))},Qc.prototype.ra=function(){Sa(this.a,"b")},go(Yc,ru),Yc.prototype.a=function(){return new Wc(this.f)},Yc.prototype.c=function(t){return function(){return t}}({}),go(Wc,wa);var Jc=0;function Xc(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function tl(t){t.readyState=4,t.g=null,t.f=null,t.m=null,el(t)}function el(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(eo=Wc.prototype).open=function(t,e){if(this.readyState!=Jc)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,el(this)},eo.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},eo.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,tl(this)),this.readyState=Jc},eo.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,el(this)),this.a&&(this.readyState=3,el(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==io.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,Xc(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},eo.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?tl(this):el(this),3==this.readyState&&Xc(this)}},eo.Va=function(t){this.a&&(this.responseText=t,tl(this))},eo.Ua=function(){this.a&&tl(this)},eo.ca=function(){this.a&&tl(this)},eo.setRequestHeader=function(t,e){this.l.append(t,e)},eo.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},eo.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Wc.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),Hc.prototype.createWebChannel=Hc.prototype.a,$c.prototype.send=$c.prototype.l,$c.prototype.open=$c.prototype.h,$c.prototype.close=$c.prototype.close,eu.NO_ERROR=0,eu.TIMEOUT=8,eu.HTTP_ERROR=6,nu.COMPLETE="complete",iu.EventType=ou,ou.OPEN="a",ou.CLOSE="b",ou.ERROR="c",ou.MESSAGE="d",wa.prototype.listen=wa.prototype.wa,hc.prototype.listenOnce=hc.prototype.xa,hc.prototype.getLastError=hc.prototype.Ra,hc.prototype.getLastErrorCode=hc.prototype.va,hc.prototype.getStatus=hc.prototype.W,hc.prototype.getResponseJson=hc.prototype.Qa,hc.prototype.getResponseText=hc.prototype.$,hc.prototype.send=hc.prototype.ba;var nl=eu,rl=nu,il=$a,sl=Yc,ol=iu,al=hc,ul=n(4762),cl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();cl.o=-1;var ll={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,ul.ZT)(e,t),e}(Error),dl=new Js.Yd("@firebase/firestore");function fl(){return dl.logLevel}function pl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dl.logLevel<=Js.in.DEBUG){var r=e.map(yl);dl.debug.apply(dl,(0,ul.ev)(["Firestore (8.6.8): "+t],r))}}function ml(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dl.logLevel<=Js.in.ERROR){var r=e.map(yl);dl.error.apply(dl,(0,ul.ev)(["Firestore (8.6.8): "+t],r))}}function gl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dl.logLevel<=Js.in.WARN){var r=e.map(yl);dl.warn.apply(dl,(0,ul.ev)(["Firestore (8.6.8): "+t],r))}}function yl(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(g_){return t}}function vl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.8) INTERNAL ASSERTION FAILED: "+t;throw ml(e),new Error(e)}function bl(t,e){t||vl()}function _l(t,e){return t}function wl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Sl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=wl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function El(t,e){return t<e?-1:t>e?1:0}function Tl(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Cl(t){return t+"\0"}var xl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new hl(ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new hl(ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new hl(ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new hl(ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?El(this.nanoseconds,t.nanoseconds):El(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Il=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new xl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Al(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function kl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ol(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Nl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&vl(),void 0===n?n=t.length-e:n>t.length-e&&vl(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ul.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new hl(ll.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Nl),Rl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ul.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Rl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new hl(ll.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new hl(ll.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new hl(ll.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new hl(ll.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Nl),Ll=function(){function t(t){this.fields=t,t.sort(Pl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Tl(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Fl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return El(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Fl.EMPTY_BYTE_STRING=new Fl("");var Ml=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vl(t){if(bl(!!t),"string"==typeof t){var e=0,n=Ml.exec(t);if(bl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:jl(t.seconds),nanos:jl(t.nanos)}}function jl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ul(t){return"string"==typeof t?Fl.fromBase64String(t):Fl.fromUint8Array(t)}function ql(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bl(t){var e=t.mapValue.fields.__previous_value__;return ql(e)?Bl(e):e}function Gl(t){var e=Vl(t.mapValue.fields.__local_write_time__.timestampValue);return new xl(e.seconds,e.nanos)}function zl(t){return null==t}function Hl(t){return 0===t&&1/t==-1/0}function $l(t){return"number"==typeof t&&Number.isInteger(t)&&!Hl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Kl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Dl.fromString(e))},t.fromName=function(e){return new t(Dl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Dl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Dl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Dl(e.slice()))},t}();function Zl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ql(t)?4:10:vl()}function Ql(t,e){var n=Zl(t);if(n!==Zl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gl(t).isEqual(Gl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Vl(t.timestampValue),r=Vl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ul(t.bytesValue).isEqual(Ul(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return jl(t.geoPointValue.latitude)===jl(e.geoPointValue.latitude)&&jl(t.geoPointValue.longitude)===jl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return jl(t.integerValue)===jl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=jl(t.doubleValue),r=jl(e.doubleValue);return n===r?Hl(n)===Hl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Tl(t.arrayValue.values||[],e.arrayValue.values||[],Ql);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Al(n)!==Al(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ql(n[i],r[i])))return!1;return!0}(t,e);default:return vl()}}function Yl(t,e){return void 0!==(t.values||[]).find(function(t){return Ql(t,e)})}function Wl(t,e){var n=Zl(t),r=Zl(e);if(n!==r)return El(n,r);switch(n){case 0:return 0;case 1:return El(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=jl(t.integerValue||t.doubleValue),r=jl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Jl(t.timestampValue,e.timestampValue);case 4:return Jl(Gl(t),Gl(e));case 5:return El(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ul(t),r=Ul(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=El(n[i],r[i]);if(0!==s)return s}return El(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=El(jl(t.latitude),jl(e.latitude));return 0!==n?n:El(jl(t.longitude),jl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=Wl(n[i],r[i]);if(s)return s}return El(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=El(r[o],s[o]);if(0!==a)return a;var u=Wl(n[r[o]],i[s[o]]);if(0!==u)return u}return El(r.length,s.length)}(t.mapValue,e.mapValue);default:throw vl()}}function Jl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return El(t,e);var n=Vl(t),r=Vl(e),i=El(n.seconds,r.seconds);return 0!==i?i:El(n.nanos,r.nanos)}function Xl(t){return th(t)}function th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Vl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ul(t.bytesValue).toBase64():"referenceValue"in t?Kl.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=th(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+th(t.fields[s])}return e+"}"}(t.mapValue):vl();var e}function eh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function nh(t){return!!t&&"integerValue"in t}function rh(t){return!!t&&"arrayValue"in t}function ih(t){return!!t&&"nullValue"in t}function sh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oh(t){return!!t&&"mapValue"in t}function ah(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},Vl(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return kl(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=ah(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ah(t.arrayValue.values[r]);return n}return Object.assign({},t)}var uh=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!oh(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ah(e)},t.prototype.setAll=function(t){var e=this,n=Pl.emptyPath(),r={},i=[];t.forEach(function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=s.popLast()}t?r[s.lastSegment()]=ah(t):i.push(s.lastSegment())});var s=this.getFieldsMap(n);this.applyChanges(s,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());oh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Ql(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];oh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){kl(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(ah(this.value))},t}();function ch(t){var e=[];return kl(t.fields,function(t,n){var r=new Pl([t]);if(oh(n)){var i=ch(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new Ll(e)}var lh=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Il.min(),uh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,uh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,uh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=uh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=uh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),hh=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function dh(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new hh(t,e,n,r,i,s,o)}function fh(t){var e=_l(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Xl(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),zl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=xh(e.startAt)),e.endAt&&(n+="|ub:",n+=xh(e.endAt)),e.h=n}return e.h}function ph(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ah(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!Ql(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Oh(t.startAt,e.startAt)&&Oh(t.endAt,e.endAt)}function mh(t){return Kl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var gh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,ul.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new yh(t,n,r):"array-contains"===n?new wh(t,r):"in"===n?new Sh(t,r):"not-in"===n?new Eh(t,r):"array-contains-any"===n?new Th(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new vh(t,n):new bh(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Wl(e,this.value)):null!==e&&Zl(this.value)===Zl(e)&&this.m(Wl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return vl()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),yh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Kl.fromName(r.referenceValue),i}return(0,ul.ZT)(e,t),e.prototype.matches=function(t){var e=Kl.comparator(t.key,this.key);return this.m(e)},e}(gh),vh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=_h(0,n),r}return(0,ul.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(gh),bh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=_h(0,n),r}return(0,ul.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(gh);function _h(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Kl.fromName(t.referenceValue)})}var wh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,ul.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return rh(e)&&Yl(e.arrayValue,this.value)},e}(gh),Sh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,ul.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Yl(this.value.arrayValue,e)},e}(gh),Eh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,ul.ZT)(e,t),e.prototype.matches=function(t){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Yl(this.value.arrayValue,e)},e}(gh),Th=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,ul.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!rh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Yl(e.value.arrayValue,t)})},e}(gh),Ch=function(t,e){this.position=t,this.before=e};function xh(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Xl(t)}).join(",")}var Ih=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ah(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function kh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Kl.comparator(Kl.fromName(o.referenceValue),n.key):Wl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Oh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ql(t.position[n],e.position[n]))return!1;return!0}var Nh=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function Dh(t,e,n,r,i,s,o,a){return new Nh(t,e,n,r,i,s,o,a)}function Rh(t){return new Nh(t)}function Ph(t){return!zl(t.limit)&&"F"===t.limitType}function Lh(t){return!zl(t.limit)&&"L"===t.limitType}function Fh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Mh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Vh(t){return null!==t.collectionGroup}function jh(t){var e=_l(t);if(null===e.p){e.p=[];var n=Mh(e),r=Fh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Ih(n)),e.p.push(new Ih(Pl.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ih(Pl.keyField(),u))}}}return e.p}function Uh(t){var e=_l(t);if(!e.T)if("F"===e.limitType)e.T=dh(e.path,e.collectionGroup,jh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=jh(e);r<i.length;r++){var s=i[r];n.push(new Ih(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new Ch(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ch(e.startAt.position,!e.startAt.before):null;e.T=dh(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function qh(t,e,n){return new Nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bh(t,e){return ph(Uh(t),Uh(e))&&t.limitType===e.limitType}function Gh(t){return fh(Uh(t))+"|lt:"+t.limitType}function zh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Xl(e.value);var e}).join(", ")+"]"),zl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+xh(t.startAt)),t.endAt&&(e+=", endAt: "+xh(t.endAt)),"Target("+e+")"}(Uh(t))+"; limitType="+t.limitType+")"}function Hh(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Kl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!kh(t.startAt,jh(t),e)||t.endAt&&kh(t.endAt,jh(t),e))}(t,e)}function $h(t){return function(e,n){for(var r=!1,i=0,s=jh(t);i<s.length;i++){var o=s[i],a=Kh(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function Kh(t,e,n){var r=t.field.isKeyField()?Kl.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Wl(r,i):vl()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return vl()}}function Zh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hl(e)?"-0":e}}function Qh(t){return{integerValue:""+t}}function Yh(t,e){return $l(e)?Qh(e):Zh(t,e)}var Wh=function(){this._=void 0};function Jh(t,e,n){return t instanceof ed?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof nd?rd(t,e):t instanceof id?sd(t,e):function(t,e){var n=td(t,e),r=ad(n)+ad(t.A);return nh(n)&&nh(t.A)?Qh(r):Zh(t.R,r)}(t,e)}function Xh(t,e,n){return t instanceof nd?rd(t,e):t instanceof id?sd(t,e):n}function td(t,e){return t instanceof od?nh(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ul.ZT)(e,t),e}(Wh),nd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,ul.ZT)(e,t),e}(Wh);function rd(t,e){for(var n=ud(e),r=function(t){n.some(function(e){return Ql(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var id=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,ul.ZT)(e,t),e}(Wh);function sd(t,e){for(var n=ud(e),r=function(t){n=n.filter(function(e){return!Ql(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var od=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,ul.ZT)(e,t),e}(Wh);function ad(t){return jl(t.integerValue||t.doubleValue)}function ud(t){return rh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var cd=function(t,e){this.field=t,this.transform=e},ld=function(t,e){this.version=t,this.transformResults=e},hd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function dd(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var fd=function(){};function pd(t,e,n){t instanceof bd?function(t,e,n){var r=t.value.clone(),i=Sd(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof _d?function(t,e,n){if(dd(t.precondition,e)){var r=Sd(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(wd(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function md(t,e,n){t instanceof bd?function(t,e,n){if(dd(t.precondition,e)){var r=t.value.clone(),i=Ed(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(vd(e),r).setHasLocalMutations()}}(t,e,n):t instanceof _d?function(t,e,n){if(dd(t.precondition,e)){var r=Ed(t.fieldTransforms,n,e),i=e.data;i.setAll(wd(t)),i.setAll(r),e.convertToFoundDocument(vd(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){dd(t.precondition,e)&&e.convertToNoDocument(Il.min())}(t,e)}function gd(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=td(s.transform,o||null);null!=a&&(null==n&&(n=uh.empty()),n.set(s.field,a))}return n||null}function yd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Tl(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof nd&&e instanceof nd||t instanceof id&&e instanceof id?Tl(t.elements,e.elements,Ql):t instanceof od&&e instanceof od?Ql(t.A,e.A):t instanceof ed&&e instanceof ed}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function vd(t){return t.isFoundDocument()?t.version:Il.min()}var bd=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return(0,ul.ZT)(e,t),e}(fd),_d=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,ul.ZT)(e,t),e}(fd);function wd(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Sd(t,e,n){var r=new Map;bl(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Xh(o,a,n[i]))}return r}function Ed(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,Jh(a,u,e))}return r}var Td,Cd,xd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,ul.ZT)(e,t),e}(fd),Id=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,ul.ZT)(e,t),e}(fd),Ad=function(t){this.count=t};function kd(t){switch(t){case ll.OK:return vl();case ll.CANCELLED:case ll.UNKNOWN:case ll.DEADLINE_EXCEEDED:case ll.RESOURCE_EXHAUSTED:case ll.INTERNAL:case ll.UNAVAILABLE:case ll.UNAUTHENTICATED:return!1;case ll.INVALID_ARGUMENT:case ll.NOT_FOUND:case ll.ALREADY_EXISTS:case ll.PERMISSION_DENIED:case ll.FAILED_PRECONDITION:case ll.ABORTED:case ll.OUT_OF_RANGE:case ll.UNIMPLEMENTED:case ll.DATA_LOSS:return!0;default:return vl()}}function Od(t){if(void 0===t)return ml("GRPC error has no .code"),ll.UNKNOWN;switch(t){case Td.OK:return ll.OK;case Td.CANCELLED:return ll.CANCELLED;case Td.UNKNOWN:return ll.UNKNOWN;case Td.DEADLINE_EXCEEDED:return ll.DEADLINE_EXCEEDED;case Td.RESOURCE_EXHAUSTED:return ll.RESOURCE_EXHAUSTED;case Td.INTERNAL:return ll.INTERNAL;case Td.UNAVAILABLE:return ll.UNAVAILABLE;case Td.UNAUTHENTICATED:return ll.UNAUTHENTICATED;case Td.INVALID_ARGUMENT:return ll.INVALID_ARGUMENT;case Td.NOT_FOUND:return ll.NOT_FOUND;case Td.ALREADY_EXISTS:return ll.ALREADY_EXISTS;case Td.PERMISSION_DENIED:return ll.PERMISSION_DENIED;case Td.FAILED_PRECONDITION:return ll.FAILED_PRECONDITION;case Td.ABORTED:return ll.ABORTED;case Td.OUT_OF_RANGE:return ll.OUT_OF_RANGE;case Td.UNIMPLEMENTED:return ll.UNIMPLEMENTED;case Td.DATA_LOSS:return ll.DATA_LOSS;default:return vl()}}(Cd=Td||(Td={}))[Cd.OK=0]="OK",Cd[Cd.CANCELLED=1]="CANCELLED",Cd[Cd.UNKNOWN=2]="UNKNOWN",Cd[Cd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cd[Cd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cd[Cd.NOT_FOUND=5]="NOT_FOUND",Cd[Cd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cd[Cd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cd[Cd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cd[Cd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cd[Cd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cd[Cd.ABORTED=10]="ABORTED",Cd[Cd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cd[Cd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cd[Cd.INTERNAL=13]="INTERNAL",Cd[Cd.UNAVAILABLE=14]="UNAVAILABLE",Cd[Cd.DATA_LOSS=15]="DATA_LOSS";var Nd=function(){function t(t,e){this.comparator=t,this.root=e||Rd.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rd.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rd.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Dd(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Dd(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Dd(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Dd(this.root,t,this.comparator,!0)},t}(),Dd=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Rd=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw vl();if(this.right.isRed())throw vl();var t=this.left.check();if(t!==this.right.check())throw vl();return t+(this.isRed()?0:1)},t}();Rd.EMPTY=null,Rd.RED=!0,Rd.BLACK=!1,Rd.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw vl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw vl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw vl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw vl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw vl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Rd(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Pd=function(){function t(t){this.comparator=t,this.data=new Nd(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ld(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ld(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ld=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Fd=new Nd(Kl.comparator);function Md(){return Fd}var Vd=new Nd(Kl.comparator);function jd(){return Vd}var Ud=new Nd(Kl.comparator);function qd(){return Ud}var Bd=new Pd(Kl.comparator);function Gd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Bd,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var zd=new Pd(El);function Hd(){return zd}var $d=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Il.min(),r,Hd(),Md(),Gd())},t}(),Kd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Fl.EMPTY_BYTE_STRING,n,Gd(),Gd(),Gd())},t}(),Zd=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Qd=function(t,e){this.targetId=t,this.V=e},Yd=function(t,e,n,r){void 0===n&&(n=Fl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Wd=function(){function t(){this.S=0,this.D=tf(),this.C=Fl.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Gd(),e=Gd(),n=Gd();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:vl()}}),new Kd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=tf()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Jd=function(){function t(t){this.W=t,this.G=new Map,this.H=Md(),this.J=Xd(),this.Y=new Pd(El)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:vl()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(mh(i))if(0===n){var s=new Kl(i.path);this.tt(e,s,lh.newNoDocument(s,Il.min()))}else bl(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&mh(s.target)){var o=new Kl(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,lh.newNoDocument(o,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Gd();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new $d(t,n,this.Y,this.H,r);return this.H=Md(),this.J=Xd(),this.Y=new Pd(El),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Wd,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Pd(El),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||pl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Wd),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Xd(){return new Nd(Kl.comparator)}function tf(){return new Nd(Kl.comparator)}var ef={asc:"ASCENDING",desc:"DESCENDING"},nf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rf=function(t,e){this.databaseId=t,this.I=e};function sf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function of(t,e){return t.I?e.toBase64():e.toUint8Array()}function af(t,e){return sf(t,e.toTimestamp())}function uf(t){return bl(!!t),Il.fromTimestamp(function(t){var e=Vl(t);return new xl(e.seconds,e.nanos)}(t))}function cf(t,e){return function(t){return new Dl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function lf(t){var e=Dl.fromString(t);return bl(Pf(e)),e}function hf(t,e){return cf(t.databaseId,e.path)}function df(t,e){var n=lf(e);if(n.get(1)!==t.databaseId.projectId)throw new hl(ll.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new hl(ll.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Kl(gf(n))}function ff(t,e){return cf(t.databaseId,e)}function pf(t){var e=lf(t);return 4===e.length?Dl.emptyPath():gf(e)}function mf(t){return new Dl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gf(t){return bl(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function yf(t,e,n){return{name:hf(t,e),fields:n.value.mapValue.fields}}function vf(t,e,n){var r=df(t,e.name),i=uf(e.updateTime),s=new uh({mapValue:{fields:e.fields}}),o=lh.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function bf(t,e){var n;if(e instanceof bd)n={update:yf(t,e.key,e.value)};else if(e instanceof xd)n={delete:hf(t,e.key)};else if(e instanceof _d)n={update:yf(t,e.key,e.data),updateMask:Rf(e.fieldMask)};else{if(!(e instanceof Id))return vl();n={verify:hf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof ed)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nd)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof id)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof od)return{fieldPath:e.field.canonicalString(),increment:n.A};throw vl()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:af(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:vl()}(t,e.precondition)),n}function _f(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?hd.updateTime(uf(t.updateTime)):void 0!==t.exists?hd.exists(t.exists):hd.none()}(e.currentDocument):hd.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(bl("REQUEST_TIME"===e.setToServerValue),n=new ed):"appendMissingElements"in e?n=new nd(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new id(e.removeAllFromArray.values||[]):"increment"in e?n=new od(t,e.increment):vl();var r=Pl.fromServerFormat(e.fieldPath);return new cd(r,n)}(t,e)}):[];if(e.update){var i=df(t,e.update.name),s=new uh({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Ll((t.fieldPaths||[]).map(function(t){return Pl.fromServerFormat(t)}))}(e.updateMask);return new _d(i,s,o,n,r)}return new bd(i,s,n,r)}if(e.delete){var a=df(t,e.delete);return new xd(a,n)}if(e.verify){var u=df(t,e.verify);return new Id(u,n)}return vl()}function wf(t,e){return{documents:[ff(t,e.path)]}}function Sf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ff(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ff(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(sh(t.value))return{unaryFilter:{field:kf(t.field),op:"IS_NAN"}};if(ih(t.value))return{unaryFilter:{field:kf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(sh(t.value))return{unaryFilter:{field:kf(t.field),op:"IS_NOT_NAN"}};if(ih(t.value))return{unaryFilter:{field:kf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kf(t.field),op:Af(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:kf(t.field),direction:If(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||zl(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Cf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Cf(e.endAt)),n}function Ef(t){var e=pf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){bl(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=Tf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Ih(Of(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return zl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=xf(n.startAt));var l=null;return n.endAt&&(l=xf(n.endAt)),Dh(e,i,a,o,u,"F",c,l)}function Tf(t){return t?void 0!==t.unaryFilter?[Df(t)]:void 0!==t.fieldFilter?[Nf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Tf(t)}).reduce(function(t,e){return t.concat(e)}):vl():[]}function Cf(t){return{before:t.before,values:t.position}}function xf(t){return new Ch(t.values||[],!!t.before)}function If(t){return ef[t]}function Af(t){return nf[t]}function kf(t){return{fieldPath:t.canonicalString()}}function Of(t){return Pl.fromServerFormat(t.fieldPath)}function Nf(t){return gh.create(Of(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return vl()}}(t.fieldFilter.op),t.fieldFilter.value)}function Df(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Of(t.unaryFilter.field);return gh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Of(t.unaryFilter.field);return gh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Of(t.unaryFilter.field);return gh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Of(t.unaryFilter.field);return gh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return vl()}}function Rf(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Pf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Lf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Mf(e)),e=Ff(t.get(n),e);return Mf(e)}function Ff(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function Mf(t){return t+"\x01\x01"}function Vf(t){var e=t.length;if(bl(e>=2),2===e)return bl("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Dl.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&vl(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:vl()}s=o+2}return new Dl(r)}var jf=function(t,e){this.seconds=t,this.nanoseconds=e},Uf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Uf.store="owner",Uf.key="owner";var qf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};qf.store="mutationQueues",qf.keyPath="userId";var Bf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bf.store="mutations",Bf.keyPath="batchId",Bf.userMutationsIndex="userMutationsIndex",Bf.userMutationsKeyPath=["userId","batchId"];var Gf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Lf(e)]},t.key=function(t,e,n){return[t,Lf(e),n]},t}();Gf.store="documentMutations",Gf.PLACEHOLDER=new Gf;var zf=function(t,e){this.path=t,this.readTime=e},Hf=function(t,e){this.path=t,this.version=e},$f=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};$f.store="remoteDocuments",$f.readTimeIndex="readTimeIndex",$f.readTimeIndexPath="readTime",$f.collectionReadTimeIndex="collectionReadTimeIndex",$f.collectionReadTimeIndexPath=["parentPath","readTime"];var Kf=function(t){this.byteSize=t};Kf.store="remoteDocumentGlobal",Kf.key="remoteDocumentGlobalKey";var Zf=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};Zf.store="targets",Zf.keyPath="targetId",Zf.queryTargetsIndexName="queryTargetsIndex",Zf.queryTargetsKeyPath=["canonicalId","targetId"];var Qf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Qf.store="targetDocuments",Qf.keyPath=["targetId","path"],Qf.documentTargetsIndex="documentTargetsIndex",Qf.documentTargetsKeyPath=["path","targetId"];var Yf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Yf.key="targetGlobalKey",Yf.store="targetGlobal";var Wf=function(t,e){this.collectionId=t,this.parent=e};Wf.store="collectionParents",Wf.keyPath=["collectionId","parent"];var Jf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Jf.store="clientMetadata",Jf.keyPath="clientId";var Xf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Xf.store="bundles",Xf.keyPath="bundleId";var tp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};tp.store="namedQueries",tp.keyPath="name";var ep=(0,ul.ev)((0,ul.ev)([],(0,ul.ev)((0,ul.ev)([],(0,ul.ev)((0,ul.ev)([],(0,ul.ev)((0,ul.ev)([],[qf.store,Bf.store,Gf.store,$f.store,Zf.store,Uf.store,Yf.store,Qf.store]),[Jf.store])),[Kf.store])),[Wf.store])),[Xf.store,tp.store]),np="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),ip=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},sp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&vl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),op=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new ip,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new cp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=pp(e.target.error);n.ft.reject(new cp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new cp(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(pl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new hp(e)},t}(),ap=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,Ws.z$)())&&ml("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return pl("SimpleDb","Removing database:",t),dp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Ws.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,ul.mG)(this,void 0,void 0,function(){var e,n=this;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(pl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new cp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new hl(ll.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new cp(t,n))},i.onupgradeneeded=function(t){pl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){pl("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,ul.mG)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,ul.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return(0,ul.Jh)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=op.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),sp.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return pl("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),up=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return dp(this.Pt.delete())},t}(),cp=function(t){function e(e,n){var r=this;return(r=t.call(this,ll.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,ul.ZT)(e,t),e}(hl);function lp(t){return"IndexedDbTransactionError"===t.name}var hp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(pl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(pl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),dp(n)},t.prototype.add=function(t){return pl("SimpleDb","ADD",this.store.name,t,t),dp(this.store.add(t))},t.prototype.get=function(t){var e=this;return dp(this.store.get(t)).next(function(n){return void 0===n&&(n=null),pl("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return pl("SimpleDb","DELETE",this.store.name,t),dp(this.store.delete(t))},t.prototype.count=function(){return pl("SimpleDb","COUNT",this.store.name),dp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){pl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new sp(function(n,r){e.onerror=function(t){var e=pp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new sp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new up(i),o=e(i.primaryKey,i.value,s);if(o instanceof sp){var a=o.catch(function(t){return s.done(),sp.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return sp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function dp(t){return new sp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=pp(t.target.error);n(e)}})}var fp=!1;function pp(t){var e=ap._t((0,Ws.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new hl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return fp||(fp=!0,setTimeout(function(){throw r},0)),r}}return t}var mp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,ul.ZT)(e,t),e}(rp);function gp(t,e){var n=_l(t);return ap.It(n.Mt,e)}var yp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&pd(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&md(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&md(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Il.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Gd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Tl(this.mutations,t.mutations,function(t,e){return yd(t,e)})&&Tl(this.baseMutations,t.baseMutations,function(t,e){return yd(t,e)})},t}(),vp=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){bl(e.mutations.length===r.length);for(var i=qd(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),bp=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=Il.min()),void 0===s&&(s=Il.min()),void 0===o&&(o=Fl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),_p=function(t){this.Lt=t};function wp(t,e){if(e.document)return vf(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Kl.fromSegments(e.noDocument.path),r=xp(e.noDocument.readTime),i=lh.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=Kl.fromSegments(e.unknownDocument.path);return r=xp(e.unknownDocument.version),lh.newUnknownDocument(s,r)}return vl()}function Sp(t,e,n){var r=Ep(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:hf(t,e.key),fields:e.data.value.mapValue.fields,updateTime:sf(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new $f(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Cp(e.version);return o=e.hasCommittedMutations,new $f(null,new zf(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Cp(e.version);return new $f(new Hf(c,l),null,null,!0,r,i)}return vl()}function Ep(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Tp(t){var e=new xl(t[0],t[1]);return Il.fromTimestamp(e)}function Cp(t){var e=t.toTimestamp();return new jf(e.seconds,e.nanoseconds)}function xp(t){var e=new xl(t.seconds,t.nanoseconds);return Il.fromTimestamp(e)}function Ip(t,e){for(var n=(e.baseMutations||[]).map(function(e){return _f(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return _f(t.Lt,e)}),s=xl.fromMillis(e.localWriteTimeMs);return new yp(e.batchId,s,n,i)}function Ap(t){var e,n,r=xp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?xp(t.lastLimboFreeSnapshotVersion):Il.min();return void 0!==t.query.documents?(bl(1===(n=t.query).documents.length),e=Uh(Rh(pf(n.documents[0])))):e=function(t){return Uh(Ef(t))}(t.query),new bp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Fl.fromBase64String(t.resumeToken))}function kp(t,e){var n,r=Cp(e.snapshotVersion),i=Cp(e.lastLimboFreeSnapshotVersion);n=mh(e.target)?wf(t.Lt,e.target):Sf(t.Lt,e.target);var s=e.resumeToken.toBase64();return new Zf(e.targetId,fh(e.target),r,s,e.sequenceNumber,i,n)}function Op(t){var e=Ef({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?qh(e,e.limit,"L"):e}var Np=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Dp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:xp(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Dp(t).put({bundleId:(n=e).id,createTime:Cp(uf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Rp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Op(e.bundledQuery),readTime:xp(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Rp(t).put(function(t){return{name:t.name,readTime:Cp(uf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Dp(t){return gp(t,Xf.store)}function Rp(t){return gp(t,tp.store)}var Pp=function(){function t(){this.Bt=new Lp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),sp.resolve()},t.prototype.getCollectionParents=function(t,e){return sp.resolve(this.Bt.getEntries(e))},t}(),Lp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Pd(Dl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Pd(Dl.comparator)).toArray()},t}(),Fp=function(){function t(){this.qt=new Lp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:Lf(i)};return Mp(t).put(s)}return sp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Cl(e),""],!1,!0);return Mp(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(Vf(s.parent))}return n})},t}();function Mp(t){return gp(t,Wf.store)}var Vp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Up(t,e,n){var r=t.store(Bf.store),i=t.store(Gf.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){bl(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Gf.key(e,d.key.path,n.batchId);s.push(i.delete(f)),c.push(d.key)}return sp.waitFor(s).next(function(){return c})}function qp(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw vl();e=t.noDocument}return JSON.stringify(e).length}jp.DEFAULT_COLLECTION_PERCENTILE=10,jp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jp.DEFAULT=new jp(41943040,jp.DEFAULT_COLLECTION_PERCENTILE,jp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jp.DISABLED=new jp(-1,0,0);var Bp=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return bl(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zp(t).$t({index:Bf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=Hp(t),o=zp(t);return o.add({}).next(function(a){bl("number"==typeof a);for(var u=new yp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return bf(t.Lt,e)}),i=n.mutations.map(function(e){return bf(t.Lt,e)});return new Bf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Pd(function(t,e){return El(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],m=Gf.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(m,Gf.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),sp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return zp(t).get(e).next(function(t){return t?(bl(t.userId===n.userId),Ip(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?sp.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return zp(t).$t({index:Bf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(bl(e.batchId>=r),s=Ip(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zp(t).$t({index:Bf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zp(t).Nt(Bf.userMutationsIndex,n).next(function(t){return t.map(function(t){return Ip(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Gf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Hp(t).$t({range:i},function(r,i,o){var a=r[0],u=r[2],c=Vf(r[1]);if(a===n.userId&&e.path.isEqual(c))return zp(t).get(u).next(function(t){if(!t)throw vl();bl(t.userId===n.userId),s.push(Ip(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pd(El),i=[];return e.forEach(function(e){var s=Gf.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Hp(t).$t({range:o},function(t,i,s){var o=t[0],a=t[2],u=Vf(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),sp.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=Gf.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Pd(El);return Hp(t).$t({range:o},function(t,e,s){var o=t[0],u=t[2],c=Vf(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(zp(t).get(e).next(function(t){if(null===t)throw vl();bl(t.userId===n.userId),r.push(Ip(n.R,t))}))}),sp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Up(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),sp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return sp.resolve();var r=IDBKeyRange.lowerBound(Gf.prefixForUser(e.userId)),i=[];return Hp(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var s=Vf(t[1]);i.push(s)}else r.done()}).next(function(){bl(0===i.length)})})},t.prototype.containsKey=function(t,e){return Gp(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return $p(t).get(this.userId).next(function(t){return t||new qf(e.userId,-1,"")})},t}();function Gp(t,e,n){var r=Gf.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Hp(t).$t({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function zp(t){return gp(t,Bf.store)}function Hp(t){return gp(t,Gf.store)}function $p(t){return gp(t,qf.store)}var Kp=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Zp=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Kp(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Il.fromTimestamp(new xl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Qp(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return bl(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return Qp(t).$t(function(o,a){var u=Ap(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return sp.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Qp(t).$t(function(t,n){var r=Ap(n);e(r)})},t.prototype.Xt=function(t){return Yp(t).get(Yf.key).next(function(t){return bl(null!==t),t})},t.prototype.Zt=function(t,e){return Yp(t).put(Yf.key,e)},t.prototype.te=function(t,e){return Qp(t).put(kp(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=fh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Qp(t).$t({range:r,index:Zf.queryTargetsIndexName},function(t,n,r){var s=Ap(n);ph(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=Wp(t);return e.forEach(function(e){var o=Lf(e.path);i.push(s.put(new Qf(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),sp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Wp(t);return sp.forEach(e,function(e){var s=Lf(e.path);return sp.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Wp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Wp(t),i=Gd();return r.$t({range:n,kt:!0},function(t,e,n){var r=Vf(t[1]),s=new Kl(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Lf(e.path),r=IDBKeyRange.bound([n],[Cl(n)],!1,!0),i=0;return Wp(t).$t({index:Qf.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Qp(t).get(e).next(function(t){return t?Ap(t):null})},t}();function Qp(t){return gp(t,Zf.store)}function Yp(t){return gp(t,Yf.store)}function Wp(t){return gp(t,Qf.store)}function Jp(t){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){if(t.code!==ll.FAILED_PRECONDITION||t.message!==np)throw t;return pl("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Xp(t,e){var n=t[1],r=e[1],i=El(t[0],e[0]);return 0===i?El(n,r):i}var tm=function(){function t(t){this.ne=t,this.buffer=new Pd(Xp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),em=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;pl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,ul.mG)(e,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return lp(e=n.sent())?(pl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Jp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),nm=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return sp.resolve(cl.o);var r=new tm(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(pl("LruGarbageCollector","Garbage collection skipped; disabled"),sp.resolve(Vp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(pl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Vp):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(pl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),fl()<=Js.in.DEBUG&&pl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),sp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),rm=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new nm(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return im(t,n)},t.prototype.removeReference=function(t,e,n){return im(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return im(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return $p(t).Ot(function(r){return Gp(t,r,e).next(function(t){return t&&(n=!0),sp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),Wp(t).delete([0,Lf(o.path)])})});i.push(u)}}).next(function(){return sp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return im(t,e)},t.prototype.we=function(t,e){var n,r=Wp(t),i=cl.o;return r.$t({index:Qf.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==cl.o&&e(new Kl(Vf(n)),i),i=o,n=s):i=cl.o}).next(function(){i!==cl.o&&e(new Kl(Vf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function im(t,e){return Wp(t).put(function(t,e){return new Qf(0,Lf(t.path),e)}(e,t.currentSequenceNumber))}var sm=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){kl(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return Ol(this.inner)},t}(),om=function(){function t(){this.changes=new sm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Il.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:lh.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?sp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),am=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return lm(t).put(hm(e),n)},t.prototype.removeEntry=function(t,e){var n=lm(t),r=hm(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return lm(t).get(hm(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return lm(t).get(hm(e)).next(function(t){return{document:n.ye(e,t),size:qp(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Md();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Md(),i=new Nd(Kl.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,qp(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return sp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return lm(t).$t({range:r},function(t,e,r){for(var o=Kl.fromSegments(t);s&&Kl.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Md(),s=e.path.length+1,o={};if(n.isEqual(Il.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Ep(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=$f.collectionReadTimeIndex}return lm(t).$t(o,function(t,n,o){if(t.length===s){var a=wp(r.R,n);e.path.isPrefixOf(a.key.path)?Hh(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new um(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return cm(t).get(Kf.key).next(function(t){return bl(!!t),t})},t.prototype.me=function(t,e){return cm(t).put(Kf.key,e)},t.prototype.ye=function(t,e){if(e){var n=wp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Il.min()))return n}return lh.newInvalidDocument(t)},t}(),um=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new sm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,ul.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Pd(function(t,e){return El(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=Sp(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=qp(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=Sp(e.Ie.R,lh.newNoDocument(s,Il.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),sp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(om);function cm(t){return gp(t,Kf.store)}function lm(t){return gp(t,$f.store)}function hm(t){return t.path.toArray()}var dm=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;bl(n<r&&n>=0&&r<=11);var s=new op("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Uf.store)}(t),function(t){t.createObjectStore(qf.store,{keyPath:qf.keyPath}),t.createObjectStore(Bf.store,{keyPath:Bf.keyPath,autoIncrement:!0}).createIndex(Bf.userMutationsIndex,Bf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Gf.store)}(t),fm(t),function(t){t.createObjectStore($f.store)}(t));var o=sp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Qf.store),t.deleteObjectStore(Zf.store),t.deleteObjectStore(Yf.store)}(t),fm(t)),o=o.next(function(){return function(t){var e=t.store(Yf.store),n=new Yf(0,0,Il.min().toTimestamp(),0);return e.put(Yf.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(Bf.store).Nt().next(function(n){t.deleteObjectStore(Bf.store),t.createObjectStore(Bf.store,{keyPath:Bf.keyPath,autoIncrement:!0}).createIndex(Bf.userMutationsIndex,Bf.userMutationsKeyPath,{unique:!0});var r=e.store(Bf.store),i=n.map(function(t){return r.put(t)});return sp.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(Jf.store,{keyPath:Jf.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(Kf.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore($f.store);e.createIndex($f.readTimeIndex,$f.readTimeIndexPath,{unique:!1}),e.createIndex($f.collectionReadTimeIndex,$f.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(Xf.store,{keyPath:Xf.keyPath})}(t),function(t){t.createObjectStore(tp.store,{keyPath:tp.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store($f.store).$t(function(t,n){e+=qp(n)}).next(function(){var n=new Kf(e);return t.store(Kf.store).put(Kf.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(qf.store),r=t.store(Bf.store);return n.Nt().next(function(n){return sp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Bf.userMutationsIndex,i).next(function(r){return sp.forEach(r,function(r){bl(r.userId===n.userId);var i=Ip(e.R,r);return Up(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Qf.store),n=t.store($f.store);return t.store(Yf.store).get(Yf.key).next(function(t){var r=[];return n.$t(function(n,i){var s=new Dl(n),o=function(t){return[0,Lf(t)]}(s);r.push(e.get(o).next(function(n){return n?sp.resolve():function(n){return e.put(new Qf(0,Lf(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return sp.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Wf.store,{keyPath:Wf.keyPath});var n=e.store(Wf.store),r=new Lp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Lf(i)})}};return e.store($f.store).$t({kt:!0},function(t,e){var n=new Dl(t);return i(n.popLast())}).next(function(){return e.store(Gf.store).$t({kt:!0},function(t,e){var n=Vf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Zf.store);return n.$t(function(t,r){var i=Ap(r),s=kp(e.R,i);return n.put(s)})},t}();function fm(t){t.createObjectStore(Qf.store,{keyPath:Qf.keyPath}).createIndex(Qf.documentTargetsIndex,Qf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Zf.store,{keyPath:Zf.keyPath}).createIndex(Zf.queryTargetsIndexName,Zf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yf.store)}var pm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mm=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new hl(ll.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rm(this,i),this.Le=n+"main",this.R=new _p(u),this.Be=new ap(this.Le,11,new dm(this.R)),this.qe=new Zp(this.referenceDelegate,this.R),this.Ut=new Fp,this.Ue=function(t,e){return new am(t,e)}(this.R,this.Ut),this.Qe=new Np,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&ml("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new hl(ll.FAILED_PRECONDITION,pm);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new cl(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,ul.mG)(e,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,ul.mG)(e,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,ul.mG)(e,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return ym(e).put(new Jf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(lp(e))return pl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return pl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return gm(t).get(Uf.key).next(function(t){return sp.resolve(e.tn(t))})},t.prototype.en=function(t){return ym(t).delete(this.clientId)},t.prototype.nn=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=gp(t,Jf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return sp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?sp.resolve(!0):gm(t).get(Uf.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new hl(ll.FAILED_PRECONDITION,pm);return!1}}return!(!e.networkEnabled||!e.inForeground)||ym(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&pl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t=this;return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Uf.store,Jf.store],function(e){var n=new mp(e,cl.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return ym(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Bp.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return pl("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",ep,function(s){return r=new mp(s,i.Ne?i.Ne.next():cl.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw ml("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new hl(ll.FAILED_PRECONDITION,np);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return gm(t).get(Uf.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new hl(ll.FAILED_PRECONDITION,pm)})},t.prototype.Ze=function(t){var e=new Uf(this.clientId,this.allowTabSynchronization,Date.now());return gm(t).put(Uf.key,e)},t.yt=function(){return ap.yt()},t.prototype.Xe=function(t){var e=this,n=gm(t);return n.get(Uf.key).next(function(t){return e.tn(t)?(pl("IndexedDbPersistence","Releasing primary lease."),n.delete(Uf.key)):sp.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ml("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return pl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ml("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){ml("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function gm(t){return gp(t,Uf.store)}function ym(t){return gp(t,Jf.store)}function vm(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var bm=function(t,e){this.progress=t,this.wn=e},_m=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Kl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Vh(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Kl(e)).next(function(t){var e=jd();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=jd();return this.Ut.getCollectionParents(t,i).next(function(o){return sp.forEach(o,function(o){var a=function(t,e){return new Nh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=lh.newInvalidDocument(c),r=r.insert(c,l)),md(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Hh(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Gd(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof _d&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),wm=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Gd(),i=Gd(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Sm=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Il.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(Ph(e)||Lh(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(fl()<=Js.in.DEBUG&&pl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),zh(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Pd($h(t));return e.forEach(function(e,r){Hh(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return fl()<=Js.in.DEBUG&&pl("QueryEngine","Using full collection scan to execute query:",zh(e)),this.Sn.getDocumentsMatchingQuery(t,e,Il.min())},t}(),Em=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Nd(El),this.kn=new sm(function(t){return fh(t)},ph),this.$n=Il.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new _m(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Tm(t,e,n,r){return new Em(t,e,n,r)}function Cm(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,ul.Jh)(this,function(o){switch(o.label){case 0:return n=_l(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new _m(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=Gd(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)o=o.add(g[m].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function xm(t,e){var n=_l(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=sp.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);bl(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Im(t){var e=_l(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Am(t,e){var n=_l(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return bl(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=Md();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(km(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Il.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return sp.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function km(t,e,n,r,i){var s=Gd();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=Md();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Il.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):pl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function Om(t,e){var n=_l(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Nm(t,e){var n=_l(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?sp.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new bp(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Dm(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,ul.Jh)(this,function(a){switch(a.label){case 0:r=_l(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!lp(o=a.sent()))throw o;return pl("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Rm(t,e,n){var r=_l(t),i=Il.min(),s=Gd();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=_l(t),i=r.kn.get(n);return void 0!==i?sp.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Uh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Il.min(),n?s:Gd())}).next(function(t){return{documents:t,Bn:s}})})}function Pm(t,e){var n=_l(t),r=_l(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Lm(t){var e=_l(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=_l(t),i=Md(),s=Ep(n),o=lm(e),a=IDBKeyRange.lowerBound(s,!0);return o.$t({index:$f.readTimeIndex,range:a},function(t,e){var n=wp(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:Tp(s)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function Fm(t){return(0,ul.mG)(this,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){return[2,(e=_l(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=lm(t),n=Il.min();return e.$t({index:$f.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Tp(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function Mm(t,e,n,r){return(0,ul.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,d,f;return(0,ul.Jh)(this,function(p){switch(p.label){case 0:for(i=_l(t),s=Gd(),o=Md(),a=qd(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,Nm(i,function(t){return Uh(Rh(Dl.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return km(t,d,o,Il.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,s,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Vm(t,e,n){return void 0===n&&(n=Gd()),(0,ul.mG)(this,void 0,void 0,function(){var r,i;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return[4,Nm(t,Uh(Op(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=_l(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=uf(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Qe.saveNamedQuery(t,e);var o=r.withResumeToken(Fl.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var jm=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return sp.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:uf(n.createTime)}),sp.resolve()},t.prototype.getNamedQuery=function(t,e){return sp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Op(t.bundledQuery),readTime:uf(t.readTime)}}(e)),sp.resolve()},t}(),Um=function(){function t(){this.Wn=new Pd(qm.Gn),this.zn=new Pd(qm.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new qm(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new qm(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Kl(new Dl([])),r=new qm(n,t),i=new qm(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Kl(new Dl([])),n=new qm(e,t),r=new qm(e,t+1),i=Gd();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new qm(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),qm=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Kl.comparator(t.key,e.key)||El(t.ns,e.ns)},t.Hn=function(t,e){return El(t.ns,e.ns)||Kl.comparator(t.key,e.key)},t}(),Bm=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Pd(qm.Gn)}return t.prototype.checkEmpty=function(t){return sp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new yp(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new qm(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return sp.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return sp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return sp.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return sp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return sp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new qm(e,0),i=new qm(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),sp.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pd(El);return e.forEach(function(t){var e=new qm(t,0),i=new qm(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),sp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Kl.isDocumentKey(i)||(i=i.child(""));var s=new qm(new Kl(i),0),o=new Pd(El);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),sp.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;bl(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return sp.forEach(e.mutations,function(i){var s=new qm(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new qm(e,0),r=this.rs.firstAfterOrEqual(n);return sp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return sp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Gm=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Nd(Kl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return sp.resolve(n?n.document.clone():lh.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Md();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():lh.newInvalidDocument(t))}),sp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Md(),i=new Kl(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||Hh(e,u)&&(r=r.insert(u.key,u.clone()))}return sp.resolve(r)},t.prototype.fs=function(t,e){return sp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new zm(this)},t.prototype.getSize=function(t){return sp.resolve(this.size)},t}(),zm=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,ul.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),sp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(om),Hm=function(){function t(t){this.persistence=t,this.ds=new sm(function(t){return fh(t)},ph),this.lastRemoteSnapshotVersion=Il.min(),this.highestTargetId=0,this.ws=0,this._s=new Um,this.targetCount=0,this.ys=Kp.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),sp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return sp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return sp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),sp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),sp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Kp(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,sp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),sp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,sp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),sp.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return sp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return sp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),sp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),sp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),sp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return sp.resolve(n)},t.prototype.containsKey=function(t,e){return sp.resolve(this._s.containsKey(e))},t}(),$m=function(){function t(t,e){var n=this;this.gs={},this.Ne=new cl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Hm(this),this.Ut=new Pp,this.Ue=function(t,e){return new Gm(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new _p(e),this.Qe=new jm(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Bm(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;pl("MemoryPersistence","Starting transaction:",t);var i=new Km(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return sp.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Km=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,ul.ZT)(e,t),e}(rp),Zm=function(){function t(t){this.persistence=t,this.As=new Um,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw vl()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),sp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),sp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),sp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sp.forEach(this.vs,function(r){var i=Kl.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return sp.or([function(){return sp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Qm=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Ym(t,e){return"firestore_clients_"+t+"_"+e}function Wm(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Jm(t,e){return"firestore_targets_"+t+"_"+e}Qm.UNAUTHENTICATED=new Qm(null),Qm.GOOGLE_CREDENTIALS=new Qm("google-credentials-uid"),Qm.FIRST_PARTY=new Qm("first-party-uid");var Xm=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new hl(s.error.code,s.error.message)),o?new t(e,n,s.state,i):(ml("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),tg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new hl(i.error.code,i.error.message)),s?new t(e,i.state,r):(ml("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),eg=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Hd(),o=0;i&&o<r.activeTargetIds.length;++o)i=$l(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(ml("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ng=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ml("SharedClientState","Failed to parse online state: "+e),null)},t}(),rg=function(){function t(){this.activeTargetIds=Hd()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ig=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Nd(El),this.started=!1,this.$s=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Ym(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new rg),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return(0,ul.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Ym(this.persistenceKey,r)))&&(s=eg.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Ks(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Jm(this.persistenceKey,t));if(n){var r=tg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Jm(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return pl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){pl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){pl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(pl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void ml("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,ul.mG)(e,void 0,void 0,function(){var t,e,r,i,s,o;return(0,ul.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=cl.o;if(null!=t)try{var n=JSON.parse(t);bl("number"==typeof n),e=n}catch(t){ml("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==cl.o&&this.sequenceNumberHandler(o);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Xm(this.currentUser,t,e,n),i=Wm(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Wm(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Jm(this.persistenceKey,t),i=new tg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return eg.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Xm.Vs(new Qm(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return tg.Vs(r,e)},t.prototype.js=function(t){return ng.Vs(t)},t.prototype.ii=function(t){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(pl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Hd();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),sg=function(){function t(){this.li=new rg,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new rg,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),og=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),ag=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){pl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){pl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ug={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},cg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),lg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,ul.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new al;o.listenOnce(rl.COMPLETE,function(){try{switch(o.getLastErrorCode()){case nl.NO_ERROR:var e=o.getResponseJson();pl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case nl.TIMEOUT:pl("Connection",'RPC "'+t+'" timed out'),s(new hl(ll.DEADLINE_EXCEEDED,"Request time out"));break;case nl.HTTP_ERROR:var n=o.getStatus();if(pl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ll).indexOf(e)>=0?e:ll.UNKNOWN}(r.status);s(new hl(a,r.message))}else s(new hl(ll.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new hl(ll.UNAVAILABLE,"Connection failed."));break;default:vl()}}finally{pl("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Hc,i=Za(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new sl({})),this.Fi(s.initMessageHeaders,e),(0,Ws.uI)()||(0,Ws.b$)()||(0,Ws.d)()||(0,Ws.w1)()||(0,Ws.Mn)()||(0,Ws.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");pl("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new cg({Ei:function(t){c?pl("Connection","Not sending because WebChannel is closed:",t):(u||(pl("Connection","Opening WebChannel transport."),a.open(),u=!0),pl("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,ol.EventType.OPEN,function(){c||pl("Connection","WebChannel transport opened.")}),h(a,ol.EventType.CLOSE,function(){c||(c=!0,pl("Connection","WebChannel transport closed"),l.Vi())}),h(a,ol.EventType.ERROR,function(t){c||(c=!0,gl("Connection","WebChannel transport errored:",t),l.Vi(new hl(ll.UNAVAILABLE,"The operation could not be completed")))}),h(a,ol.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];bl(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){pl("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=Td[t];if(void 0!==e)return Od(e)}(i),o=r.message;void 0===s&&(s=ll.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new hl(s,o)),a.close()}else pl("Connection","WebChannel received:",n),l.Si(n)}}),h(i,il.STAT_EVENT,function(t){10===t.stat?pl("Connection","Detected buffering proxy"):11===t.stat&&pl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);pl("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return pl("RestConnection","Received: ",t),t},function(e){throw gl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.8",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+ug[t]},t}());function hg(){return"undefined"!=typeof window?window:null}function dg(){return"undefined"!=typeof document?document:null}function fg(t){return new rf(t,!0)}var pg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&pl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),mg=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new pg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ll.RESOURCE_EXHAUSTED?(ml(e.toString()),ml("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===ll.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new hl(ll.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,ul.mG)(t,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return pl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(pl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),gg=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return(0,ul.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:vl()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(bl(void 0===e||"string"==typeof e),Fl.fromBase64String(e||"")):(bl(void 0===e||e instanceof Uint8Array),Fl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ll.UNKNOWN:Od(t.code);return new hl(e,t.message||"")}(a);n=new Yd(r,i,s,o||null)}else if("documentChange"in e){i=df(t,(r=e.documentChange).document.name),s=uf(r.document.updateTime);var a=new uh({mapValue:{fields:r.document.fields}}),u=(o=lh.newFoundDocument(i,s,a),r.targetIds||[]);n=new Zd(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=df(t,(r=e.documentDelete).document),s=r.readTime?uf(r.readTime):Il.min(),a=lh.newNoDocument(i,s),n=new Zd([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=df(t,(r=e.documentRemove).document),n=new Zd([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return vl();var c=e.filter;i=new Ad(r=c.count||0),n=new Qd(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Il.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Il.min():e.readTime?uf(e.readTime):Il.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=mf(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=mh(r)?{documents:wf(t,r)}:{query:Sf(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=of(t,e.resumeToken):e.snapshotVersion.compareTo(Il.min())>0&&(n.readTime=sf(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vl()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=mf(this.R),e.removeTarget=t,this.cr(e)},e}(mg),yg=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return(0,ul.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(bl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(bl(void 0!==e),t.map(function(t){return function(t,e){var n=uf(t.updateTime?t.updateTime:e);return n.isEqual(Il.min())&&(n=uf(e)),new ld(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=uf(t.commitTime);return this.listener.Tr(n,e)}return bl(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=mf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return bf(e.R,t)})};this.cr(n)},e}(mg),vg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,ul.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new hl(ll.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new hl(ll.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new hl(ll.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),bg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ml(e),this.Vr=!1):pl("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),_g=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,ul.mG)(s,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){switch(t.label){case 0:return kg(this)?(pl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,ul.mG)(this,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return(e=_l(t)).Or.add(4),[4,Sg(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,wg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new bg(n,r)};function wg(t){return(0,ul.mG)(this,void 0,void 0,function(){var e,n;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:if(!kg(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Sg(t){return(0,ul.mG)(this,void 0,void 0,function(){var e,n;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Eg(t,e){var n=_l(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Ag(n)?Ig(n):zg(n).er()&&Cg(n,e))}function Tg(t,e){var n=_l(t),r=zg(n);n.$r.delete(e),r.er()&&xg(n,e),0===n.$r.size&&(r.er()?r.ir():kg(n)&&n.Br.set("Unknown"))}function Cg(t,e){t.qr.U(e.targetId),zg(t).mr(e)}function xg(t,e){t.qr.U(e),zg(t).yr(e)}function Ig(t){t.qr=new Jd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),zg(t).start(),t.Br.Sr()}function Ag(t){return kg(t)&&!zg(t).tr()&&t.$r.size>0}function kg(t){return 0===_l(t).Or.size}function Og(t){t.qr=void 0}function Ng(t){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){return t.$r.forEach(function(e,n){Cg(t,e)}),[2]})})}function Dg(t,e){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(n){return Og(t),Ag(t)?(t.Br.Nr(e),Ig(t)):t.Br.set("Unknown"),[2]})})}function Rg(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i,s;return(0,ul.Jh)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof Yd&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,ul.Jh)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.$r.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.$r.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),pl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Pg(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Zd?t.qr.X(e):e instanceof Qd?t.qr.rt(e):t.qr.et(e),n.isEqual(Il.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,Im(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Fl.EMPTY_BYTE_STRING,n.snapshotVersion)),xg(t,e);var r=new bp(n.target,e,1,n.sequenceNumber);Cg(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return pl("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,Pg(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function Pg(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r=this;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:if(!lp(e))throw e;return t.Or.add(1),[4,Sg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Im(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,ul.mG)(r,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return pl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,wg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Lg(t,e){return e().catch(function(n){return Pg(t,n,e)})}function Fg(t){return(0,ul.mG)(this,void 0,void 0,function(){var e,n,r,i,s;return(0,ul.Jh)(this,function(o){switch(o.label){case 0:e=_l(t),n=Hg(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return kg(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,Om(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Hg(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,Pg(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return Mg(e)&&Vg(e),[2]}})})}function Mg(t){return kg(t)&&!Hg(t).tr()&&t.kr.length>0}function Vg(t){Hg(t).start()}function jg(t){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){return Hg(t).Ar(),[2]})})}function Ug(t){return(0,ul.mG)(this,void 0,void 0,function(){var e,n,r;return(0,ul.Jh)(this,function(i){for(e=Hg(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function qg(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=vp.from(r,e,n),[4,Lg(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,Fg(t)];case 2:return s.sent(),[2]}})})}function Bg(t,e){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return e&&Hg(t).pr?[4,function(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return kd(r=e.code)&&r!==ll.ABORTED?(n=t.kr.shift(),Hg(t).sr(),[4,Lg(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Fg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Mg(t)&&Vg(t),[2]}})})}function Gg(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:return n=_l(t),e?(n.Or.delete(2),[4,wg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Sg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function zg(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=_l(t);return r.br(),new gg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ng.bind(null,t),Ri:Dg.bind(null,t),_r:Rg.bind(null,t)}),t.Mr.push(function(n){return(0,ul.mG)(e,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Ag(t)?Ig(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Og(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Hg(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=_l(t);return r.br(),new yg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:jg.bind(null,t),Ri:Bg.bind(null,t),Ir:Ug.bind(null,t),Tr:qg.bind(null,t)}),t.Mr.push(function(n){return(0,ul.mG)(e,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Fg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(pl("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var $g=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ip,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hl(ll.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Kg(t,e){if(ml("AsyncQueue",e+": "+t),lp(t))return new hl(ll.UNAVAILABLE,e+": "+t);throw t}var Zg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Kl.comparator(e.key,n.key)}:function(t,e){return Kl.comparator(t.key,e.key)},this.keyedMap=jd(),this.sortedSet=new Nd(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Qg=function(){function t(){this.Kr=new Nd(Kl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):vl():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Yg=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,Zg.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Wg=function(){this.Wr=void 0,this.listeners=[]},Jg=function(){this.queries=new sm(function(t){return Gh(t)},Bh),this.onlineState="Unknown",this.Gr=new Set};function Xg(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,ul.Jh)(this,function(c){switch(c.label){case 0:if(n=_l(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new Wg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Kg(a,"Initialization of query '"+zh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ry(n),[2]}})})}function ty(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,ul.Jh)(this,function(a){return n=_l(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function ey(t,e){for(var n=_l(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&ry(n)}function ny(t,e,n){var r=_l(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function ry(t){t.Gr.forEach(function(t){t.next()})}var iy=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Yg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Yg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),sy=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),oy=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return df(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?vf(this.R,t.document,!1):lh.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return uf(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new oy(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Gd()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return[4,Mm(this.localStore,new oy(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,Vm(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new bm(Object.assign({},this.progress),t))]}})})}}();var ay=function(t){this.key=t},uy=function(t){this.key=t},cy=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Gd(),this.mutatedKeys=Gd(),this.lo=$h(t),this.fo=new Zg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Qg,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=Ph(this.query)&&i.size===this.query.limit?i.last():null,c=Lh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Hh(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=f?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),Ph(this.query)||Lh(this.query))for(;o.size>this.query.limit;){var l=Ph(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vl()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new Yg(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Qg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Gd(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new uy(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new ay(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Gd();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Yg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ly=function(t,e,n){this.query=t,this.targetId=e,this.view=n},hy=function(t){this.key=t,this.bo=!1},dy=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new sm(function(t){return Gh(t)},Bh),this.Vo=new Map,this.So=new Set,this.Do=new Nd(Kl.comparator),this.Co=new Map,this.No=new Um,this.xo={},this.Fo=new Map,this.ko=Kp.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function fy(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,ul.Jh)(this,function(a){switch(a.label){case 0:return n=By(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Nm(n.localStore,Uh(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,py(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&Eg(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function py(t,e,n,r){return(0,ul.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c;return(0,ul.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,ul.mG)(this,void 0,void 0,function(){var i,s,o;return(0,ul.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Rm(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(Iy(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,Rm(t.localStore,e,!0)];case 1:return i=l.sent(),s=new cy(e,i.Bn),o=s._o(i.documents),a=Kd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),Iy(t,n,u.To),c=new ly(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function my(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return n=_l(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Bh(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Dm(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Tg(n.remoteStore,r.targetId),Cy(n,r.targetId)}).catch(Jp)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Cy(n,r.targetId),[4,Dm(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function gy(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,ul.Jh)(this,function(a){switch(a.label){case 0:r=Gy(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=_l(t),i=xl.now(),s=e.reduce(function(t,e){return t.add(e.key)},Gd());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=gd(c,n.get(c.key));null!=l&&o.push(new _d(c.key,l,ch(l.value.mapValue),hd.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Nd(El)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Oy(r,i.changes)];case 3:return a.sent(),[4,Fg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=Kg(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function yy(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:n=_l(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Am(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(bl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?bl(r.bo):t.removedDocuments.size>0&&(bl(r.bo),r.bo=!1))}),[4,Oy(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Jp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function vy(t,e,n){var r=_l(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=_l(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&ry(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function by(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u;return(0,ul.Jh)(this,function(c){switch(c.label){case 0:return(r=_l(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new Nd(Kl.comparator)).insert(s,lh.newNoDocument(s,Il.min())),a=Gd().add(s),u=new $d(Il.min(),new Map,new Pd(El),o,a),[4,yy(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),ky(r),[3,4];case 2:return[4,Dm(r.localStore,e,!1).then(function(){return Cy(r,e,n)}).catch(Jp)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function _y(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:n=_l(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,xm(n.localStore,e)];case 2:return i=s.sent(),Ty(n,r,null),Ey(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Oy(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,Jp(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function wy(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:r=_l(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=_l(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return bl(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),Ty(r,e,n),Ey(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Oy(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,Jp(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Sy(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,ul.Jh)(this,function(a){switch(a.label){case 0:kg((n=_l(t)).remoteStore)||pl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=_l(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=Kg(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function Ey(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Ty(t,e,n){var r=_l(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Cy(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||xy(t,e)})}function xy(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Tg(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ky(t))}function Iy(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof ay?(t.No.addReference(s.key,e),Ay(t,s)):s instanceof uy?(pl("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||xy(t,s.key)):vl()}}function Ay(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(pl("SyncEngine","New document in limbo: "+n),t.So.add(r),ky(t))}function ky(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Kl(Dl.fromString(e)),r=t.ko.next();t.Co.set(r,new hy(n)),t.Do=t.Do.insert(n,r),Eg(t.remoteStore,new bp(Uh(Rh(n.path)),r,2,cl.o))}}function Oy(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,ul.Jh)(this,function(a){switch(a.label){case 0:return r=_l(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=wm.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return(0,ul.Jh)(this,function(l){switch(l.label){case 0:n=_l(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return sp.forEach(e,function(e){return sp.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return sp.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!lp(r=l.sent()))throw r;return pl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Ny(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return(n=_l(t)).currentUser.isEqual(e)?[3,3]:(pl("SyncEngine","User change. New user:",e.toKey()),[4,Cm(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new hl(ll.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Oy(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Dy(t,e){var n=_l(t),r=n.Co.get(e);if(r&&r.bo)return Gd().add(r.key);var i=Gd(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function Ry(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return[4,Rm((n=_l(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Iy(n,e.targetId,i.To),i)]}})})}function Py(t){return(0,ul.mG)(this,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){return[2,Lm((e=_l(t)).localStore).then(function(t){return Oy(e,t)})]})})}function Ly(t,e,n,r){return(0,ul.mG)(this,void 0,void 0,function(){var i,s;return(0,ul.Jh)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=_l(t),r=_l(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):sp.resolve(null)})})}((i=_l(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,Fg(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ty(i,e,r||null),Ey(i,e),function(t,e){_l(_l(t)._n).Gt(e)}(i.localStore,e)):vl(),o.label=4;case 4:return[4,Oy(i,s)];case 5:return o.sent(),[3,7];case 6:pl("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function Fy(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,ul.Jh)(this,function(c){switch(c.label){case 0:return By(n=_l(t)),Gy(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,My(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Gg(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)Eg(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Cy(n,e),Dm(n.localStore,e,!0)}),Tg(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,My(n,a)];case 5:return c.sent(),function(t){var e=_l(t);e.Co.forEach(function(t,n){Tg(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Nd(Kl.comparator)}(n),n.$o=!1,[4,Gg(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function My(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,d,f,p;return(0,ul.Jh)(this,function(m){switch(m.label){case 0:n=_l(t),r=[],i=[],s=0,o=e,m.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,Nm(n.localStore,Uh(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,Ry(n,d)]):[3,6];case 4:(f=m.sent()).snapshot&&i.push(f.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Pm(n.localStore,a)];case 8:return p=m.sent(),[4,Nm(n.localStore,p)];case 9:return u=m.sent(),[4,py(n,Vy(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Vy(t){return Dh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jy(t){var e=_l(t);return _l(_l(e.localStore).persistence).fn()}function Uy(t,e,n,r){return(0,ul.mG)(this,void 0,void 0,function(){var i,s,o;return(0,ul.Jh)(this,function(a){switch(a.label){case 0:return(i=_l(t)).$o?(pl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Lm(i.localStore)];case 3:return s=a.sent(),o=$d.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Oy(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,Dm(i.localStore,e,!0)];case 6:return a.sent(),Cy(i,e,r),[3,8];case 7:vl(),a.label=8;case 8:return[2]}})})}function qy(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return(0,ul.Jh)(this,function(d){switch(d.label){case 0:if(!(r=By(t)).$o)return[3,10];i=0,s=e,d.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(pl("SyncEngine","Adding an already active target "+o),[3,5]):[4,Pm(r.localStore,o)]:[3,6];case 2:return a=d.sent(),[4,Nm(r.localStore,a)];case 3:return u=d.sent(),[4,py(r,Vy(a),u.targetId,!1)];case 4:d.sent(),Eg(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Dm(r.localStore,t,!1).then(function(){Tg(r.remoteStore,t),Cy(r,t)}).catch(Jp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function By(t){var e=_l(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=by.bind(null,e),e.vo._r=ey.bind(null,e.eventManager),e.vo.Mo=ny.bind(null,e.eventManager),e}function Gy(t){var e=_l(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_y.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wy.bind(null,e),e}var zy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return this.R=fg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Tm(this.persistence,new Sm,t.initialUser,this.R)},t.prototype.qo=function(t){return new $m(Zm.bs,this.R)},t.prototype.Bo=function(t){return new sg},t.prototype.terminate=function(){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Hy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,ul.ZT)(e,t),e.prototype.initialize=function(e){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Fm(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Gy(this.Ko.syncEngine)];case 4:return n.sent(),[4,Fg(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Tm(this.persistence,new Sm,t.initialUser,this.R)},e.prototype.Uo=function(t){return new em(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=vm(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?jp.withCacheSize(this.cacheSizeBytes):jp.DEFAULT;return new mm(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,hg(),dg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new sg},e}(zy),$y=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,ul.ZT)(e,t),e.prototype.initialize=function(e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r=this;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof ig?(this.sharedClientState.syncEngine={ui:Ly.bind(null,n),ai:Uy.bind(null,n),hi:qy.bind(null,n),fn:jy.bind(null,n),ci:Py.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,ul.mG)(r,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return[4,Fy(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=hg();if(!ig.yt(e))throw new hl(ll.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vm(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ig(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Hy),Ky=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n=this;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return vy(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ny.bind(null,this.syncEngine),[4,Gg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Jg},t.prototype.createDatastore=function(t){var e=fg(t.databaseInfo.databaseId),n=new lg(t.databaseInfo);return function(t,e,n){return new vg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return vy(o.syncEngine,t,0)},s=ag.yt()?new ag:new og,new _g(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new dy(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,ul.mG)(this,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return e=_l(t),pl("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Sg(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Zy=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Qy=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new ip,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new sy(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t,e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,ul.mG)(this,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t,e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,ul.mG)(this,void 0,void 0,function(){var e,n=this;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new hl(ll.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a;return(0,ul.Jh)(this,function(u){switch(u.label){case 0:return n=_l(t),r=mf(n.R)+"/documents",i={documents:e.map(function(t){return hf(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){bl(!!e.found);var n=df(t,e.found.name),r=uf(e.found.updateTime),i=new uh({mapValue:{fields:e.found.fields}});return lh.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){bl(!!e.missing),bl(!!e.readTime);var n=df(t,e.missing),r=uf(e.readTime);return lh.newNoDocument(n,r)}(t,e):vl()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());bl(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new xd(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t,e=this;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Kl.fromPath(n);e.mutations.push(new Id(r,e.precondition(r)))}),[4,function(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return n=_l(t),r=mf(n.R)+"/documents",i={writes:e.map(function(t){return bf(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw vl();e=Il.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new hl(ll.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?hd.updateTime(e):hd.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Il.min()))throw new hl(ll.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hd.updateTime(e)}return hd.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Yy=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new pg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,ul.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,ul.Jh)(this,function(r){return t=new Qy(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!zl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!kd(e)}return!1},t}(),Wy=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Qm.UNAUTHENTICATED,this.clientId=Sl.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,ul.mG)(r,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return pl("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new hl(ll.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new ip;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ul.mG)(t,void 0,void 0,function(){var t,n;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Kg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Jy(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),pl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,ul.mG)(i,void 0,void 0,function(){return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Cm(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Xy(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,tv(t)];case 1:return n=i.sent(),pl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,ul.mG)(this,void 0,void 0,function(){var n,r;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return(n=_l(t)).asyncQueue.verifyOperationInProgress(),pl("RemoteStore","RemoteStore received new credentials"),r=kg(n),n.Or.add(3),[4,Sg(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,wg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function tv(t){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(pl("FirestoreClient","Using default OfflineComponentProvider"),[4,Jy(t,new zy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function ev(t){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(pl("FirestoreClient","Using default OnlineComponentProvider"),[4,Xy(t,new Ky)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function nv(t){return tv(t).then(function(t){return t.persistence})}function rv(t){return tv(t).then(function(t){return t.localStore})}function iv(t){return ev(t).then(function(t){return t.remoteStore})}function sv(t){return ev(t).then(function(t){return t.syncEngine})}function ov(t){return(0,ul.mG)(this,void 0,void 0,function(){var e,n;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:return[4,ev(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=fy.bind(null,e.syncEngine),n.onUnlisten=my.bind(null,e.syncEngine),n)]}})})}function av(t,e,n){var r=this;void 0===n&&(n={});var i=new ip;return t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(r,void 0,void 0,function(){var r;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Zy({next:function(s){e.enqueueAndForget(function(){return ty(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new hl(ll.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new hl(ll.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new iy(Rh(n.path),s,{includeMetadataChanges:!0,so:!0});return Xg(t,o)},[4,ov(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function uv(t,e,n){var r=this;void 0===n&&(n={});var i=new ip;return t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(r,void 0,void 0,function(){var r;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Zy({next:function(n){e.enqueueAndForget(function(){return ty(t,o)}),n.fromCache&&"server"===r.source?i.reject(new hl(ll.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new iy(n,s,{includeMetadataChanges:!0,so:!0});return Xg(t,o)},[4,ov(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var cv=function(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a},lv=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),hv=new Map,dv=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},fv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Qm.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),pv=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),mv=function(){function t(t){var e=this;this.currentUser=Qm.UNAUTHENTICATED,this.oc=new ip,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){pl("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(pl("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(pl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(bl("string"==typeof n.accessToken),new dv(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,ul.mG)(n,void 0,void 0,function(){return(0,ul.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return bl(null===t||"string"==typeof t),new Qm(t)},t}(),gv=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Qm.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),yv=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new gv(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Qm.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function vv(t,e,n){if(!n)throw new hl(ll.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function bv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new hl(ll.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function _v(t,e,n,r){if(!0===e&&!0===r)throw new hl(ll.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function wv(t){if(!Kl.isDocumentKey(t))throw new hl(ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Sv(t){if(Kl.isDocumentKey(t))throw new hl(ll.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ev(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":vl()}function Tv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new hl(ll.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ev(t);throw new hl(ll.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Cv(t,e){if(e<=0)throw new hl(ll.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var xv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new hl(ll.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hl(ll.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,_v("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Iv=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,t instanceof lv?(this._databaseId=t,this._credentials=new fv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new hl(ll.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lv(t.options.projectId)}(t),this._credentials=new mv(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new hl(ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new hl(ll.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new fv;switch(t.type){case"gapi":var e=t.client;return bl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new yv(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new hl(ll.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=hv.get(this))&&(pl("ComponentProvider","Removing Datastore"),hv.delete(this),t.terminate()),Promise.resolve();var t},t}(),Av=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ov(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),kv=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ov=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Rh(r))||this)._path=r,i.type="collection",i}return(0,ul.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Av(this.firestore,null,new Kl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(kv);function Nv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Ws.m9)(t),vv("collection","path",e),t instanceof Iv)return Sv(n=Dl.fromString.apply(Dl,(0,ul.ev)([e],r))),new Ov(t,null,n);if(!(t instanceof Av||t instanceof Ov))throw new hl(ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Sv(n=Dl.fromString.apply(Dl,(0,ul.ev)([t.path],r)).child(Dl.fromString(e))),new Ov(t.firestore,null,n)}function Dv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Ws.m9)(t),1===arguments.length&&(e=Sl.u()),vv("doc","path",e),t instanceof Iv)return wv(n=Dl.fromString.apply(Dl,(0,ul.ev)([e],r))),new Av(t,null,new Kl(n));if(!(t instanceof Av||t instanceof Ov))throw new hl(ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return wv(n=t._path.child(Dl.fromString.apply(Dl,(0,ul.ev)([e],r)))),new Av(t.firestore,t instanceof Ov?t.converter:null,new Kl(n))}function Rv(t,e){return t=(0,Ws.m9)(t),e=(0,Ws.m9)(e),(t instanceof Av||t instanceof Ov)&&(e instanceof Av||e instanceof Ov)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Pv(t,e){return t=(0,Ws.m9)(t),e=(0,Ws.m9)(e),t instanceof kv&&e instanceof kv&&t.firestore===e.firestore&&Bh(t._query,e._query)&&t.converter===e.converter}var Lv=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new pg(this,"async_queue_retry"),this.Tc=function(){var e=dg();e&&pl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=dg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=dg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t,e=this;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!lp(t=n.sent()))throw t;return pl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,ml("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=$g.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&vl()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,ul.mG)(this,void 0,void 0,function(){var t;return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Fv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new ip,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Mv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Lv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,ul.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||jv(this),this._firestoreClient.terminate()},e}(Iv);function Vv(t){return t._firestoreClient||jv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function jv(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new cv(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Wy(t._credentials,t._queue,r)}function Uv(t,e,n){var r=this,i=new ip;return t.asyncQueue.enqueue(function(){return(0,ul.mG)(r,void 0,void 0,function(){var r;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,Jy(t,n)];case 1:return s.sent(),[4,Xy(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ll.FAILED_PRECONDITION||t.code===ll.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function qv(t){if(t._initialized||t._terminated)throw new hl(ll.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Bv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new hl(ll.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Gv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Fl.fromBase64String(e))}catch(e){throw new hl(ll.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Fl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),zv=function(t){this._methodName=t},Hv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new hl(ll.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new hl(ll.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return El(this._lat,t._lat)||El(this._long,t._long)},t}(),$v=/^__.*__$/,Kv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new _d(t,this.data,this.fieldMask,e,this.fieldTransforms):new bd(t,this.data,e,this.fieldTransforms)},t}(),Zv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new _d(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Qv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vl()}}var Yv=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return gb(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(Qv(this.Cc)&&$v.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),Wv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||fg(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Yv({Cc:t,methodName:e,Bc:n,path:Pl.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Jv(t){var e=t._freezeSettings(),n=fg(t._databaseId);return new Wv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xv(t,e,n,r,i,s){void 0===s&&(s={});var o=t.qc(s.merge||s.mergeFields?2:0,e,n,i);db("Data must be an object, but it was:",o,r);var a,u,c=lb(r,o);if(s.merge)a=new Ll(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,d=s.mergeFields;h<d.length;h++){var f=fb(e,d[h],n);if(!o.contains(f))throw new hl(ll.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");yb(l,f)||l.push(f)}a=new Ll(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new Kv(new uh(c),a,u)}var tb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ul.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(zv);function eb(t,e,n){return new Yv({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var nb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ul.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new cd(t.path,new ed)},e.prototype.isEqual=function(t){return t instanceof e},e}(zv),rb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,ul.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=eb(this,t,!0),n=this.Uc.map(function(t){return cb(t,e)}),r=new nd(n);return new cd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(zv),ib=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,ul.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=eb(this,t,!0),n=this.Uc.map(function(t){return cb(t,e)}),r=new id(n);return new cd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(zv),sb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,ul.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new od(t.R,Yh(t.R,this.Qc));return new cd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(zv);function ob(t,e,n,r){var i=t.qc(1,e,n);db("Data must be an object, but it was:",i,r);var s=[],o=uh.empty();kl(r,function(t,r){var a=mb(e,t,n);r=(0,Ws.m9)(r);var u=i.$c(a);if(r instanceof tb)s.push(a);else{var c=cb(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new Ll(s);return new Zv(o,a,i.fieldTransforms)}function ab(t,e,n,r,i,s){var o=t.qc(1,e,n),a=[fb(e,r,n)],u=[i];if(s.length%2!=0)throw new hl(ll.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(fb(e,s[c])),u.push(s[c+1]);for(var l=[],h=uh.empty(),d=a.length-1;d>=0;--d)if(!yb(l,a[d])){var f=a[d],p=u[d];p=(0,Ws.m9)(p);var m=o.$c(f);if(p instanceof tb)l.push(f);else{var g=cb(p,m);null!=g&&(l.push(f),h.set(f,g))}}var y=new Ll(l);return new Zv(h,y,o.fieldTransforms)}function ub(t,e,n,r){return void 0===r&&(r=!1),cb(n,t.qc(r?4:3,e))}function cb(t,e){if(hb(t=(0,Ws.m9)(t)))return db("Unsupported field value:",e,t),lb(t,e);if(t instanceof zv)return function(t,e){if(!Qv(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=cb(s[i],e.Oc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Ws.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=xl.fromDate(t);return{timestampValue:sf(e.R,n)}}if(t instanceof xl)return n=new xl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:sf(e.R,n)};if(t instanceof Hv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gv)return{bytesValue:of(e.R,t._byteString)};if(t instanceof Av){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:cf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Ev(t))}(t,e)}function lb(t,e){var n={};return Ol(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kl(t,function(t,r){var i=cb(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function hb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof xl||t instanceof Hv||t instanceof Gv||t instanceof Av||t instanceof zv)}function db(t,e,n){if(!hb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ev(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function fb(t,e,n){if((e=(0,Ws.m9)(e))instanceof Bv)return e._internalPath;if("string"==typeof e)return mb(t,e);throw gb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var pb=new RegExp("[~\\*/\\[\\]]");function mb(t,e,n){if(e.search(pb)>=0)throw gb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Bv.bind.apply(Bv,(0,ul.ev)([void 0],e.split(".")))))._internalPath}catch(go){throw gb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function gb(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new hl(ll.INVALID_ARGUMENT,(a+=". ")+t+u)}function yb(t,e){return t.some(function(t){return t.isEqual(e)})}var vb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Av(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new bb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(_b("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),bb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ul.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(vb);function _b(t,e){return"string"==typeof e?mb(t,e):e instanceof Bv?e._internalPath:e._delegate._internalPath}var wb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Sb=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return(0,ul.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Eb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(_b("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(vb),Eb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ul.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Sb),Tb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new wb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Eb(n._firestore,n._userDataWriter,r.key,r,new wb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new hl(ll.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Eb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new wb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Eb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new wb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Cb(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Cb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vl()}}function xb(t,e){return t instanceof Sb&&e instanceof Sb?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Tb&&e instanceof Tb&&t._firestore===e._firestore&&Pv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Ib(t){if(Lh(t)&&0===t.explicitOrderBy.length)throw new hl(ll.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ab=function(){};function kb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var Ob=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Kc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,ul.ZT)(e,t),e.prototype._apply=function(t){var e=Jv(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new hl(ll.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){Mb(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(Fb(r,t,l[c]));a={arrayValue:{values:u}}}else a=Fb(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Mb(o,s),a=ub(n,"where",o,"in"===s||"not-in"===s);var h=gh.create(i,s,a);return function(t,e){if(e.g()){var n=Mh(t);if(null!==n&&!n.isEqual(e.field))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Fh(t);null!==r&&Vb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new hl(ll.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Kc,this.jc,this.Wc);return new kv(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Ab),Nb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kc=e,r.Gc=n,r.type="orderBy",r}return(0,ul.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new hl(ll.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new hl(ll.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ih(e,n);return function(t,e){if(null===Fh(t)){var n=Mh(t);null!==n&&Vb(0,n,e.field)}}(t,r),r}(t._query,this.Kc,this.Gc);return new kv(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Nh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Ab),Db=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,ul.ZT)(e,t),e.prototype._apply=function(t){return new kv(t.firestore,t.converter,qh(t._query,this.zc,this.Hc))},e}(Ab),Rb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,ul.ZT)(e,t),e.prototype._apply=function(t){var e=Lb(t,this.type,this.Jc,this.Yc);return new kv(t.firestore,t.converter,function(t,e){return new Nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Ab),Pb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,ul.ZT)(e,t),e.prototype._apply=function(t){var e=Lb(t,this.type,this.Jc,this.Yc);return new kv(t.firestore,t.converter,function(t,e){return new Nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Ab);function Lb(t,e,n,r){if(n[0]=(0,Ws.m9)(n[0]),n[0]instanceof vb)return function(t,e,n,r,i){if(!r)throw new hl(ll.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=jh(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push(eh(e,r.key));else{var c=r.data.field(u.field);if(ql(c))throw new hl(ll.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new hl(ll.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new Ch(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Jv(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new hl(ll.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new hl(ll.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Vh(t)&&-1!==c.indexOf("/"))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Dl.fromString(c));if(!Kl.isDocumentKey(l))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Kl(l);a.push(eh(e,h))}else{var d=ub(n,r,c);a.push(d)}}return new Ch(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function Fb(t,e,n){if("string"==typeof(n=(0,Ws.m9)(n))){if(""===n)throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vh(e)&&-1!==n.indexOf("/"))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Dl.fromString(n));if(!Kl.isDocumentKey(r))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return eh(t,new Kl(r))}if(n instanceof Av)return eh(t,n._key);throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ev(n)+".")}function Mb(t,e){if(!Array.isArray(t)||0===t.length)throw new hl(ll.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new hl(ll.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Vb(t,e,n){if(!n.isEqual(e))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var jb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Zl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ul(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw vl()}},t.prototype.convertObject=function(t,e){var n=this,r={};return kl(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Hv(jl(t.latitude),jl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Bl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Gl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Vl(t);return new xl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Dl.fromString(t);bl(Pf(n));var r=new lv(n.get(1),n.get(3)),i=new Kl(n.popFirst(5));return r.isEqual(e)||ml("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Ub(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var qb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,ul.ZT)(e,t),e.prototype.convertBytes=function(t){return new Gv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Av(this.firestore,null,e)},e}(jb),Bb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Jv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Gb(t,this._firestore),i=Ub(r.converter,e,n),s=Xv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,hd.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=Gb(t,this._firestore);return s="string"==typeof(e=(0,Ws.m9)(e))||e instanceof Bv?ab(this._dataReader,"WriteBatch.update",o._key,e,n,r):ob(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,hd.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Gb(t,this._firestore);return this._mutations=this._mutations.concat(new xd(e._key,hd.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new hl(ll.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Gb(t,e){if((t=(0,Ws.m9)(t)).firestore!==e)throw new hl(ll.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var zb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,ul.ZT)(e,t),e.prototype.convertBytes=function(t){return new Gv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Av(this.firestore,null,e)},e}(jb);function Hb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Tv(t,Av);var s=Tv(t.firestore,Mv),o=Jv(s);return Kb(s,[("string"==typeof(e=(0,Ws.m9)(e))||e instanceof Bv?ab(o,"updateDoc",t._key,e,n,r):ob(o,"updateDoc",t._key,e)).toMutation(t._key,hd.exists(!0))])}function $b(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,Ws.m9)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Fv(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(Fv(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Av)c=Tv(t.firestore,Mv),l=Rh(t._key.path),u={next:function(e){i[a]&&i[a](Zb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Tv(t,kv);c=Tv(f.firestore,Mv),l=f._query;var p=new zb(c);u={next:function(t){i[a]&&i[a](new Tb(c,p,f,t))},error:i[a+1],complete:i[a+2]},Ib(t._query)}return function(t,e,n,r){var i=this,s=new Zy(r),o=new iy(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(i,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return e=Xg,[4,ov(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(i,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return e=ty,[4,ov(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(Vv(c),l,h,u)}function Kb(t,e){return function(t,e){var n=this,r=new ip;return t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(n,void 0,void 0,function(){var n;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return n=gy,[4,sv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Vv(t),e)}function Zb(t,e,n){var r=n.docs.get(e._key),i=new zb(t);return new Sb(t,i,e._key,r,new wb(n.hasPendingWrites,n.fromCache),e.converter)}var Qb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,ul.ZT)(e,t),e.prototype.get=function(e){var n=this,r=Gb(e,this._firestore),i=new zb(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Sb(n._firestore,i,r._key,t._document,new wb(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Jv(t)}return t.prototype.get=function(t){var e=this,n=Gb(t,this._firestore),r=new qb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return vl();var i=t[0];if(i.isFoundDocument())return new vb(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new vb(e._firestore,r,n._key,null,n.converter);throw vl()})},t.prototype.set=function(t,e,n){var r=Gb(t,this._firestore),i=Ub(r.converter,e,n),s=Xv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=Gb(t,this._firestore);return s="string"==typeof(e=(0,Ws.m9)(e))||e instanceof Bv?ab(this._dataReader,"Transaction.update",o._key,e,n,r):ob(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=Gb(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Yb(){if("undefined"==typeof Uint8Array)throw new hl(ll.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Wb(){if("undefined"==typeof atob)throw new hl(ll.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Jb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Wb(),new t(Gv.fromBase64String(e))},t.fromUint8Array=function(e){return Yb(),new t(Gv.fromUint8Array(e))},t.prototype.toBase64=function(){return Wb(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Yb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Xb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){qv(t=Tv(t,Mv));var n=Vv(t),r=t._freezeSettings(),i=new Ky;return Uv(n,i,new Hy(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){qv(t=Tv(t,Mv));var e=Vv(t),n=t._freezeSettings(),r=new Ky;return Uv(e,r,new $y(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new hl(ll.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ip;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ul.mG)(e,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,ul.mG)(this,void 0,void 0,function(){return(0,ul.Jh)(this,function(e){switch(e.label){case 0:return ap.yt()?[4,ap.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(vm(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),t_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof lv||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||gl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Tv(t,Iv))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&gl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=(0,Ws.Sg)(r.mockUserToken),o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new hl(ll.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new pv(new dv(s,new Qm(o)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,ul.mG)(e,void 0,void 0,function(){var e,n;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:return[4,nv(t)];case 1:return e=r.sent(),[4,iv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=_l(t);return e.Or.delete(0),wg(e)}(n))]}})})})}(Vv(Tv(this._delegate,Mv)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,ul.mG)(e,void 0,void 0,function(){var e,n;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:return[4,nv(t)];case 1:return e=r.sent(),[4,iv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,ul.mG)(this,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return(e=_l(t)).Or.add(0),[4,Sg(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Vv(Tv(this._delegate,Mv)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&_v("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ip;return t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(e,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(r){switch(r.label){case 0:return e=Sy,[4,sv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Vv(Tv(this._delegate,Mv)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Zy(e);return t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(n,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){_l(t).Gr.add(e),e.next()},[4,ov(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(n,void 0,void 0,function(){var e;return(0,ul.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){_l(t).Gr.delete(e)},[4,ov(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Vv(t=Tv(t,Mv)),Fv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new hl(ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new p_(this,Nv(this._delegate,t))}catch(t){throw o_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new s_(this,Dv(this._delegate,t))}catch(t){throw o_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new h_(this,function(t,e){if(t=Tv(t,Iv),vv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new hl(ll.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new kv(t,null,function(t){return new Nh(Dl.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw o_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ip;return t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(n,void 0,void 0,function(){var n;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return ev(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Yy(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Vv(t),function(n){return e(new Qb(t,n))})}(this._delegate,function(n){return t(new n_(e,n))})},t.prototype.batch=function(){var t=this;return Vv(this._delegate),new r_(new Bb(this._delegate,function(e){return Kb(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new hl(ll.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new hl(ll.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),e_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,ul.ZT)(e,t),e.prototype.convertBytes=function(t){return new Jb(new Gv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return s_.tu(e,this.firestore,null)},e}(jb),n_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new e_(t)}return t.prototype.get=function(t){var e=this,n=m_(t);return this._delegate.get(n).then(function(t){return new c_(e._firestore,new Sb(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=m_(t);return n?(bv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=m_(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,ul.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=m_(t);return this._delegate.delete(e),this},t}(),r_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=m_(t);return n?(bv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=m_(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,ul.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=m_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),i_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Eb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new l_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new e_(e),n),i.set(n,s)),s},t}();i_.nu=new WeakMap;var s_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new e_(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new hl(ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Av(n._delegate,r,new Kl(e)))},t.tu=function(e,n,r){return new t(n,new Av(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new p_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new p_(this.firestore,Nv(this._delegate,t))}catch(t){throw o_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,Ws.m9)(t))instanceof Av&&Rv(this._delegate,t)},t.prototype.set=function(t,e){e=bv("DocumentReference.set",e);try{return function(t,e,n){t=Tv(t,Av);var r=Tv(t.firestore,Mv),i=Ub(t.converter,e,n);return Kb(r,[Xv(Jv(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,hd.none())])}(this._delegate,t,e)}catch(t){throw o_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Hb(this._delegate,t):Hb.apply(void 0,(0,ul.ev)([this._delegate,t,e],n))}catch(t){throw o_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Kb(Tv((t=this._delegate).firestore,Mv),[new xd(t._key,hd.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=a_(e),i=u_(e,function(e){return new c_(t.firestore,new Sb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return $b(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Tv(t,Av);var e=Tv(t.firestore,Mv),n=Vv(e),r=new zb(e);return function(t,e){var n=this,r=new ip;return t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(n,void 0,void 0,function(){var n;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i;return(0,ul.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=_l(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new hl(ll.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=Kg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,rv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Sb(e,r,t._key,n,new wb(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Tv(t,Av);var e=Tv(t.firestore,Mv);return av(Vv(e),t._key,{source:"server"}).then(function(n){return Zb(e,t,n)})}(this._delegate):function(t){t=Tv(t,Av);var e=Tv(t.firestore,Mv);return av(Vv(e),t._key).then(function(n){return Zb(e,t,n)})}(this._delegate)).then(function(t){return new c_(e.firestore,new Sb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?i_.eu(this.firestore,e):null))},t}();function o_(t,e,n){return t.message=t.message.replace(e,n),t}function a_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Fv(r))return r}return{}}function u_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Fv(t[0])?t[0]:Fv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var c_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new s_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return xb(this._delegate,t._delegate)},t}(),l_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ul.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(c_),h_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new e_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,kb(this._delegate,function(t,e,n){var r=e,i=_b("where",t);return new Ob(i,r,n)}(e,n,r)))}catch(e){throw o_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,kb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=_b("orderBy",t);return new Nb(r,n)}(e,n)))}catch(e){throw o_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,kb(this._delegate,function(t){return Cv("limit",t),new Db("limit",t,"F")}(e)))}catch(e){throw o_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,kb(this._delegate,function(t){return Cv("limitToLast",t),new Db("limitToLast",t,"L")}(e)))}catch(e){throw o_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,kb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rb("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw o_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,kb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rb("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw o_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,kb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pb("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw o_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,kb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pb("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw o_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Pv(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Tv(t,kv);var e=Tv(t.firestore,Mv),n=Vv(e),r=new zb(e);return function(t,e){var n=this,r=new ip;return t.asyncQueue.enqueueAndForget(function(){return(0,ul.mG)(n,void 0,void 0,function(){var n;return(0,ul.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,ul.mG)(this,void 0,void 0,function(){var r,i,s,o,a;return(0,ul.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Rm(t,e,!0)];case 1:return a=u.sent(),r=new cy(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=Kg(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,rv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Tb(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Tv(t,kv);var e=Tv(t.firestore,Mv),n=Vv(e),r=new zb(e);return uv(n,t._query,{source:"server"}).then(function(n){return new Tb(e,r,t,n)})}(this._delegate):function(t){t=Tv(t,kv);var e=Tv(t.firestore,Mv),n=Vv(e),r=new zb(e);return Ib(t._query),uv(n,t._query).then(function(n){return new Tb(e,r,t,n)})}(this._delegate)).then(function(t){return new f_(e.firestore,new Tb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=a_(e),i=u_(e,function(e){return new f_(t.firestore,new Tb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return $b(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?i_.eu(this.firestore,e):null))},t}(),d_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new l_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),f_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new h_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new l_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new d_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new l_(n._firestore,r))})},t.prototype.isEqual=function(t){return xb(this._delegate,t._delegate)},t}(),p_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,ul.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new s_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new s_(this.firestore,void 0===t?Dv(this._delegate):Dv(this._delegate,t))}catch(t){throw o_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Tv(t.firestore,Mv),r=Dv(t),i=Ub(t.converter,e);return Kb(n,[Xv(Jv(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,hd.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new s_(e.firestore,t)})},e.prototype.isEqual=function(t){return Rv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?i_.eu(this.firestore,t):null))},e}(h_);function m_(t){return Tv(t,Av)}var g_,y_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Bv.bind.apply(Bv,(0,ul.ev)([void 0],t)))}return t.documentId=function(){return new t(Pl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,Ws.m9)(t))instanceof Bv&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),v_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new nb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new tb("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rb("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ib("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new sb("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),b_=n(5119),__={Firestore:t_,GeoPoint:Hv,Timestamp:xl,Blob:Jb,Transaction:n_,WriteBatch:r_,DocumentReference:s_,DocumentSnapshot:c_,Query:h_,QueryDocumentSnapshot:l_,QuerySnapshot:f_,CollectionReference:p_,FieldPath:y_,FieldValue:v_,setLogLevel:function(t){dl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new b_.wA("firestore",function(t){return function(t,e){return new t_(t,new Mv(t,e),new Xb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},__)))})(g_=Ys.Z),g_.registerVersion("@firebase/firestore","2.3.7");var w_=n(1906),S_=n(8489),E_=n(9291);class T_ extends qe.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new C_(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new Be.N;if(this.isStopped||this.hasError?s=qn.w.EMPTY:(this.observers.push(t),s=new E_.W(this,t)),r&&t.add(t=new Ks.ht(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||S_.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class C_{constructor(t,e){this.time=t,this.value=e}}function x_(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new T_(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function I_(t,e){return e?un(()=>t,e):un(()=>t)}var A_=n(2893);const k_=new r.OlP("angularfire2.auth.use-emulator"),O_=new r.OlP("angularfire2.auth.settings"),N_=new r.OlP("angularfire2.auth.tenant-id"),D_=new r.OlP("angularfire2.auth.langugage-code"),R_=new r.OlP("angularfire2.auth.use-device-language"),P_=new r.OlP("angularfire.auth.persistence");let L_=(()=>{class t{constructor(t,e,r,i,s,o,a,u,c,l){const h=new Zs.HU(i),d=(0,Zs.ss)(h),f=new qe.xQ,p=(0,Ue.of)(void 0).pipe((0,Ks.QV)(h.outsideAngular),un(()=>i.runOutsideAngular(()=>n.e(420).then(n.bind(n,7420)))),(0,xt.U)(()=>(0,Zs.on)(t,i,e)),(0,xt.U)(t=>i.runOutsideAngular(()=>{const e=s,n=o;return(0,Zs.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),x_({bufferSize:1,refCount:!1}));if(G(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ue.of)(null);else{p.pipe(Vn()).subscribe();const t=p.pipe(un(t=>t.getRedirectResult().then(t=>t,()=>null)),d,x_({bufferSize:1,refCount:!1})),e=t=>new Tt.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(un(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(un(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(I_(n),(0,A_.R)(h.outsideAngular),(0,Ks.QV)(h.insideAngular)),this.user=t.pipe(I_(r),(0,A_.R)(h.outsideAngular),(0,Ks.QV)(h.insideAngular)),this.idToken=this.user.pipe(un(t=>t?(0,Et.D)(t.getIdToken()):(0,Ue.of)(null))),this.idTokenResult=this.user.pipe(un(t=>t?(0,Et.D)(t.getIdTokenResult()):(0,Ue.of)(null))),this.credential=(0,w_.T)(t,f,this.authState.pipe(bn(t=>!t))).pipe((0,xt.U)(t=>(null==t?void 0:t.user)?t:null),(0,A_.R)(h.outsideAngular),(0,Ks.QV)(h.insideAngular))}return(0,Zs.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Zs.Dh),r.LFG(Zs.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(k_,8),r.LFG(O_,8),r.LFG(N_,8),r.LFG(D_,8),r.LFG(R_,8),r.LFG(P_,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Zs.Dh),r.LFG(Zs.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(k_,8),r.LFG(O_,8),r.LFG(N_,8),r.LFG(D_,8),r.LFG(R_,8),r.LFG(P_,8))},token:t,providedIn:"any"}),t})();function F_(t,e){return function(t,e=Us.z){return new Tt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function M_(t,e){return F_(t,e).pipe((0,xt.U)(t=>({payload:t,type:"query"})))}function V_(t,e){return M_(t,e).pipe(mn(void 0),qs(),(0,xt.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function j_(t,e,n){return V_(t,n).pipe(gn((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return U_(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return U_(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return U_(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),zs(),(0,xt.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function U_(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function q_(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(0,Zs.GT)(L_,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class B_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=V_(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,xt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(mn(void 0),qs(),bn(([t,e])=>e.length>0||!t),(0,xt.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(gn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=q_(t);return j_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return M_(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Et.D)(this.query.get(t)).pipe((0,Ks.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new G_(this.ref.doc(t),this.afs)}}class G_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Q_(n,e);return new B_(r,i,this.afs)}snapshotChanges(){return F_(this.ref,this.afs.schedulers.outsideAngular).pipe(mn(void 0),qs(),(0,xt.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,xt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Et.D)(this.ref.get(t)).pipe((0,Ks.QV)(this.afs.schedulers.insideAngular))}}class z_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?V_(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),bn(t=>t.length>0),this.afs.keepUnstableUntilFirst):V_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(gn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=q_(t);return j_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return M_(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Et.D)(this.query.get(t)).pipe((0,Ks.QV)(this.afs.schedulers.insideAngular))}}const H_=new r.OlP("angularfire2.enableFirestorePersistence"),$_=new r.OlP("angularfire2.firestore.persistenceSettings"),K_=new r.OlP("angularfire2.firestore.settings"),Z_=new r.OlP("angularfire2.firestore.use-emulator");function Q_(t,e=(t=>t)){return{query:e(t),ref:t}}let Y_=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.schedulers=new Zs.HU(s),this.keepUnstableUntilFirst=(0,Zs.ss)(this.schedulers);const c=(0,Zs.on)(t,s,e);!Qs.Z.auth&&u&&(0,Zs.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,Zs.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=s.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!G(i)){const e=()=>{try{return(0,Et.D)(t.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(g_){return"undefined"!=typeof console&&console.warn(g_),(0,Ue.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,Ue.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Q_(n,e),s=this.schedulers.ngZone.run(()=>r);return new B_(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new z_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new G_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Zs.Dh),r.LFG(Zs.xv,8),r.LFG(H_,8),r.LFG(K_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG($_,8),r.LFG(Z_,8),r.LFG(k_,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Zs.Dh),r.LFG(Zs.xv,8),r.LFG(H_,8),r.LFG(K_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG($_,8),r.LFG(Z_,8),r.LFG(k_,8))},token:t,providedIn:"any"}),t})(),W_=(()=>{class t{constructor(t){this.firestore=t,this.loverName="Annie",this.docId=69,this.walletDoc=t.doc(`wallets/${this.docId}`),this.wallet=this.walletDoc.valueChanges()}getWalletOb(){return this.wallet}balanceAdd(t){var e=this;return this.walletDoc.ref.firestore.runTransaction(function(){var n=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(t){js(s,r,i,o,a,"next",t)}function a(t){js(s,r,i,o,a,"throw",t)}o(void 0)})}}(function*(n){const r=(yield n.get(e.walletDoc.ref)).data().balance+t;yield n.update(e.walletDoc.ref,{balance:r})});return function(t){return n.apply(this,arguments)}}()).then(t=>{console.log("wallet service: transaction successful")}).catch(t=>{console.error("wallet service: transaction failled",t)})}updateBalance(t){return this.walletDoc.update({balance:t})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Y_))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class J_{}const X_="*";function tw(t,e){return{type:7,name:t,definitions:e,options:{}}}function ew(t,e=null){return{type:4,styles:e,timings:t}}function nw(t,e=null){return{type:2,steps:t,options:e}}function rw(t){return{type:6,styles:t,offset:null}}function iw(t,e,n){return{type:0,name:t,styles:e,options:n}}function sw(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function ow(t){Promise.resolve(null).then(t)}class aw{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ow(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class uw{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?ow(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function cw(){return"undefined"!=typeof window&&void 0!==window.document}function lw(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function hw(t){switch(t.length){case 0:return new aw;case 1:return t[0];default:return new uw(t)}}function dw(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case X_:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function fw(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&pw(n,"start",t)));break;case"done":t.onDone(()=>r(n&&pw(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&pw(n,"destroy",t)))}}function pw(t,e,n){const r=n.totalTime,i=mw(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function mw(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function gw(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function yw(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let vw=(t,e)=>!1,bw=(t,e)=>!1,_w=(t,e,n)=>[];const ww=lw();(ww||"undefined"!=typeof Element)&&(vw=cw()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),bw=(()=>{if(ww||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):bw}})(),_w=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let Sw=null,Ew=!1;function Tw(t){Sw||(Sw=("undefined"!=typeof document?document.body:null)||{},Ew=!!Sw.style&&"WebkitAppearance"in Sw.style);let e=!0;return Sw.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Sw.style,!e&&Ew)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Sw.style),e}const Cw=bw,xw=vw,Iw=_w;function Aw(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let kw=(()=>{class t{validateStyleProperty(t){return Tw(t)}matchesElement(t,e){return Cw(t,e)}containsElement(t,e){return xw(t,e)}query(t,e,n){return Iw(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new aw(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Ow=(()=>{class t{}return t.NOOP=new kw,t})();const Nw="ng-enter",Dw="ng-leave",Rw="ng-trigger",Pw=".ng-trigger",Lw="ng-animating",Fw=".ng-animating";function Mw(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Vw(parseFloat(e[1]),e[2])}function Vw(t,e){switch(e){case"s":return 1e3*t;default:return t}}function jw(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Vw(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=Vw(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Uw(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function qw(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Uw(t,n);return n}function Bw(t,e,n){return n?e+":"+n+";":""}function Gw(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Bw(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Bw(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function zw(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Jw(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),lw()&&Gw(t))}function Hw(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Jw(e);t.style[n]=""}),lw()&&Gw(t))}function $w(t){return Array.isArray(t)?1==t.length?t[0]:nw(t):t}const Kw=new RegExp("{{\\s*(.+?)\\s*}}","g");function Zw(t){let e=[];if("string"==typeof t){let n;for(;n=Kw.exec(t);)e.push(n[1]);Kw.lastIndex=0}return e}function Qw(t,e,n){const r=t.toString(),i=r.replace(Kw,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Yw(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Ww=/-+([a-z0-9])/g;function Jw(t){return t.replace(Ww,(...t)=>t[1].toUpperCase())}function Xw(t,e){return 0===t||0===e}function tS(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=nS(t,e)})}}return e}function eS(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function nS(t,e){return window.getComputedStyle(t)[e]}const rS="*";function iS(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(aS(i,o)),"<"!=s[0]||i==rS&&o==rS||e.push(aS(o,i))}(t,n,e)):n.push(t),n}const sS=new Set(["true","1"]),oS=new Set(["false","0"]);function aS(t,e){const n=sS.has(t)||oS.has(t),r=sS.has(e)||oS.has(e);return(i,s)=>{let o=t==rS||t==i,a=e==rS||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?sS.has(t):oS.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?sS.has(e):oS.has(e)),o&&a}}const uS=new RegExp("s*:selfs*,?","g");function cS(t,e,n){return new lS(t).build(e,n)}class lS{constructor(t){this._driver=t}build(t,e){const n=new hS(e);return this._resetContextStyleTimingState(n),eS(this,$w(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(dS(t)){const e=t;Object.keys(e).forEach(t=>{Zw(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Yw(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=eS(this,$w(t.animation),e);return{type:1,matchers:iS(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:fS(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>eS(this,t,e)),options:fS(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=eS(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:fS(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return pS(jw(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=pS(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||jw(r,e),pS(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:rw({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=rw(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==X_?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(dS(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Zw(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(dS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(dS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:eS(this,$w(t.animation),e),options:fS(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:fS(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:fS(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(uS,"")),[t=t.replace(/@\*/g,Pw).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Fw),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,gw(e.collectedStyles,e.currentQuerySelector,{});const o=eS(this,$w(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:fS(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:jw(t.timings,e.errors,!0);return{type:12,animation:eS(this,$w(t.animation),e),timings:n,options:null}}}class hS{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function dS(t){return!Array.isArray(t)&&"object"==typeof t}function fS(t){var e;return t?(t=Uw(t)).params&&(t.params=(e=t.params)?Uw(e):null):t={},t}function pS(t,e,n){return{duration:t,delay:e,easing:n}}function mS(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class gS{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const yS=new RegExp(":enter","g"),vS=new RegExp(":leave","g");function bS(t,e,n,r,i,s={},o={},a,u,c=[]){return(new _S).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class _S{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new gS;const l=new SS(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),eS(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[mS(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Mw(n.duration):null,s=null!=n.delay?Mw(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),eS(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=wS);const t=Mw(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>eS(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Mw(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),eS(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return jw(e.params?Qw(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Mw(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=wS);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),eS(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;eS(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const wS={};class SS{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new ES(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Mw(n.duration)),null!=n.delay&&(r.delay=Mw(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Qw(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new SS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=wS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new TS(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(yS,"."+this._enterClassName)).replace(vS,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class ES{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ES(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||X_,this._currentKeyframe[t]=X_}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=X_})):qw(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=Qw(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:X_),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=qw(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==X_&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Yw(t.values()):[],s=e.size?Yw(e.values()):[];if(n){const t=r[0],e=Uw(t);t.offset=0,e.offset=1,r=[t,e]}return mS(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class TS extends ES{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=qw(t[0],!1);a.offset=0,i.push(a);const u=qw(t[0],!1);u.offset=CS(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=qw(t[r],!1);o.offset=CS((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return mS(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function CS(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class xS{}class IS extends xS{normalizePropertyName(t,e){return Jw(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(AS[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const AS=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function kS(t,e,n,r,i,s,o,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const OS={};class NS{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||OS,d=this.buildStyles(n,o&&o.params||OS,l),f=a&&a.params||OS,p=this.buildStyles(r,f,l),m=new Set,g=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=c?[]:bS(t,e,this.ast.animation,i,s,d,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return kS(e,this._triggerName,n,r,v,d,p,[],[],g,y,w,l);_.forEach(t=>{const n=t.element,r=gw(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=gw(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const S=Yw(m.values());return kS(e,this._triggerName,n,r,v,d,p,_,S,g,y,w)}}class DS{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Uw(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=Qw(s,r,e)),n[t]=s})}}),n}}class RS{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new DS(t.style,t.options&&t.options.params||{})}),PS(this.states,"true","1"),PS(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new NS(t,e,this.states))}),this.fallbackTransition=new NS(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function PS(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const LS=new gS;class FS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=cS(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=dw(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=bS(this._driver,e,i,Nw,Dw,{},{},n,LS,r),s.forEach(t=>{const e=gw(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,X_)})});const a=hw(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=mw(e,"","","");return fw(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const MS="ng-animate-queued",VS="ng-animate-disabled",jS=".ng-animate-disabled",US=[],qS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},BS={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class GS{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Uw(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const zS="void",HS=new GS(zS);class $S{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,XS(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=gw(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=gw(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(XS(t,Rw),XS(t,"ng-trigger-"+e),a[e]=HS),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new ZS(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(XS(t,Rw),XS(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new GS(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=HS),u.value!==zS&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Hw(t,n),zw(t,r)})}return}const c=gw(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(XS(t,MS),s.onStart(()=>{tE(t,MS)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Pw,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,zS,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&hw(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||HS,a=new GS(zS),u=new ZS(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==qS||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){XS(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=mw(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,fw(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class KS{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new $S(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(QS(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!QS(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),XS(t,VS)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),tE(t,VS))}removeNode(t,e,n,r){if(QS(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return QS(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Pw,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Fw,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return hw(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=qS,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,jS)&&this.markElementAsDisabled(t,!1),this.driver.query(t,jS,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)XS(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?hw(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new gS,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=JS(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=Nw+p++;f.set(e,n),t.forEach(t=>XS(t,n))});const m=[],g=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const t=this.collectedLeaveElements[O],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=JS(h,Array.from(g));b.forEach((t,e)=>{const n=Dw+p++;v.set(e,n),t.forEach(t=>XS(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>tE(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>tE(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>Hw(i,p.fromStyles)),e.onDestroy(()=>zw(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Hw(i,p.fromStyles)),e.onDestroy(()=>zw(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>gw(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,E=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{gw(S,e,[]).push(t),t.destroy()})});const T=m.filter(t=>rE(t,a,u)),C=new Map;WS(C,this.driver,y,u,X_).forEach(t=>{rE(t,a,u)&&T.push(t)});const x=new Map;d.forEach((t,e)=>{WS(x,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=C.get(t),n=x.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const I=[],A=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>zw(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,i,x,C);if(s.setRealPlayer(n),t===k)I.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=hw(e)),r.push(s)}}else Hw(e,o.fromStyles),s.onDestroy(()=>zw(e,o.toStyles)),A.push(s),c.has(e)&&r.push(s)}),A.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=hw(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let O=0;O<m.length;O++){const t=m[O],e=t.__ng_removed;if(tE(t,Dw),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Fw,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?eE(this,t,r):this.processLeaveNode(t)}return m.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==zS;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=gw(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Hw(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new aw(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return nE(t,e),e}((n.get(h)||US).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=s.get(h),y=dw(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new ZS(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{gw(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>XS(t,Lw));const d=hw(h);return d.onDestroy(()=>{c.forEach(t=>tE(t,Lw)),zw(a,e.toStyles)}),l.forEach(t=>{gw(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new aw(t.duration,t.delay)}}class ZS{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new aw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>fw(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){gw(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function QS(t){return t&&1===t.nodeType}function YS(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function WS(t,e,n,r,i){const s=[];n.forEach(t=>s.push(YS(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=BS,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>YS(t,s[a++])),o}function JS(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function XS(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function tE(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function eE(t,e,n){hw(n).onDone(()=>t.processLeaveNode(e))}function nE(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof uw?nE(r.players,e):e.push(r)}}function rE(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class iE{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new KS(t,e,n),this._timelineEngine=new FS(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=cS(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new RS(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=yw(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=yw(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function sE(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=aE(e[0]),e.length>1&&(r=aE(e[e.length-1]))):e&&(n=aE(e)),n||r?new oE(t,n,r):null}let oE=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&zw(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zw(this._element,this._initialStyles),this._endStyles&&(zw(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Hw(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hw(this._element,this._endStyles),this._endStyles=null),zw(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function aE(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];uE(i)&&(e=e||{},e[i]=t[i])}return e}function uE(t){return"display"===t||"position"===t}const cE="animation",lE="animationend";class hE{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=yE(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),gE(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),mE(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){dE(this._element,this._name,"paused")}resume(){dE(this._element,this._name,"running")}setPosition(t){const e=fE(this._element,this._name);this._position=t*this._duration,gE(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),mE(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=yE(t,"").split(","),r=pE(n,e);r>=0&&(n.splice(r,1),gE(t,"",n.join(",")))}(this._element,this._name))}}function dE(t,e,n){gE(t,"PlayState",n,fE(t,e))}function fE(t,e){const n=yE(t,"");return n.indexOf(",")>0?pE(n.split(","),e):pE([n],e)}function pE(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function mE(t,e,n){n?t.removeEventListener(lE,e):t.addEventListener(lE,e)}function gE(t,e,n,r){const i=cE+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function yE(t,e){return t.style[cE+e]||""}class vE{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new hE(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:nS(this.element,n))})}this.currentSnapshot=t}}class bE extends aw{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Aw(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class _E{constructor(){this._count=0}validateStyleProperty(t){return Tw(t)}matchesElement(t,e){return Cw(t,e)}containsElement(t,e){return xw(t,e)}query(t,e,n){return Iw(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Aw(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof vE),u={};Xw(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=tS(t,e,u));if(0==n)return new bE(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=sE(t,e),f=new vE(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class wE{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:nS(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class SE{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(EE().toString()),this._cssKeyframesDriver=new _E}validateStyleProperty(t){return Tw(t)}matchesElement(t,e){return Cw(t,e)}containsElement(t,e){return xw(t,e)}query(t,e,n){return Iw(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof wE);Xw(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=sE(t,e=tS(t,e=e.map(t=>qw(t,!1)),u));return new wE(t,e,a,l)}}function EE(){return cw()&&Element.prototype.animate||{}}let TE=(()=>{class t extends J_{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?nw(t):t;return IE(this._renderer,null,e,"register",[n]),new CE(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class CE extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new xE(this._id,t,e||{},this._renderer)}}class xE{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return IE(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function IE(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const AE="@",kE="@.disabled";let OE=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new NE("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new DE(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(iE),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class NE{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==AE&&e==kE?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class DE extends NE{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==AE?"."==e.charAt(1)&&e==kE?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==AE){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=AE&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let RE=(()=>{class t extends iE{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(Ow),r.LFG(xS))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const PE=new r.OlP("AnimationModuleType"),LE=[{provide:J_,useClass:TE},{provide:xS,useFactory:function(){return new IS}},{provide:iE,useClass:RE},{provide:r.FYo,useFactory:function(t,e,n){return new OE(t,e,n)},deps:[lt,iE,r.R0b]}],FE=[{provide:Ow,useFactory:function(){return"function"==typeof EE()?new SE:new _E}},{provide:PE,useValue:"BrowserAnimations"},...LE],ME=[{provide:Ow,useClass:kw},{provide:PE,useValue:"NoopAnimations"},...LE];let VE,jE=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?ME:FE}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:FE,imports:[St]}),t})();class UE{constructor(t){this.total=t}call(t,e){return e.subscribe(new qE(t,this.total))}}class qE extends He.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}function BE(t){return e=>e.lift(new GE(t))}class GE{constructor(t){this.notifier=t}call(t,e){const n=new zE(t),r=(0,an.ft)(this.notifier,new an.IY(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class zE extends an.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function HE(t){return null!=t&&"false"!=`${t}`}function $E(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function KE(t){return t instanceof r.SBq?t.nativeElement:t}try{VE="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(eb){VE=!1}let ZE,QE=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!VE)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})(),YE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const WE=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function JE(){if(ZE)return ZE;if("object"!=typeof document||!document)return ZE=new Set(WE),ZE;let t=document.createElement("input");return ZE=new Set(WE.filter(e=>(t.setAttribute("type",e),t.type===e))),ZE}let XE,tT;function eT(t){return function(){if(null==XE&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>XE=!0}))}finally{XE=XE||!1}return XE}()?t:!!t.capture}class nT{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new rT(t,this.dueTime,this.scheduler))}}class rT extends He.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(iT,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function iT(t){t.debouncedNext()}let sT=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})(),oT=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=KE(t);return new Tt.y(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new qe.xQ,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(sT))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(sT))},token:t,providedIn:"root"}),t})(),aT=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new r.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=HE(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=$E(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(t,e=Us.P){return n=>n.lift(new nT(t,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(oT),r.Y36(r.SBq),r.Y36(r.R0b))},t.\u0275dir=r.lG2({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),uT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[sT]}),t})();function cT(t){return 0===t.buttons}function lT(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const hT=new r.OlP("cdk-input-modality-detector-options"),dT={ignoreKeys:[18,17,224,91,16]},fT=eT({passive:!0,capture:!0});let pT=(()=>{class t{constructor(t,e,n,r){this._platform=t,this._mostRecentTarget=null,this._modality=new Ge(null),this._lastTouchMs=0,this._onKeydown=t=>{var e,n;(null===(n=null===(e=this._options)||void 0===e?void 0:e.ignoreKeys)||void 0===n?void 0:n.some(e=>e===t.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=mT(t))},this._onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(cT(t)?"keyboard":"mouse"),this._mostRecentTarget=mT(t))},this._onTouchstart=t=>{lT(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=mT(t))},this._options=Object.assign(Object.assign({},dT),r),this.modalityDetected=this._modality.pipe(t=>t.lift(new UE(1))),this.modalityChanged=this.modalityDetected.pipe(zs()),t.isBrowser&&e.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,fT),n.addEventListener("mousedown",this._onMousedown,fT),n.addEventListener("touchstart",this._onTouchstart,fT)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fT),document.removeEventListener("mousedown",this._onMousedown,fT),document.removeEventListener("touchstart",this._onTouchstart,fT))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(QE),r.LFG(r.R0b),r.LFG(o),r.LFG(hT,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(QE),r.LFG(r.R0b),r.LFG(o),r.LFG(hT,8))},token:t,providedIn:"root"}),t})();function mT(t){return t.composedPath?t.composedPath()[0]:t.target}const gT=new r.OlP("cdk-focus-monitor-default-options"),yT=eT({passive:!0,capture:!0});let vT=(()=>{class t{constructor(t,e,n,r,i){this._ngZone=t,this._platform=e,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new qe.xQ,this._rootNodeFocusAndBlurListener=t=>{const e=mT(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}monitor(t,e=!1){const n=KE(t);if(!this._platform.isBrowser||1!==n.nodeType)return(0,Ue.of)(null);const r=function(t){if(function(){if(null==tT){const t="undefined"!=typeof document?document.head:null;tT=!(!t||!t.createShadowRoot&&!t.attachShadow)}return tT}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const s={checkChildren:e,subject:new qe.xQ,rootNode:r};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(t){const e=KE(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=KE(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOrigin(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOrigin(t,e=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&e,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,e){const n=this._elementInfo.get(e),r=mT(t);n&&(n.checkChildren||e===r)&&this._originChanged(e,this._getFocusOrigin(r),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,yT),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,yT)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(BE(this._stopInputModalityDetector)).subscribe(t=>{this._setOrigin(t,!0)}))}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,yT),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,yT),this._rootNodeFocusListenerCount.delete(e))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.R0b),r.LFG(QE),r.LFG(pT),r.LFG(o,8),r.LFG(gT,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.R0b),r.LFG(QE),r.LFG(pT),r.LFG(o,8),r.LFG(gT,8))},token:t,providedIn:"root"}),t})();const bT="cdk-high-contrast-black-on-white",_T="cdk-high-contrast-white-on-black",wT="cdk-high-contrast-active";let ST=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(wT),t.remove(bT),t.remove(_T),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(wT),t.add(bT)):2===e&&(t.add(wT),t.add(_T))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(QE),r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(QE),r.LFG(o))},token:t,providedIn:"root"}),t})();const ET=new r.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,r.f3M)(o)}});let TT=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new r.vpe,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ET,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(ET,8))},token:t,providedIn:"root"}),t})(),CT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const xT=new r.GfV("12.1.0"),IT=new r.GfV("12.1.0"),AT=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let kT,OT=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return(0,r.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&IT.full!==xT.full&&console.warn("The Angular Material version ("+IT.full+") does not match the Angular CDK version ("+xT.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ST),r.LFG(AT,8),r.LFG(o))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[CT],CT]}),t})();function NT(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=HE(t)}}}function DT(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}function RT(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=HE(t)}}}function PT(t){return class extends t{constructor(...t){super(...t),this.stateChanges=new qe.xQ,this.errorState=!1}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}try{kT="undefined"!=typeof Intl}catch(eb){kT=!1}let LT=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})();class FT{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const MT={enterDuration:450,exitDuration:400},VT=eT({passive:!0}),jT=["mousedown","touchstart"],UT=["mouseup","mouseleave","touchend","touchcancel"];class qT{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=KE(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},MT),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),o=t-r.left,a=e-r.top,u=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=o-s+"px",c.style.top=a-s+"px",c.style.height=2*s+"px",c.style.width=2*s+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const l=new FT(this,c,n);return l.state=0,this._activeRipples.add(l),n.persistent||(this._mostRecentTransientRipple=l),this._runTimeoutOutsideZone(()=>{const t=l===this._mostRecentTransientRipple;l.state=1,n.persistent||t&&this._isPointerDown||l.fadeOut()},u),l}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},MT),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=KE(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(jT))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(UT),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=cT(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!lT(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,VT)})})}_removeTriggerEvents(){this._triggerElement&&(jT.forEach(t=>{this._triggerElement.removeEventListener(t,this,VT)}),this._pointerUpEventsRegistered&&UT.forEach(t=>{this._triggerElement.removeEventListener(t,this,VT)}))}}const BT=new r.OlP("mat-ripple-global-options");let GT=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new qT(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(QE),r.Y36(BT,8),r.Y36(PE,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&r.ekj("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),zT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[OT,YE],OT]}),t})();const HT=["*",[["mat-card-footer"]]],$T=["*","mat-card-footer"],KT=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],ZT=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let QT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),YT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),WT=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,e){2&t&&r.ekj("mat-card-actions-align-end","end"===e.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),JT=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(PE,8))},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&r.ekj("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:$T,decls:2,vars:0,template:function(t,e){1&t&&(r.F$t(HT),r.Hsn(0),r.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),XT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:ZT,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,e){1&t&&(r.F$t(KT),r.Hsn(0),r.TgZ(1,"div",0),r.Hsn(2,1),r.qZA(),r.Hsn(3,2))},encapsulation:2,changeDetection:0}),t})(),tC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[OT],OT]}),t})();var eC=n(5024);function nC(t,e,n,r){return(0,eC.m)(n)&&(r=n,n=void 0),r?nC(t,e,n).pipe((0,xt.U)(t=>(0,Ct.k)(t)?r(...t):r(t))):new Tt.y(r=>{rC(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function rC(t,e,n,r,i){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),s=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),s=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),s=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)rC(t[s],e,n,r,i)}r.add(s)}const iC=["underline"],sC=["connectionContainer"],oC=["inputContainer"],aC=["label"];function uC(t,e){1&t&&(r.ynx(0),r.TgZ(1,"div",14),r._UZ(2,"div",15),r._UZ(3,"div",16),r._UZ(4,"div",17),r.qZA(),r.TgZ(5,"div",18),r._UZ(6,"div",15),r._UZ(7,"div",16),r._UZ(8,"div",17),r.qZA(),r.BQk())}function cC(t,e){1&t&&(r.TgZ(0,"div",19),r.Hsn(1,1),r.qZA())}function lC(t,e){if(1&t&&(r.ynx(0),r.Hsn(1,2),r.TgZ(2,"span"),r._uU(3),r.qZA(),r.BQk()),2&t){const t=r.oxw(2);r.xp6(3),r.Oqu(t._control.placeholder)}}function hC(t,e){1&t&&r.Hsn(0,3,["*ngSwitchCase","true"])}function dC(t,e){1&t&&(r.TgZ(0,"span",23),r._uU(1," *"),r.qZA())}function fC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"label",20,21),r.NdJ("cdkObserveContent",function(){return r.CHM(t),r.oxw().updateOutlineGap()}),r.YNc(2,lC,4,1,"ng-container",12),r.YNc(3,hC,1,0,"ng-content",12),r.YNc(4,dC,2,0,"span",22),r.qZA()}if(2&t){const t=r.oxw();r.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),r.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),r.uIk("for",t._control.id)("aria-owns",t._control.id),r.xp6(2),r.Q6J("ngSwitchCase",!1),r.xp6(1),r.Q6J("ngSwitchCase",!0),r.xp6(1),r.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function pC(t,e){1&t&&(r.TgZ(0,"div",24),r.Hsn(1,4),r.qZA())}function mC(t,e){if(1&t&&(r.TgZ(0,"div",25,26),r._UZ(2,"span",27),r.qZA()),2&t){const t=r.oxw();r.xp6(2),r.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function gC(t,e){if(1&t&&(r.TgZ(0,"div"),r.Hsn(1,5),r.qZA()),2&t){const t=r.oxw();r.Q6J("@transitionMessages",t._subscriptAnimationState)}}function yC(t,e){if(1&t&&(r.TgZ(0,"div",31),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.Q6J("id",t._hintLabelId),r.xp6(1),r.Oqu(t.hintLabel)}}function vC(t,e){if(1&t&&(r.TgZ(0,"div",28),r.YNc(1,yC,2,2,"div",29),r.Hsn(2,6),r._UZ(3,"div",30),r.Hsn(4,7),r.qZA()),2&t){const t=r.oxw();r.Q6J("@transitionMessages",t._subscriptAnimationState),r.xp6(1),r.Q6J("ngIf",t.hintLabel)}}const bC=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],_C=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],wC=new r.OlP("MatError"),SC={transitionMessages:tw("transitionMessages",[iw("enter",rw({opacity:1,transform:"translateY(0%)"})),sw("void => enter",[rw({opacity:0,transform:"translateY(-5px)"}),ew("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let EC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),TC=0;const CC=new r.OlP("MatHint");let xC=(()=>{class t{constructor(){this.align="start",this.id="mat-hint-"+TC++}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(t,e){2&t&&(r.uIk("id",e.id)("align",null),r.ekj("mat-form-field-hint-end","end"===e.align))},inputs:{align:"align",id:"id"},features:[r._Bn([{provide:CC,useExisting:t}])]}),t})(),IC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["mat-label"]]}),t})(),AC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["mat-placeholder"]]}),t})();const kC=new r.OlP("MatPrefix");let OC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","matPrefix",""]],features:[r._Bn([{provide:kC,useExisting:t}])]}),t})();const NC=new r.OlP("MatSuffix");let DC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","matSuffix",""]],features:[r._Bn([{provide:NC,useExisting:t}])]}),t})(),RC=0;const PC=DT(class{constructor(t){this._elementRef=t}},"primary"),LC=new r.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),FC=new r.OlP("MatFormField");let MC=(()=>{class t extends PC{constructor(t,e,n,r,i,s,o,a){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=r,this._defaults=i,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new qe.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+RC++,this._labelId="mat-form-field-label-"+RC++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=i&&i.appearance?i.appearance:"legacy",this._hideRequiredMarker=!(!i||null==i.hideRequiredMarker)&&i.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=HE(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(mn(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(BE(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(BE(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,w_.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(mn(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(mn(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(BE(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,nC(this._label.nativeElement,"transitionend").pipe(dn(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&t.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),s=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const i=r.getBoundingClientRect();if(0===i.width&&0===i.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(i),o=t.children,a=this._getStartEnd(o[0].getBoundingClientRect());let u=0;for(let t=0;t<o.length;t++)u+=o[t].offsetWidth;e=Math.abs(a-s)-5,n=u>0?.75*u+10:0}for(let o=0;o<i.length;o++)i[o].style.width=`${e}px`;for(let o=0;o<s.length;o++)s[o].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.sBO),r.Y36(r.SBq),r.Y36(TT,8),r.Y36(LC,8),r.Y36(QE),r.Y36(r.R0b),r.Y36(PE,8))},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){if(1&t&&(r.Suo(n,EC,5),r.Suo(n,EC,7),r.Suo(n,IC,5),r.Suo(n,IC,7),r.Suo(n,AC,5),r.Suo(n,wC,5),r.Suo(n,CC,5),r.Suo(n,kC,5),r.Suo(n,NC,5)),2&t){let t;r.iGM(t=r.CRH())&&(e._controlNonStatic=t.first),r.iGM(t=r.CRH())&&(e._controlStatic=t.first),r.iGM(t=r.CRH())&&(e._labelChildNonStatic=t.first),r.iGM(t=r.CRH())&&(e._labelChildStatic=t.first),r.iGM(t=r.CRH())&&(e._placeholderChild=t.first),r.iGM(t=r.CRH())&&(e._errorChildren=t),r.iGM(t=r.CRH())&&(e._hintChildren=t),r.iGM(t=r.CRH())&&(e._prefixChildren=t),r.iGM(t=r.CRH())&&(e._suffixChildren=t)}},viewQuery:function(t,e){if(1&t&&(r.Gf(iC,5),r.Gf(sC,7),r.Gf(oC,5),r.Gf(aC,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.underlineRef=t.first),r.iGM(t=r.CRH())&&(e._connectionContainerRef=t.first),r.iGM(t=r.CRH())&&(e._inputContainerRef=t.first),r.iGM(t=r.CRH())&&(e._label=t.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,e){2&t&&r.ekj("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat())("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[r._Bn([{provide:FC,useExisting:t}]),r.qOj],ngContentSelectors:_C,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(r.F$t(bC),r.TgZ(0,"div",0),r.TgZ(1,"div",1,2),r.NdJ("click",function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)}),r.YNc(3,uC,9,0,"ng-container",3),r.YNc(4,cC,2,0,"div",4),r.TgZ(5,"div",5,6),r.Hsn(7),r.TgZ(8,"span",7),r.YNc(9,fC,5,16,"label",8),r.qZA(),r.qZA(),r.YNc(10,pC,2,0,"div",9),r.qZA(),r.YNc(11,mC,3,4,"div",10),r.TgZ(12,"div",11),r.YNc(13,gC,2,1,"div",12),r.YNc(14,vC,5,2,"div",13),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.Q6J("ngIf","outline"==e.appearance),r.xp6(1),r.Q6J("ngIf",e._prefixChildren.length),r.xp6(5),r.Q6J("ngIf",e._hasFloatingLabel()),r.xp6(1),r.Q6J("ngIf",e._suffixChildren.length),r.xp6(1),r.Q6J("ngIf","outline"!=e.appearance),r.xp6(1),r.Q6J("ngSwitch",e._getDisplayedMessages()),r.xp6(1),r.Q6J("ngSwitchCase","error"),r.xp6(1),r.Q6J("ngSwitchCase","hint"))},directives:[A,D,R,aT],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[SC.transitionMessages]},changeDetection:0}),t})(),VC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[B,OT,uT],OT]}),t})();const jC=["mat-button",""],UC=["*"],qC=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],BC=DT(NT(RT(class{constructor(t){this._elementRef=t}})));let GC=(()=>{class t extends BC{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of qC)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,e){t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(vT),r.Y36(PE,8))},t.\u0275cmp=r.Xpm({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&r.Gf(GT,5),2&t){let t;r.iGM(t=r.CRH())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(r.uIk("disabled",e.disabled||null),r.ekj("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[r.qOj],attrs:jC,ngContentSelectors:UC,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"span",0),r.Hsn(1),r.qZA(),r._UZ(2,"span",1),r._UZ(3,"span",2)),2&t&&(r.xp6(2),r.ekj("mat-button-ripple-round",e.isRoundButton||e.isIconButton),r.Q6J("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[GT],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),zC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[zT,OT],OT]}),t})();function HC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"p"),r._uU(1),r.ALo(2,"async"),r._UZ(3,"input",4,5),r.TgZ(5,"button",6),r.NdJ("click",function(){r.CHM(t);const e=r.MAs(4);return r.oxw().updateTest(e.value),e.value=""}),r._uU(6,"set new value"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();let e;r.xp6(1),r.AsE(" id",t.docId,".balance = ",null==(e=r.lcZ(2,2,t.wallet$))?null:e.balance," ")}}function $C(t,e){if(1&t&&(r.TgZ(0,"div",7),r.TgZ(1,"span",1),r._uU(2,"\u2794 \xa0"),r.qZA(),r.TgZ(3,"span",8),r._uU(4),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(4),r.Oqu(t.comment)}}function KC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",9),r.NdJ("click",function(){return r.CHM(t),r.oxw().goBack()}),r._uU(1,"go back"),r.qZA()}}let ZC=(()=>{class t{constructor(t,e){this.walletService=t,this.location=e,this.showGoBack=!0,this.docId=this.walletService.docId}goBack(){this.location.back()}updateTest(t){this.walletService.updateBalance(Number(t)).then(()=>{console.log("Done")}).catch(t=>{console.error("error: ",t)})}ngOnInit(){this.showGoBack="/balance"===this.location.path(),this.wallet$=this.walletService.getWalletOb(),this.loverName=this.walletService.loverName,this.wallet$.subscribe(t=>{this.comment=t.balance>0?`\u4f60\u6709${t.balance}\u5143\u5728${this.loverName}\u90a3\u88e1`:`${this.loverName}\u6709${-1*t.balance}\u5143\u5728\u4f60\u9019\u88e1`})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(W_),r.Y36(w))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-balance"]],decls:15,vars:5,consts:[["id","balance"],["matPrefix",""],["id","divComment",4,"ngIf"],["id","goBack","mat-flat-button","",3,"click",4,"ngIf"],["type","number"],["ipt",""],[3,"click"],["id","divComment"],["id","spanComment"],["id","goBack","mat-flat-button","",3,"click"]],template:function(t,e){if(1&t&&(r.YNc(0,HC,7,4,"ng-template"),r._UZ(1,"br"),r.TgZ(2,"mat-card"),r.TgZ(3,"mat-card-header"),r.TgZ(4,"mat-card-title"),r._uU(5," \u4f60\u7684\u9918\u984d "),r.qZA(),r.qZA(),r.TgZ(6,"mat-card-content"),r.TgZ(7,"div",0),r.TgZ(8,"span",1),r._uU(9,"$ \xa0"),r.qZA(),r._uU(10),r.ALo(11,"async"),r.qZA(),r.YNc(12,$C,5,1,"div",2),r.qZA(),r.TgZ(13,"mat-card-actions"),r.YNc(14,KC,2,0,"button",3),r.qZA(),r.qZA()),2&t){let t;r.xp6(10),r.Oqu(null==(t=r.lcZ(11,3,e.wallet$))?null:t.balance),r.xp6(2),r.Q6J("ngIf",e.comment),r.xp6(2),r.Q6J("ngIf",e.showGoBack)}},directives:[JT,XT,YT,QT,OC,A,WT,GC],pipes:[U],styles:["p[_ngcontent-%COMP%]{padding:1em;border:2px dotted #000}mat-card[_ngcontent-%COMP%]{margin:0 1em}#balance[_ngcontent-%COMP%]{padding-left:2em;font-size:18px}#divComment[_ngcontent-%COMP%]{margin-top:12px;padding-left:16px;font-size:18px}#goBack[_ngcontent-%COMP%]{margin-left:1em}"]}),t})();n(2293);const QC=eT({passive:!0});let YC=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return rn.E;const e=KE(t),n=this._monitoredElements.get(e);if(n)return n.subject;const r=new qe.xQ,i="cdk-text-field-autofilled",s=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(i)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(i)&&(e.classList.remove(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!1}))):(e.classList.add(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",s,QC),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:r,unlisten:()=>{e.removeEventListener("animationstart",s,QC)}}),r}stopMonitoring(t){const e=KE(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(QE),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(QE),r.LFG(r.R0b))},token:t,providedIn:"root"}),t})(),WC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[YE]]}),t})();const JC=new r.OlP("MAT_INPUT_VALUE_ACCESSOR"),XC=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let tx=0;const ex=PT(class{constructor(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}});let nx=(()=>{class t extends ex{constructor(t,e,n,r,i,s,o,a,u,c){super(s,r,i,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=a,this._formField=c,this._uid="mat-input-"+tx++,this.focused=!1,this.stateChanges=new qe.xQ,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>JE().has(t));const l=this._elementRef.nativeElement,h=l.nodeName.toLowerCase();this._inputValueAccessor=o||l,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{const e=t.target;e.value||0!==e.selectionStart||0!==e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isInFormField=!!c,this._isNativeSelect&&(this.controlType=l.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=HE(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=HE(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&JE().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=HE(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,e;const n=(null===(e=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===e?void 0:e.call(t))?null:this.placeholder;if(n!==this._previousPlaceholder){const t=this._elementRef.nativeElement;this._previousPlaceholder=n,n?t.setAttribute("placeholder",n):t.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){XC.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(QE),r.Y36(Qt,10),r.Y36(we,8),r.Y36(ke,8),r.Y36(LT),r.Y36(JC,10),r.Y36(YC),r.Y36(r.R0b),r.Y36(FC,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(t,e){1&t&&r.NdJ("focus",function(){return e._focusChanged(!0)})("blur",function(){return e._focusChanged(!1)})("input",function(){return e._onInput()}),2&t&&(r.Ikx("disabled",e.disabled)("required",e.required),r.uIk("id",e.id)("data-placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-invalid",e.empty&&e.required?null:e.errorState)("aria-required",e.required),r.ekj("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[r._Bn([{provide:EC,useExisting:t}]),r.qOj,r.TTD]}),t})(),rx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[LT],imports:[[WC,VC,OT],WC,VC]}),t})();const ix=["primaryValueBar"],sx=DT(class{constructor(t){this._elementRef=t}},"primary"),ox=new r.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const t=(0,r.f3M)(o),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}});let ax=0,ux=(()=>{class t extends sx{constructor(t,e,n,i){super(t),this._elementRef=t,this._ngZone=e,this._animationMode=n,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new r.vpe,this._animationEndSubscription=qn.w.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+ax++;const s=i?i.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${s}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===n}get value(){return this._value}set value(t){this._value=cx($E(t)||0)}get bufferValue(){return this._bufferValue}set bufferValue(t){this._bufferValue=cx(t||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=nC(t,"transitionend").pipe(bn(e=>e.target===t)).subscribe(()=>{"determinate"!==this.mode&&"buffer"!==this.mode||this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(PE,8),r.Y36(ox,8))},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-progress-bar"]],viewQuery:function(t,e){if(1&t&&r.Gf(ix,5),2&t){let t;r.iGM(t=r.CRH())&&(e._primaryValueBar=t.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,e){2&t&&(r.uIk("aria-valuenow","indeterminate"===e.mode||"query"===e.mode?null:e.value)("mode",e.mode),r.ekj("_mat-animation-noopable",e._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[r.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.O4$(),r.TgZ(1,"svg",1),r.TgZ(2,"defs"),r.TgZ(3,"pattern",2),r._UZ(4,"circle",3),r.qZA(),r.qZA(),r._UZ(5,"rect",4),r.qZA(),r.kcU(),r._UZ(6,"div",5),r._UZ(7,"div",6,7),r._UZ(9,"div",8),r.qZA()),2&t&&(r.xp6(3),r.Q6J("id",e.progressbarId),r.xp6(2),r.uIk("fill",e._rectangleFillValue),r.xp6(1),r.Q6J("ngStyle",e._bufferTransform()),r.xp6(1),r.Q6J("ngStyle",e._primaryTransform()))},directives:[P],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),t})();function cx(t,e=0,n=100){return Math.max(e,Math.min(n,t))}let lx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[B,OT],OT]}),t})();function hx(t,e){1&t&&r._UZ(0,"mat-progress-bar",16)}const dx=[{path:"",redirectTo:"/transaction",pathMatch:"full"},{path:"balance",component:ZC},{path:"transaction",component:(()=>{class t{constructor(t,e){this.walletService=t,this.router=e,this.amount=0,this.waiting=!1}deal(t){this.amount&&(this.waiting=!0,this.walletService.balanceAdd(this.amount*("1"===t?1:-1)).then(()=>{this.router.navigate(["/balance"])}).finally(()=>{this.waiting=!1}))}ngOnInit(){this.loverName=this.walletService.loverName}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(W_),r.Y36(bs))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-transaction"]],decls:30,vars:5,consts:[["id","transactionForm"],["id","selectAction","appearance","fill"],["matNativeControl",""],["transactionMethod",""],["value","1"],["value","2"],["align","end"],["id","inputAmount","appearance","fill"],["matPrefix",""],["type","number","matInput","","placeholder","",3,"ngModel","ngModelChange"],["matSuffix",""],["id","buttonContainer"],["id","buttonDeal","mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","",3,"click"],["mat-flat-button",""],["mode","indeterminate","color","accent",4,"ngIf"],["mode","indeterminate","color","accent"]],template:function(t,e){if(1&t){const t=r.EpF();r._UZ(0,"app-balance"),r._UZ(1,"br"),r.TgZ(2,"div",0),r.TgZ(3,"mat-form-field",1),r.TgZ(4,"mat-label"),r._uU(5,"\u9078\u64c7\u4e00\u7a2e\u884c\u52d5"),r.qZA(),r.TgZ(6,"select",2,3),r.TgZ(8,"option",4),r._uU(9),r.qZA(),r.TgZ(10,"option",5),r._uU(11),r.qZA(),r.qZA(),r.TgZ(12,"mat-hint",6),r._uU(13,"\u6211\u662f\u4e0b\u62c9\u5f0f\u9078\u55ae ^"),r.qZA(),r.qZA(),r.TgZ(14,"mat-form-field",7),r.TgZ(15,"mat-label"),r._uU(16,"\u91d1\u984d"),r.qZA(),r.TgZ(17,"span",8),r._uU(18,"$ \xa0"),r.qZA(),r.TgZ(19,"input",9),r.NdJ("ngModelChange",function(t){return e.amount=t}),r.qZA(),r.TgZ(20,"span",10),r._uU(21,"\u5143"),r.qZA(),r.qZA(),r.TgZ(22,"div",11),r.TgZ(23,"button",12),r.NdJ("click",function(){r.CHM(t);const n=r.MAs(7);return e.deal(n.value)}),r._uU(24,"OK"),r.qZA(),r.qZA(),r.qZA(),r._UZ(25,"hr"),r.TgZ(26,"button",13),r.NdJ("click",function(){return e.waiting=!e.waiting}),r._uU(27,"toggle waiting"),r.qZA(),r._UZ(28,"button",14),r.YNc(29,hx,1,0,"mat-progress-bar",15)}2&t&&(r.xp6(9),r.hij("\u4f60\u5e6b",e.loverName,"\u4ed8\u4e86"),r.xp6(2),r.hij("",e.loverName,"\u5e6b\u4f60\u4ed8\u4e86"),r.xp6(8),r.Q6J("ngModel",e.amount),r.xp6(4),r.Q6J("disabled",e.waiting),r.xp6(6),r.Q6J("ngIf",e.waiting))},directives:[ZC,MC,IC,nx,Re,Me,xC,OC,xe,Pt,Yt,Te,DC,GC,A,ux],styles:["#inputAmount[_ngcontent-%COMP%], #selectAction[_ngcontent-%COMP%]{width:100%}#selectAction[_ngcontent-%COMP%]{margin-bottom:.5em}#buttonContainer[_ngcontent-%COMP%]{width:100%;text-align:center}#buttonDeal[_ngcontent-%COMP%]{width:120px}#transactionForm[_ngcontent-%COMP%]{margin:0 1em}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:56px;max-width:900px}"]}),t})()}];let fx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Os.forRoot(dx)],Os]}),t})();const px=["*",[["mat-toolbar-row"]]],mx=["*","mat-toolbar-row"],gx=DT(class{constructor(t){this._elementRef=t}});let yx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),vx=(()=>{class t extends gx{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(QE),r.Y36(o))},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){if(1&t&&r.Suo(n,yx,5),2&t){let t;r.iGM(t=r.CRH())&&(e._toolbarRows=t)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&r.ekj("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[r.qOj],ngContentSelectors:mx,decls:2,vars:0,template:function(t,e){1&t&&(r.F$t(px),r.Hsn(0),r.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),t})(),bx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[OT],OT]}),t})(),_x=(()=>{class t{constructor(){this.title="couple wallet"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:6,vars:3,consts:[["id","app"],["color","primary"],["id","spanTitle"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"mat-toolbar",1),r.TgZ(2,"span",2),r._uU(3),r.ALo(4,"uppercase"),r.qZA(),r.qZA(),r._UZ(5,"router-outlet"),r.qZA()),2&t&&(r.xp6(3),r.Oqu(r.lcZ(4,1,e.title)))},directives:[vx,_s],pipes:[q],styles:["#app[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}#spanTitle[_ngcontent-%COMP%]{padding-left:1em}"]}),t})(),wx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[OT],OT]}),t})(),Sx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[OT,B],OT]}),t})();const Ex={apiKey:"AIzaSyAOO9cUnjNT5B8uXTqj4BgwXEzKBuRv68c",authDomain:"couple-wallet-58355.firebaseapp.com",projectId:"couple-wallet-58355",storageBucket:"couple-wallet-58355.appspot.com",messagingSenderId:"940151141159",appId:"1:940151141159:web:be71fe984b419617646f02"};let Tx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[_x]}),t.\u0275inj=r.cJS({providers:[],imports:[[St,je,fx,jE,Zs.hO.initializeApp(Ex),bx,wx,tC,zC,VC,rx,lx,Sx]]}),t})();(0,r.G48)(),_t().bootstrapModule(Tx).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>s,mG:()=>o,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=8843)}]);